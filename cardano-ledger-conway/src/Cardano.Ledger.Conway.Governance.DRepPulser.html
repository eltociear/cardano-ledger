<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE BangPatterns #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE ConstraintKinds #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE DeriveAnyClass #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE DeriveGeneric #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE DerivingStrategies #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes #-}</span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards #-}</span><span>
</span><span id="line-15"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-16"></span><span class="hs-pragma">{-# LANGUAGE StandaloneDeriving #-}</span><span>
</span><span id="line-17"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-18"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-19"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators #-}</span><span>
</span><span id="line-20"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-21"></span><span class="hs-pragma">{-# LANGUAGE UndecidableSuperClasses #-}</span><span>
</span><span id="line-22"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-orphans #-}</span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Cardano.Ledger.Conway.Governance.DRepPulser</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-25"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier">DRepPulsingState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier">DRepPulser</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#pulseDRepPulsingState"><span class="hs-identifier">pulseDRepPulsingState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#completeDRepPulsingState"><span class="hs-identifier">completeDRepPulsingState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#extractDRepPulsingState"><span class="hs-identifier">extractDRepPulsingState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier">finishDRepPulser</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#computeDrepDistr"><span class="hs-identifier">computeDrepDistr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepDistrG"><span class="hs-identifier">psDRepDistrG</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dormantEpoch"><span class="hs-identifier">dormantEpoch</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier">PulsingSnapshot</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psProposalsL"><span class="hs-identifier">psProposalsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepDistrL"><span class="hs-identifier">psDRepDistrL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepStateL"><span class="hs-identifier">psDRepStateL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>  </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#RunConwayRatify"><span class="hs-identifier">RunConwayRatify</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-40"></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.BaseTypes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-slotting-0.2.0.0-e8312797f023619ba000361257739ea3242d7d9366b817847e018e86b37d28d6/share/doc/html/src"><span class="hs-identifier">EpochNo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Globals</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier">Cardano.Ledger.Binary</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-43"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier">DecCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier">DecShareCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier">EncCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>  </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-binary-1.7.1.0-3a6e033492ee9b1687f91e32b583075121c1b9f8768c68f01e24c599f4a28b7a/share/doc/html/src"><span class="hs-identifier">FromCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>  </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-binary-1.7.1.0-3a6e033492ee9b1687f91e32b583075121c1b9f8768c68f01e24c599f4a28b7a/share/doc/html/src"><span class="hs-identifier">ToCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier">Cardano.Ledger.Binary.Coders</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-50"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier">Decode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier">Encode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier">decode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier">encode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-operator">(!&gt;)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-operator">(&lt;!)</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.CertState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">CommitteeState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.Coin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Coin</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Era.html"><span class="hs-identifier">Cardano.Ledger.Conway.Era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Era.html#ConwayRATIFY"><span class="hs-identifier">ConwayRATIFY</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html"><span class="hs-identifier">Cardano.Ledger.Conway.Governance.Internal</span></a></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Procedures.html"><span class="hs-identifier">Cardano.Ledger.Conway.Governance.Procedures</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Procedures.html#GovActionState"><span class="hs-identifier">GovActionState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.Core</span></a></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.Credential</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Credential</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.DRep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">DRep</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">DRepState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.Keys</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">KeyRole</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.PoolDistr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">PoolDistr</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.UMap</span></a></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.UMap</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">UMap</span></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier">Control.DeepSeq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier">deepseq</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier">Control.Monad.Trans.Reader</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier">Reader</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier">runReader</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier">Control.State.Transition.Extended</span></a></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/aeson-2.2.1.0-f1a9efc763473e91fa0fa4fad2eef7b697a009d10993d75c856ae81d3726a778/share/doc/html/src"><span class="hs-identifier">Data.Aeson</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/aeson-2.2.1.0-f1a9efc763473e91fa0fa4fad2eef7b697a009d10993d75c856ae81d3726a778/share/doc/html/src"><span class="hs-identifier">KeyValue</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/aeson-2.2.1.0-f1a9efc763473e91fa0fa4fad2eef7b697a009d10993d75c856ae81d3726a778/share/doc/html/src"><span class="hs-identifier">ToJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/aeson-2.2.1.0-f1a9efc763473e91fa0fa4fad2eef7b697a009d10993d75c856ae81d3726a778/share/doc/html/src"><span class="hs-identifier">object</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/aeson-2.2.1.0-f1a9efc763473e91fa0fa4fad2eef7b697a009d10993d75c856ae81d3726a778/share/doc/html/src"><span class="hs-identifier">pairs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/aeson-2.2.1.0-f1a9efc763473e91fa0fa4fad2eef7b697a009d10993d75c856ae81d3726a778/share/doc/html/src"><span class="hs-operator">(.=)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/data-default-class-0.1.2.0-d021275d74faf56efb7a1c98c49b66562c7b07f4d3882878288b6faf38a43071/share/doc/html/src"><span class="hs-identifier">Data.Default.Class</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/data-default-class-0.1.2.0-d021275d74faf56efb7a1c98c49b66562c7b07f4d3882878288b6faf38a43071/share/doc/html/src"><span class="hs-identifier">Default</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.Foldable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">toList</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.Functor.Identity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Identity</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.Kind</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier">Type</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Data.Map.Strict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Map</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Data.Map.Strict</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">fromMaybe</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-data-1.2.1.0/doc/html/cardano-data/src"><span class="hs-identifier">Data.Pulse</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-data-1.2.1.0/doc/html/cardano-data/src"><span class="hs-identifier">Pulsable</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-data-1.2.1.0/doc/html/cardano-data/src"><span class="hs-identifier">pulse</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-strict-containers-0.1.3.0-c8c434ba474a408c40a155b68fe1059a1c9196931f80e9c4ade09421da2372fd/share/doc/html/src"><span class="hs-identifier">Data.Sequence.Strict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-strict-containers-0.1.3.0-c8c434ba474a408c40a155b68fe1059a1c9196931f80e9c4ade09421da2372fd/share/doc/html/src"><span class="hs-identifier">StrictSeq</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-strict-containers-0.1.3.0-c8c434ba474a408c40a155b68fe1059a1c9196931f80e9c4ade09421da2372fd/share/doc/html/src"><span class="hs-identifier">Data.Sequence.Strict</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SS</span></span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">GHC.Generics</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier">Lens.Micro</span></a></span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.1.5-76e731986fff9ac9cebdee355b4fbb3ea82ff8325466beffbac98173fb630134/share/doc/html/src"><span class="hs-identifier">NoThunks.Class</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.1.5-76e731986fff9ac9cebdee355b4fbb3ea82ff8325466beffbac98173fb630134/share/doc/html/src"><span class="hs-identifier">NoThunks</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.1.5-76e731986fff9ac9cebdee355b4fbb3ea82ff8325466beffbac98173fb630134/share/doc/html/src"><span class="hs-identifier">allNoThunks</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span class="hs-comment">-- | A snapshot of information from the previous epoch stored inside the Pulser.</span><span>
</span><span id="line-88"></span><span class="hs-comment">--   After the pulser completes, but before the epoch turns, this information</span><span>
</span><span id="line-89"></span><span class="hs-comment">--   is store in the 'DRComplete' constructor of the 'DRepPulsingState'</span><span>
</span><span id="line-90"></span><span class="hs-comment">--   These are the values at the start of the current epoch. This allows the API</span><span>
</span><span id="line-91"></span><span class="hs-comment">--   To access these &quot;previous&quot; values, both during and after pulsing.</span><span>
</span><span id="line-92"></span><span id="local-6989586621679700905"><span id="local-6989586621679700906"></span></span><span class="hs-keyword">data</span><span> </span><span id="PulsingSnapshot"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-var">PulsingSnapshot</span></a></span></span><span> </span><span id="local-6989586621679701579"><span class="annot"><a href="#local-6989586621679701579"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PulsingSnapshot"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-var">PulsingSnapshot</span></a></span></span><span>
</span><span id="line-93"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="psProposals"><span class="annot"><span class="annottext">forall era. PulsingSnapshot era -&gt; StrictSeq (GovActionState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psProposals"><span class="hs-identifier hs-var hs-var">psProposals</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-strict-containers-0.1.3.0-c8c434ba474a408c40a155b68fe1059a1c9196931f80e9c4ade09421da2372fd/share/doc/html/src"><span class="hs-identifier hs-type">StrictSeq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Procedures.html#GovActionState"><span class="hs-identifier hs-type">GovActionState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701579"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-94"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="psDRepDistr"><span class="annot"><span class="annottext">forall era.
PulsingSnapshot era
-&gt; Map (DRep (EraCrypto era)) (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepDistr"><span class="hs-identifier hs-var hs-var">psDRepDistr</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">DRep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701579"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">CompactForm</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-95"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="psDRepState"><span class="annot"><span class="annottext">forall era.
PulsingSnapshot era
-&gt; Map
     (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepState"><span class="hs-identifier hs-var hs-var">psDRepState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">DRepRole</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701579"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">DRepState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701579"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-97"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall era x. Rep (PulsingSnapshot era) x -&gt; PulsingSnapshot era
forall era x. PulsingSnapshot era -&gt; Rep (PulsingSnapshot era) x
$cto :: forall era x. Rep (PulsingSnapshot era) x -&gt; PulsingSnapshot era
$cfrom :: forall era x. PulsingSnapshot era -&gt; Rep (PulsingSnapshot era) x
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-98"></span><span>
</span><span id="line-99"></span><span id="local-6989586621679701574"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psProposalsL"><span class="hs-identifier hs-type">psProposalsL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701574"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-strict-containers-0.1.3.0-c8c434ba474a408c40a155b68fe1059a1c9196931f80e9c4ade09421da2372fd/share/doc/html/src"><span class="hs-identifier hs-type">StrictSeq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Procedures.html#GovActionState"><span class="hs-identifier hs-type">GovActionState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701574"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-100"></span><span id="psProposalsL"><span class="annot"><span class="annottext">psProposalsL :: forall era.
Lens' (PulsingSnapshot era) (StrictSeq (GovActionState era))
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psProposalsL"><span class="hs-identifier hs-var hs-var">psProposalsL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier hs-var">lens</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. PulsingSnapshot era -&gt; StrictSeq (GovActionState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psProposals"><span class="hs-identifier hs-var">psProposals</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679700894"><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679700894"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679700893"><span class="annot"><span class="annottext">StrictSeq (GovActionState era)
</span><a href="#local-6989586621679700893"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679700894"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">psProposals :: StrictSeq (GovActionState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psProposals"><span class="hs-identifier hs-var">psProposals</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">StrictSeq (GovActionState era)
</span><a href="#local-6989586621679700893"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span id="local-6989586621679701565"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepDistrL"><span class="hs-identifier hs-type">psDRepDistrL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701565"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">DRep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701565"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">CompactForm</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-103"></span><span id="psDRepDistrL"><span class="annot"><span class="annottext">psDRepDistrL :: forall era.
Lens'
  (PulsingSnapshot era)
  (Map (DRep (EraCrypto era)) (CompactForm Coin))
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepDistrL"><span class="hs-identifier hs-var hs-var">psDRepDistrL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier hs-var">lens</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
PulsingSnapshot era
-&gt; Map (DRep (EraCrypto era)) (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepDistr"><span class="hs-identifier hs-var">psDRepDistr</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679700890"><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679700890"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679700889"><span class="annot"><span class="annottext">Map (DRep (EraCrypto era)) (CompactForm Coin)
</span><a href="#local-6989586621679700889"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679700890"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">psDRepDistr :: Map (DRep (EraCrypto era)) (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepDistr"><span class="hs-identifier hs-var">psDRepDistr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (DRep (EraCrypto era)) (CompactForm Coin)
</span><a href="#local-6989586621679700889"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span id="local-6989586621679701562"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepStateL"><span class="hs-identifier hs-type">psDRepStateL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701562"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">DRepRole</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701562"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">DRepState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701562"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-106"></span><span id="psDRepStateL"><span class="annot"><span class="annottext">psDRepStateL :: forall era.
Lens'
  (PulsingSnapshot era)
  (Map
     (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era)))
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepStateL"><span class="hs-identifier hs-var hs-var">psDRepStateL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier hs-var">lens</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
PulsingSnapshot era
-&gt; Map
     (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepState"><span class="hs-identifier hs-var">psDRepState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679700886"><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679700886"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679700885"><span class="annot"><span class="annottext">Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
</span><a href="#local-6989586621679700885"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679700886"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">psDRepState :: Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepState"><span class="hs-identifier hs-var">psDRepState</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
</span><a href="#local-6989586621679700885"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-107"></span><span>
</span><span id="line-108"></span><span id="local-6989586621679700871"><span id="local-6989586621679700883"><span id="local-6989586621679701549"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701549"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701549"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span id="local-6989586621679700850"><span id="local-6989586621679700852"><span id="local-6989586621679700863"><span id="local-6989586621679701538"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701538"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701538"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679700847"><span id="local-6989586621679701536"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701536"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701536"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-113"></span><span>
</span><span id="line-114"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679700840"><span id="local-6989586621679700842"><span id="local-6989586621679700844"><span id="local-6989586621679701531"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701531"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.1.5-76e731986fff9ac9cebdee355b4fbb3ea82ff8325466beffbac98173fb630134/share/doc/html/src"><span class="hs-identifier hs-type">NoThunks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701531"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-115"></span><span>
</span><span id="line-116"></span><span id="local-6989586621679701527"><span id="local-6989586621679701529"><span id="local-6989586621679701530"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#toPulsingSnapshotsPairs"><span class="hs-identifier hs-type">toPulsingSnapshotsPairs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/aeson-2.2.1.0-f1a9efc763473e91fa0fa4fad2eef7b697a009d10993d75c856ae81d3726a778/share/doc/html/src"><span class="hs-identifier hs-type">KeyValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701530"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701529"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701527"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701527"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679701529"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span></span></span><span>
</span><span id="line-117"></span><span id="toPulsingSnapshotsPairs"><span class="annot"><span class="annottext">toPulsingSnapshotsPairs :: forall e a era.
(KeyValue e a, EraPParams era) =&gt;
PulsingSnapshot era -&gt; [a]
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#toPulsingSnapshotsPairs"><span class="hs-identifier hs-var hs-var">toPulsingSnapshotsPairs</span></a></span></span><span> </span><span id="local-6989586621679700811"><span class="annot"><span class="annottext">gas :: PulsingSnapshot era
</span><a href="#local-6989586621679700811"><span class="hs-identifier hs-var">gas</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSeq (GovActionState era)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map (DRep (EraCrypto era)) (CompactForm Coin)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-118"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679700808"><span id="local-6989586621679700809"><span id="local-6989586621679700810"><span class="annot"><span class="annottext">Map (DRep (EraCrypto era)) (CompactForm Coin)
Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
StrictSeq (GovActionState era)
psDRepState :: Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
psDRepDistr :: Map (DRep (EraCrypto era)) (CompactForm Coin)
psProposals :: StrictSeq (GovActionState era)
psDRepState :: forall era.
PulsingSnapshot era
-&gt; Map
     (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
psDRepDistr :: forall era.
PulsingSnapshot era
-&gt; Map (DRep (EraCrypto era)) (CompactForm Coin)
psProposals :: forall era. PulsingSnapshot era -&gt; StrictSeq (GovActionState era)
</span><a href="#local-6989586621679700808"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679700811"><span class="hs-identifier hs-var">gas</span></a></span><span>
</span><span id="line-119"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;psProposals&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/aeson-2.2.1.0-f1a9efc763473e91fa0fa4fad2eef7b697a009d10993d75c856ae81d3726a778/share/doc/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSeq (GovActionState era)
</span><a href="#local-6989586621679700810"><span class="hs-identifier hs-var">psProposals</span></a></span><span>
</span><span id="line-120"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;psDRepDistr&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/aeson-2.2.1.0-f1a9efc763473e91fa0fa4fad2eef7b697a009d10993d75c856ae81d3726a778/share/doc/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">Map (DRep (EraCrypto era)) (CompactForm Coin)
</span><a href="#local-6989586621679700809"><span class="hs-identifier hs-var">psDRepDistr</span></a></span><span>
</span><span id="line-121"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;psDRepState&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/aeson-2.2.1.0-f1a9efc763473e91fa0fa4fad2eef7b697a009d10993d75c856ae81d3726a778/share/doc/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
</span><a href="#local-6989586621679700808"><span class="hs-identifier hs-var">psDRepState</span></a></span><span>
</span><span id="line-122"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-123"></span><span>
</span><span id="line-124"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679700800"><span id="local-6989586621679700802"><span id="local-6989586621679700804"><span id="local-6989586621679701505"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701505"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/aeson-2.2.1.0-f1a9efc763473e91fa0fa4fad2eef7b697a009d10993d75c856ae81d3726a778/share/doc/html/src"><span class="hs-identifier hs-type">ToJSON</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701505"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-125"></span><span>  </span><span id="local-6989586621679700793"><span class="annot"><span class="annottext">toJSON :: PulsingSnapshot era -&gt; Value
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/aeson-2.2.1.0-f1a9efc763473e91fa0fa4fad2eef7b697a009d10993d75c856ae81d3726a778/share/doc/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/aeson-2.2.1.0-f1a9efc763473e91fa0fa4fad2eef7b697a009d10993d75c856ae81d3726a778/share/doc/html/src"><span class="hs-identifier hs-var">object</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall e a era.
(KeyValue e a, EraPParams era) =&gt;
PulsingSnapshot era -&gt; [a]
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#toPulsingSnapshotsPairs"><span class="hs-identifier hs-var">toPulsingSnapshotsPairs</span></a></span><span>
</span><span id="line-126"></span><span>  </span><span id="local-6989586621679700785"><span class="annot"><span class="annottext">toEncoding :: PulsingSnapshot era -&gt; Encoding
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/aeson-2.2.1.0-f1a9efc763473e91fa0fa4fad2eef7b697a009d10993d75c856ae81d3726a778/share/doc/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">toEncoding</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Series -&gt; Encoding
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/aeson-2.2.1.0-f1a9efc763473e91fa0fa4fad2eef7b697a009d10993d75c856ae81d3726a778/share/doc/html/src"><span class="hs-identifier hs-var">pairs</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall e a era.
(KeyValue e a, EraPParams era) =&gt;
PulsingSnapshot era -&gt; [a]
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#toPulsingSnapshotsPairs"><span class="hs-identifier hs-var">toPulsingSnapshotsPairs</span></a></span><span>
</span><span id="line-127"></span><span>
</span><span id="line-128"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679701493"><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/data-default-class-0.1.2.0-d021275d74faf56efb7a1c98c49b66562c7b07f4d3882878288b6faf38a43071/share/doc/html/src"><span class="hs-identifier hs-type">Default</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701493"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-129"></span><span>  </span><span id="local-6989586621679700775"><span class="annot"><span class="annottext">def :: PulsingSnapshot era
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/data-default-class-0.1.2.0-d021275d74faf56efb7a1c98c49b66562c7b07f4d3882878288b6faf38a43071/share/doc/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
StrictSeq (GovActionState era)
-&gt; Map (DRep (EraCrypto era)) (CompactForm Coin)
-&gt; Map
     (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
-&gt; PulsingSnapshot era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-var">PulsingSnapshot</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Default a =&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/data-default-class-0.1.2.0-d021275d74faf56efb7a1c98c49b66562c7b07f4d3882878288b6faf38a43071/share/doc/html/src"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Default a =&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/data-default-class-0.1.2.0-d021275d74faf56efb7a1c98c49b66562c7b07f4d3882878288b6faf38a43071/share/doc/html/src"><span class="hs-identifier hs-var">def</span></a></span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679700766"><span id="local-6989586621679700768"><span id="local-6989586621679701485"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701485"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-type">EncCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701485"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-132"></span><span>  </span><span id="local-6989586621679700744"><span class="annot"><span class="annottext">encCBOR :: PulsingSnapshot era -&gt; Encoding
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">encCBOR</span></a></span></span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679700740"><span id="local-6989586621679700741"><span id="local-6989586621679700742"><span class="annot"><span class="annottext">Map (DRep (EraCrypto era)) (CompactForm Coin)
Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
StrictSeq (GovActionState era)
psDRepState :: Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
psDRepDistr :: Map (DRep (EraCrypto era)) (CompactForm Coin)
psProposals :: StrictSeq (GovActionState era)
psDRepState :: forall era.
PulsingSnapshot era
-&gt; Map
     (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
psDRepDistr :: forall era.
PulsingSnapshot era
-&gt; Map (DRep (EraCrypto era)) (CompactForm Coin)
psProposals :: forall era. PulsingSnapshot era -&gt; StrictSeq (GovActionState era)
</span><a href="#local-6989586621679700740"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-133"></span><span>    </span><span class="annot"><span class="annottext">forall (w :: Wrapped) t. Encode w t -&gt; Encoding
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">encode</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-134"></span><span>      </span><span class="annot"><span class="annottext">forall t. t -&gt; Encode ('Closed 'Dense) t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">Rec</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
StrictSeq (GovActionState era)
-&gt; Map (DRep (EraCrypto era)) (CompactForm Coin)
-&gt; Map
     (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
-&gt; PulsingSnapshot era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-var">PulsingSnapshot</span></a></span><span>
</span><span id="line-135"></span><span>        </span><span class="annot"><span class="annottext">forall (w :: Wrapped) a t (r :: Density).
Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-operator hs-var">!&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. EncCBOR t =&gt; t -&gt; Encode ('Closed 'Dense) t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">To</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSeq (GovActionState era)
</span><a href="#local-6989586621679700742"><span class="hs-identifier hs-var">psProposals</span></a></span><span>
</span><span id="line-136"></span><span>        </span><span class="annot"><span class="annottext">forall (w :: Wrapped) a t (r :: Density).
Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-operator hs-var">!&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. EncCBOR t =&gt; t -&gt; Encode ('Closed 'Dense) t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">To</span></a></span><span> </span><span class="annot"><span class="annottext">Map (DRep (EraCrypto era)) (CompactForm Coin)
</span><a href="#local-6989586621679700741"><span class="hs-identifier hs-var">psDRepDistr</span></a></span><span>
</span><span id="line-137"></span><span>        </span><span class="annot"><span class="annottext">forall (w :: Wrapped) a t (r :: Density).
Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-operator hs-var">!&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. EncCBOR t =&gt; t -&gt; Encode ('Closed 'Dense) t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">To</span></a></span><span> </span><span class="annot"><span class="annottext">Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
</span><a href="#local-6989586621679700740"><span class="hs-identifier hs-var">psDRepState</span></a></span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span class="hs-comment">-- TODO: Implement Sharing: https://github.com/intersectmbo/cardano-ledger/issues/3486</span><span>
</span><span id="line-140"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679700730"><span id="local-6989586621679700733"><span id="local-6989586621679701452"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701452"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-type">DecShareCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701452"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-141"></span><span>  </span><span id="local-6989586621679700709"><span class="annot"><span class="annottext">decShareCBOR :: forall s.
Share (PulsingSnapshot era) -&gt; Decoder s (PulsingSnapshot era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">decShareCBOR</span></a></span></span><span> </span><span class="annot"><span class="annottext">Share (PulsingSnapshot era)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-142"></span><span>    </span><span class="annot"><span class="annottext">forall (w :: Wrapped) t s. Decode w t -&gt; Decoder s t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">decode</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-143"></span><span>      </span><span class="annot"><span class="annottext">forall t. t -&gt; Decode ('Closed 'Dense) t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">RecD</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
StrictSeq (GovActionState era)
-&gt; Map (DRep (EraCrypto era)) (CompactForm Coin)
-&gt; Map
     (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
-&gt; PulsingSnapshot era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-var">PulsingSnapshot</span></a></span><span>
</span><span id="line-144"></span><span>        </span><span class="annot"><span class="annottext">forall (w1 :: Wrapped) a t (w :: Density).
Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-operator hs-var">&lt;!</span></a></span><span> </span><span class="annot"><span class="annottext">forall t (w :: Wrapped). DecCBOR t =&gt; Decode w t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">From</span></a></span><span>
</span><span id="line-145"></span><span>        </span><span class="annot"><span class="annottext">forall (w1 :: Wrapped) a t (w :: Density).
Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-operator hs-var">&lt;!</span></a></span><span> </span><span class="annot"><span class="annottext">forall t (w :: Wrapped). DecCBOR t =&gt; Decode w t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">From</span></a></span><span>
</span><span id="line-146"></span><span>        </span><span class="annot"><span class="annottext">forall (w1 :: Wrapped) a t (w :: Density).
Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-operator hs-var">&lt;!</span></a></span><span> </span><span class="annot"><span class="annottext">forall t (w :: Wrapped). DecCBOR t =&gt; Decode w t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">From</span></a></span><span>
</span><span id="line-147"></span><span>
</span><span id="line-148"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679700698"><span id="local-6989586621679700700"><span id="local-6989586621679701428"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701428"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-type">DecCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701428"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-149"></span><span>  </span><span id="local-6989586621679700685"><span class="annot"><span class="annottext">decCBOR :: forall s. Decoder s (PulsingSnapshot era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">decCBOR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-150"></span><span>    </span><span class="annot"><span class="annottext">forall (w :: Wrapped) t s. Decode w t -&gt; Decoder s t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">decode</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-151"></span><span>      </span><span class="annot"><span class="annottext">forall t. t -&gt; Decode ('Closed 'Dense) t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">RecD</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
StrictSeq (GovActionState era)
-&gt; Map (DRep (EraCrypto era)) (CompactForm Coin)
-&gt; Map
     (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
-&gt; PulsingSnapshot era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-var">PulsingSnapshot</span></a></span><span>
</span><span id="line-152"></span><span>        </span><span class="annot"><span class="annottext">forall (w1 :: Wrapped) a t (w :: Density).
Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-operator hs-var">&lt;!</span></a></span><span> </span><span class="annot"><span class="annottext">forall t (w :: Wrapped). DecCBOR t =&gt; Decode w t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">From</span></a></span><span>
</span><span id="line-153"></span><span>        </span><span class="annot"><span class="annottext">forall (w1 :: Wrapped) a t (w :: Density).
Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-operator hs-var">&lt;!</span></a></span><span> </span><span class="annot"><span class="annottext">forall t (w :: Wrapped). DecCBOR t =&gt; Decode w t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">From</span></a></span><span>
</span><span id="line-154"></span><span>        </span><span class="annot"><span class="annottext">forall (w1 :: Wrapped) a t (w :: Density).
Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-operator hs-var">&lt;!</span></a></span><span> </span><span class="annot"><span class="annottext">forall t (w :: Wrapped). DecCBOR t =&gt; Decode w t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">From</span></a></span><span>
</span><span id="line-155"></span><span>
</span><span id="line-156"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679700676"><span id="local-6989586621679700678"><span id="local-6989586621679701422"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701422"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-binary-1.7.1.0-3a6e033492ee9b1687f91e32b583075121c1b9f8768c68f01e24c599f4a28b7a/share/doc/html/src"><span class="hs-identifier hs-type">ToCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701422"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-157"></span><span>  </span><span id="local-6989586621679700672"><span class="annot"><span class="annottext">toCBOR :: PulsingSnapshot era -&gt; Encoding
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-binary-1.7.1.0-3a6e033492ee9b1687f91e32b583075121c1b9f8768c68f01e24c599f4a28b7a/share/doc/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">toCBOR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t. (Era era, EncCBOR t) =&gt; t -&gt; Encoding
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">toEraCBOR</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679701422"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679700664"><span id="local-6989586621679701416"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701416"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-binary-1.7.1.0-3a6e033492ee9b1687f91e32b583075121c1b9f8768c68f01e24c599f4a28b7a/share/doc/html/src"><span class="hs-identifier hs-type">FromCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701416"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-160"></span><span>  </span><span id="local-6989586621679700660"><span class="annot"><span class="annottext">fromCBOR :: forall s. Decoder s (PulsingSnapshot era)
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-binary-1.7.1.0-3a6e033492ee9b1687f91e32b583075121c1b9f8768c68f01e24c599f4a28b7a/share/doc/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">fromCBOR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era t s. (Era era, DecCBOR t) =&gt; Decoder s t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">fromEraCBOR</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679701416"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-161"></span><span>
</span><span id="line-162"></span><span class="hs-comment">-- ===============================================================================</span><span>
</span><span id="line-163"></span><span class="hs-comment">-- Algorithm for computing the DRep stake distrubution, with and without pulsing.</span><span>
</span><span id="line-164"></span><span class="hs-comment">-- ===============================================================================</span><span>
</span><span id="line-165"></span><span>
</span><span id="line-166"></span><span class="hs-comment">-- | Given three inputs</span><span>
</span><span id="line-167"></span><span class="hs-comment">--</span><span>
</span><span id="line-168"></span><span class="hs-comment">--   1) Map (Credential 'Staking c) (DRep c). The delegation map. Inside the DRepUView of</span><span>
</span><span id="line-169"></span><span class="hs-comment">--   the UMap 'um' from the DState.</span><span>
</span><span id="line-170"></span><span class="hs-comment">--</span><span>
</span><span id="line-171"></span><span class="hs-comment">--   2) regDreps :: Map (Credential 'DRepRole c) (DRepState c). The map of registered</span><span>
</span><span id="line-172"></span><span class="hs-comment">--   DReps to their state. The first part of the VState.</span><span>
</span><span id="line-173"></span><span class="hs-comment">--</span><span>
</span><span id="line-174"></span><span class="hs-comment">--   3) stakeDistr :: VMap VB VP (Credential 'Staking c) (CompactForm Coin). The</span><span>
</span><span id="line-175"></span><span class="hs-comment">--   aggregated stake distr extracted from the first component of the IncrementalStake</span><span>
</span><span id="line-176"></span><span class="hs-comment">--   i.e. (IStake credmap _) where credmap is converted to a VMap</span><span>
</span><span id="line-177"></span><span class="hs-comment">--</span><span>
</span><span id="line-178"></span><span class="hs-comment">--  Compute the Drep distribution of stake(Coin)</span><span>
</span><span id="line-179"></span><span class="hs-comment">--  cost is expected to be O(size of 'stakeDistr' * log (size of 'um') * log (size of 'regDreps'))</span><span>
</span><span id="line-180"></span><span class="hs-comment">--  This is going to be expensive, so we will want to pulse it. Without pulsing,</span><span>
</span><span id="line-181"></span><span class="hs-comment">--  we estimate 3-5 seconds</span><span>
</span><span id="line-182"></span><span id="local-6989586621679701412"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#computeDrepDistr"><span class="hs-identifier hs-type">computeDrepDistr</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-183"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">UMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701412"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-184"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">DRepRole</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701412"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">DRepState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701412"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-185"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Staking</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701412"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">CompactForm</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-186"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">DRep</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701412"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">CompactForm</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-187"></span><span id="computeDrepDistr"><span class="annot"><span class="annottext">computeDrepDistr :: forall c.
UMap c
-&gt; Map (Credential 'DRepRole c) (DRepState c)
-&gt; Map (Credential 'Staking c) (CompactForm Coin)
-&gt; Map (DRep c) (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#computeDrepDistr"><span class="hs-identifier hs-var hs-var">computeDrepDistr</span></a></span></span><span> </span><span id="local-6989586621679700657"><span class="annot"><span class="annottext">UMap c
</span><a href="#local-6989586621679700657"><span class="hs-identifier hs-var">um</span></a></span></span><span> </span><span id="local-6989586621679700656"><span class="annot"><span class="annottext">Map (Credential 'DRepRole c) (DRepState c)
</span><a href="#local-6989586621679700656"><span class="hs-identifier hs-var">regDreps</span></a></span></span><span> </span><span id="local-6989586621679700655"><span class="annot"><span class="annottext">Map (Credential 'Staking c) (CompactForm Coin)
</span><a href="#local-6989586621679700655"><span class="hs-identifier hs-var">stakeDistr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-188"></span><span>  </span><span class="annot"><span class="annottext">forall a k b. (a -&gt; k -&gt; b -&gt; a) -&gt; a -&gt; Map k b -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.foldlWithKey'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall c.
UMap c
-&gt; Map (Credential 'DRepRole c) (DRepState c)
-&gt; Map (DRep c) (CompactForm Coin)
-&gt; Credential 'Staking c
-&gt; CompactForm Coin
-&gt; Map (DRep c) (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#accumDRepDistr"><span class="hs-identifier hs-var">accumDRepDistr</span></a></span><span> </span><span class="annot"><span class="annottext">UMap c
</span><a href="#local-6989586621679700657"><span class="hs-identifier hs-var">um</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'DRepRole c) (DRepState c)
</span><a href="#local-6989586621679700656"><span class="hs-identifier hs-var">regDreps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall k a. Map k a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.empty</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking c) (CompactForm Coin)
</span><a href="#local-6989586621679700655"><span class="hs-identifier hs-var">stakeDistr</span></a></span><span>
</span><span id="line-189"></span><span>
</span><span id="line-190"></span><span class="hs-comment">-- | For each 'stakecred' and coin 'c', check if that credential is delegated to some DRep.</span><span>
</span><span id="line-191"></span><span class="hs-comment">--   If so then add that coin to the aggregated map 'ans', mapping DReps to compact Coin</span><span>
</span><span id="line-192"></span><span class="hs-comment">--   If the DRep is a DRepCredential (rather than AwaysAbstain or AlwaysNoConfidence) then check</span><span>
</span><span id="line-193"></span><span class="hs-comment">--   that the credential is a member of the registered DRep map ('regDreps') before adding it to 'ans'</span><span>
</span><span id="line-194"></span><span id="local-6989586621679701407"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#accumDRepDistr"><span class="hs-identifier hs-type">accumDRepDistr</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-195"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">UMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701407"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-196"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">DRepRole</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701407"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">DRepState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701407"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-197"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">DRep</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701407"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">CompactForm</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-198"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Staking</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701407"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-199"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">CompactForm</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Coin</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-200"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">DRep</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701407"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">CompactForm</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-201"></span><span id="accumDRepDistr"><span class="annot"><span class="annottext">accumDRepDistr :: forall c.
UMap c
-&gt; Map (Credential 'DRepRole c) (DRepState c)
-&gt; Map (DRep c) (CompactForm Coin)
-&gt; Credential 'Staking c
-&gt; CompactForm Coin
-&gt; Map (DRep c) (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#accumDRepDistr"><span class="hs-identifier hs-var hs-var">accumDRepDistr</span></a></span></span><span> </span><span id="local-6989586621679700639"><span class="annot"><span class="annottext">UMap c
</span><a href="#local-6989586621679700639"><span class="hs-identifier hs-var">um</span></a></span></span><span> </span><span id="local-6989586621679700638"><span class="annot"><span class="annottext">Map (Credential 'DRepRole c) (DRepState c)
</span><a href="#local-6989586621679700638"><span class="hs-identifier hs-var">regDreps</span></a></span></span><span> </span><span id="local-6989586621679700637"><span class="annot"><span class="annottext">Map (DRep c) (CompactForm Coin)
</span><a href="#local-6989586621679700637"><span class="hs-identifier hs-var">ans</span></a></span></span><span> </span><span id="local-6989586621679700636"><span class="annot"><span class="annottext">Credential 'Staking c
</span><a href="#local-6989586621679700636"><span class="hs-identifier hs-var">stakeCred</span></a></span></span><span> </span><span id="local-6989586621679700635"><span class="annot"><span class="annottext">stake :: CompactForm Coin
</span><a href="#local-6989586621679700635"><span class="hs-identifier hs-var">stake</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">CompactCoin</span></a></span><span> </span><span id="local-6989586621679700633"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679700633"><span class="hs-identifier hs-var">compactStake</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Map (DRep c) (CompactForm Coin)
</span><a href="#local-6989586621679700637"><span class="hs-identifier hs-var">ans</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-202"></span><span>  </span><span id="local-6989586621679700632"><span class="annot"><span class="annottext">UMElem c
</span><a href="#local-6989586621679700632"><span class="hs-identifier hs-var">umElem</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking c
</span><a href="#local-6989586621679700636"><span class="hs-identifier hs-var">stakeCred</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall c. UMap c -&gt; Map (Credential 'Staking c) (UMElem c)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">umElems</span></a></span><span> </span><span class="annot"><span class="annottext">UMap c
</span><a href="#local-6989586621679700639"><span class="hs-identifier hs-var">um</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-203"></span><span>  </span><span id="local-6989586621679700629"><span class="annot"><span class="annottext">DRep c
</span><a href="#local-6989586621679700629"><span class="hs-identifier hs-var">drep</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall c. UMElem c -&gt; Maybe (DRep c)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">umElemDRep</span></a></span><span> </span><span class="annot"><span class="annottext">UMElem c
</span><a href="#local-6989586621679700632"><span class="hs-identifier hs-var">umElem</span></a></span><span>
</span><span id="line-204"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679700627"><span class="annot"><span class="annottext">stakeWithRewards :: CompactForm Coin
</span><a href="#local-6989586621679700627"><span class="hs-identifier hs-var hs-var">stakeWithRewards</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-205"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall c. UMElem c -&gt; Maybe RDPair
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">umElemRDPair</span></a></span><span> </span><span class="annot"><span class="annottext">UMElem c
</span><a href="#local-6989586621679700632"><span class="hs-identifier hs-var">umElem</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-206"></span><span>          </span><span class="annot"><span class="annottext">Maybe RDPair
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CompactForm Coin
</span><a href="#local-6989586621679700635"><span class="hs-identifier hs-var">stake</span></a></span><span>
</span><span id="line-207"></span><span>          </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679700625"><span class="annot"><span class="annottext">RDPair
</span><a href="#local-6989586621679700625"><span class="hs-identifier hs-var">rdPair</span></a></span></span><span>
</span><span id="line-208"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">CompactCoin</span></a></span><span> </span><span id="local-6989586621679700624"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679700624"><span class="hs-identifier hs-var">compactReward</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RDPair -&gt; CompactForm Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">rdReward</span></a></span><span> </span><span class="annot"><span class="annottext">RDPair
</span><a href="#local-6989586621679700625"><span class="hs-identifier hs-var">rdPair</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-209"></span><span>                </span><span class="annot"><span class="annottext">Word64 -&gt; CompactForm Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">CompactCoin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679700624"><span class="hs-identifier hs-var">compactReward</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">+</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679700633"><span class="hs-identifier hs-var">compactStake</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-210"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DRep c
</span><a href="#local-6989586621679700629"><span class="hs-identifier hs-var">drep</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-211"></span><span>    </span><span class="annot"><span class="annottext">DRep c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">DRepAlwaysAbstain</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; (a -&gt; a -&gt; a) -&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.insertWith</span></a></span><span> </span><span class="annot"><span class="annottext">CompactForm Coin -&gt; CompactForm Coin -&gt; CompactForm Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">UMap.addCompact</span></a></span><span> </span><span class="annot"><span class="annottext">DRep c
</span><a href="#local-6989586621679700629"><span class="hs-identifier hs-var">drep</span></a></span><span> </span><span class="annot"><span class="annottext">CompactForm Coin
</span><a href="#local-6989586621679700627"><span class="hs-identifier hs-var">stakeWithRewards</span></a></span><span> </span><span class="annot"><span class="annottext">Map (DRep c) (CompactForm Coin)
</span><a href="#local-6989586621679700637"><span class="hs-identifier hs-var">ans</span></a></span><span>
</span><span id="line-212"></span><span>    </span><span class="annot"><span class="annottext">DRep c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">DRepAlwaysNoConfidence</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; (a -&gt; a -&gt; a) -&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.insertWith</span></a></span><span> </span><span class="annot"><span class="annottext">CompactForm Coin -&gt; CompactForm Coin -&gt; CompactForm Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">UMap.addCompact</span></a></span><span> </span><span class="annot"><span class="annottext">DRep c
</span><a href="#local-6989586621679700629"><span class="hs-identifier hs-var">drep</span></a></span><span> </span><span class="annot"><span class="annottext">CompactForm Coin
</span><a href="#local-6989586621679700627"><span class="hs-identifier hs-var">stakeWithRewards</span></a></span><span> </span><span class="annot"><span class="annottext">Map (DRep c) (CompactForm Coin)
</span><a href="#local-6989586621679700637"><span class="hs-identifier hs-var">ans</span></a></span><span>
</span><span id="line-213"></span><span>    </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">DRepCredential</span></a></span><span> </span><span id="local-6989586621679700616"><span class="annot"><span class="annottext">Credential 'DRepRole c
</span><a href="#local-6989586621679700616"><span class="hs-identifier hs-var">drepCred</span></a></span></span><span>
</span><span id="line-214"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.member</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'DRepRole c
</span><a href="#local-6989586621679700616"><span class="hs-identifier hs-var">drepCred</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'DRepRole c) (DRepState c)
</span><a href="#local-6989586621679700638"><span class="hs-identifier hs-var">regDreps</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; (a -&gt; a -&gt; a) -&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.insertWith</span></a></span><span> </span><span class="annot"><span class="annottext">CompactForm Coin -&gt; CompactForm Coin -&gt; CompactForm Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">UMap.addCompact</span></a></span><span> </span><span class="annot"><span class="annottext">DRep c
</span><a href="#local-6989586621679700629"><span class="hs-identifier hs-var">drep</span></a></span><span> </span><span class="annot"><span class="annottext">CompactForm Coin
</span><a href="#local-6989586621679700627"><span class="hs-identifier hs-var">stakeWithRewards</span></a></span><span> </span><span class="annot"><span class="annottext">Map (DRep c) (CompactForm Coin)
</span><a href="#local-6989586621679700637"><span class="hs-identifier hs-var">ans</span></a></span><span>
</span><span id="line-215"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map (DRep c) (CompactForm Coin)
</span><a href="#local-6989586621679700637"><span class="hs-identifier hs-var">ans</span></a></span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span class="hs-comment">-- | The type of a Pulser which uses 'accumDRepDistr' as its underlying function.</span><span>
</span><span id="line-218"></span><span class="hs-comment">--   'accumDRepDistr' will be partially applied to the components of type (UMap c)</span><span>
</span><span id="line-219"></span><span class="hs-comment">--   and (Map (Credential 'DRepRole c) (DRepState c)) when pulsing. Note that we use two type</span><span>
</span><span id="line-220"></span><span class="hs-comment">--   equality (~) constraints to fix both the monad 'm' and the 'ans' type, to</span><span>
</span><span id="line-221"></span><span class="hs-comment">--   the context where we will use the type as a Pulser. The type DRepPulser must</span><span>
</span><span id="line-222"></span><span class="hs-comment">--   have 'm' and 'ans' as its last two parameters so we can make a Pulsable instance.</span><span>
</span><span id="line-223"></span><span class="hs-comment">--   We will always use this instantiation (DRepPulser era Identity (RatifyState era))</span><span>
</span><span id="line-224"></span><span class="hs-keyword">data</span><span> </span><span id="DRepPulser"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-var">DRepPulser</span></a></span></span><span> </span><span id="local-6989586621679700614"><span class="annot"><a href="#local-6989586621679700614"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679700613"><span class="annot"><a href="#local-6989586621679700613"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679700612"><span class="annot"><a href="#local-6989586621679700612"><span class="hs-identifier hs-type">ans</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-225"></span><span>  </span><span id="DRepPulser"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-var">DRepPulser</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-226"></span><span>    </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679701387"><span class="annot"><a href="#local-6989586621679701387"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span id="local-6989586621679701385"><span class="annot"><a href="#local-6989586621679701385"><span class="hs-identifier hs-type">ans</span></a></span></span><span> </span><span id="local-6989586621679701386"><span class="annot"><a href="#local-6989586621679701386"><span class="hs-identifier hs-type">m</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-227"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679701385"><span class="hs-identifier hs-type">ans</span></a></span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifyState"><span class="hs-identifier hs-type">RatifyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701387"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679701386"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Identity</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#RunConwayRatify"><span class="hs-identifier hs-type">RunConwayRatify</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701387"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-228"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="dpPulseSize"><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; Int
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpPulseSize"><span class="hs-identifier hs-var hs-var">dpPulseSize</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span>
</span><span id="line-229"></span><span>    </span><span class="hs-comment">-- ^ How many elements of 'dpBalance' to consume each pulse.</span><span>
</span><span id="line-230"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="dpUMap"><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; UMap (EraCrypto era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpUMap"><span class="hs-identifier hs-var hs-var">dpUMap</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">UMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701387"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-231"></span><span>    </span><span class="hs-comment">-- ^ Snapshot containing the mapping of stake credentials to Pools.</span><span>
</span><span id="line-232"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="dpBalance"><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *).
DRepPulser era m ans
-&gt; Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpBalance"><span class="hs-identifier hs-var hs-var">dpBalance</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Staking</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701387"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">CompactForm</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-233"></span><span>    </span><span class="hs-comment">-- ^ The object we are iterating over. Shrinks with each pulse</span><span>
</span><span id="line-234"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="dpStakeDistr"><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *).
DRepPulser era m ans
-&gt; Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpStakeDistr"><span class="hs-identifier hs-var hs-var">dpStakeDistr</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Staking</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701387"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">CompactForm</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-235"></span><span>    </span><span class="hs-comment">-- ^ Snapshot of the stake distr (comes from the IncrementalStake)</span><span>
</span><span id="line-236"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="dpStakePoolDistr"><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; PoolDistr (EraCrypto era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpStakePoolDistr"><span class="hs-identifier hs-var hs-var">dpStakePoolDistr</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">PoolDistr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701387"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-237"></span><span>    </span><span class="hs-comment">-- ^ Snapshot of the pool distr. Lazy on purpose: See `ssStakeMarkPoolDistr` and ADR-7</span><span>
</span><span id="line-238"></span><span>    </span><span class="hs-comment">-- for explanation.</span><span>
</span><span id="line-239"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="dpDRepDistr"><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *).
DRepPulser era m ans
-&gt; Map (DRep (EraCrypto era)) (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpDRepDistr"><span class="hs-identifier hs-var hs-var">dpDRepDistr</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">DRep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701387"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">CompactForm</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-240"></span><span>    </span><span class="hs-comment">-- ^ The partial result that grows with each pulse. The purpose of the pulsing.</span><span>
</span><span id="line-241"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="dpDRepState"><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *).
DRepPulser era m ans
-&gt; Map
     (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpDRepState"><span class="hs-identifier hs-var hs-var">dpDRepState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">DRepRole</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701387"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">DRepState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701387"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-242"></span><span>    </span><span class="hs-comment">-- ^ Snapshot of registered DRep credentials</span><span>
</span><span id="line-243"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="dpCurrentEpoch"><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; EpochNo
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpCurrentEpoch"><span class="hs-identifier hs-var hs-var">dpCurrentEpoch</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-slotting-0.2.0.0-e8312797f023619ba000361257739ea3242d7d9366b817847e018e86b37d28d6/share/doc/html/src"><span class="hs-identifier hs-type">EpochNo</span></a></span><span>
</span><span id="line-244"></span><span>    </span><span class="hs-comment">-- ^ Snapshot of the Epoch this pulser will complete in.</span><span>
</span><span id="line-245"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="dpCommitteeState"><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; CommitteeState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpCommitteeState"><span class="hs-identifier hs-var hs-var">dpCommitteeState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">CommitteeState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701387"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-246"></span><span>    </span><span class="hs-comment">-- ^ Snapshot of the CommitteeState</span><span>
</span><span id="line-247"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="dpEnactState"><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; EnactState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpEnactState"><span class="hs-identifier hs-var hs-var">dpEnactState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#EnactState"><span class="hs-identifier hs-type">EnactState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701387"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-248"></span><span>    </span><span class="hs-comment">-- ^ Snapshot of the EnactState, Used to build the Env of the RATIFY rule</span><span>
</span><span id="line-249"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="dpProposals"><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; StrictSeq (GovActionState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpProposals"><span class="hs-identifier hs-var hs-var">dpProposals</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-strict-containers-0.1.3.0-c8c434ba474a408c40a155b68fe1059a1c9196931f80e9c4ade09421da2372fd/share/doc/html/src"><span class="hs-identifier hs-type">StrictSeq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Procedures.html#GovActionState"><span class="hs-identifier hs-type">GovActionState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701387"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-250"></span><span>    </span><span class="hs-comment">-- ^ Snapshot of the proposals. This is the Signal for the RATIFY rule</span><span>
</span><span id="line-251"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="dpGlobals"><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; Globals
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpGlobals"><span class="hs-identifier hs-var hs-var">dpGlobals</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Globals</span></a></span><span>
</span><span id="line-252"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-253"></span><span>    </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-type">DRepPulser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701387"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701386"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701385"><span class="hs-identifier hs-type">ans</span></a></span><span>
</span><span id="line-254"></span><span>
</span><span id="line-255"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679700560"><span id="local-6989586621679701348"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701348"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-type">DRepPulser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701348"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Identity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifyState"><span class="hs-identifier hs-type">RatifyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701348"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-256"></span><span>  </span><span id="local-6989586621679700554"><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679700554"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679700553"><span class="annot"><span class="annottext">== :: DRepPulser era Identity (RatifyState era)
-&gt; DRepPulser era Identity (RatifyState era) -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">==</span></a></span></span><span> </span><span id="local-6989586621679700552"><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679700552"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-var">finishDRepPulser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
DRepPulser era Identity (RatifyState era) -&gt; DRepPulsingState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRPulsing"><span class="hs-identifier hs-var">DRPulsing</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679700554"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-var">finishDRepPulser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
DRepPulser era Identity (RatifyState era) -&gt; DRepPulsingState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRPulsing"><span class="hs-identifier hs-var">DRPulsing</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679700552"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-257"></span><span>
</span><span id="line-258"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679701331"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-data-1.2.1.0/doc/html/cardano-data/src"><span class="hs-identifier hs-type">Pulsable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-type">DRepPulser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701331"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-259"></span><span>  </span><span id="local-6989586621679700544"><span class="annot"><span class="annottext">done :: forall (m :: * -&gt; *) ans. DRepPulser era m ans -&gt; Bool
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-data-1.2.1.0/doc/html/cardano-data/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">done</span></a></span></span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-type">DRepPulser</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679700539"><span class="annot"><span class="annottext">Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
dpBalance :: Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
dpBalance :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans
-&gt; Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
</span><a href="#local-6989586621679700539"><span class="hs-identifier hs-var hs-var">dpBalance</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k a. Map k a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.null</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
</span><a href="#local-6989586621679700539"><span class="hs-identifier hs-var">dpBalance</span></a></span><span>
</span><span id="line-260"></span><span>
</span><span id="line-261"></span><span>  </span><span id="local-6989586621679700537"><span class="annot"><span class="annottext">current :: forall (m :: * -&gt; *) ans. DRepPulser era m ans -&gt; ans
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-data-1.2.1.0/doc/html/cardano-data/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">current</span></a></span></span><span> </span><span id="local-6989586621679700535"><span class="annot"><span class="annottext">x :: DRepPulser era m ans
</span><a href="#local-6989586621679700535"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-type">DRepPulser</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-var">finishDRepPulser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
DRepPulser era Identity (RatifyState era) -&gt; DRepPulsingState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRPulsing"><span class="hs-identifier hs-var">DRPulsing</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era m ans
</span><a href="#local-6989586621679700535"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-262"></span><span>
</span><span id="line-263"></span><span>  </span><span id="local-6989586621679700526"><span class="annot"><span class="annottext">pulseM :: forall (m :: * -&gt; *) ans.
Monad m =&gt;
DRepPulser era m ans -&gt; m (DRepPulser era m ans)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-data-1.2.1.0/doc/html/cardano-data/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">pulseM</span></a></span></span><span> </span><span id="local-6989586621679700524"><span class="annot"><span class="annottext">pulser :: DRepPulser era m ans
</span><a href="#local-6989586621679700524"><span class="hs-identifier hs-var">pulser</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-type">DRepPulser</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679700505"><span id="local-6989586621679700506"><span id="local-6989586621679700507"><span id="local-6989586621679700508"><span id="local-6989586621679700509"><span id="local-6989586621679700510"><span id="local-6989586621679700511"><span id="local-6989586621679700512"><span id="local-6989586621679700513"><span id="local-6989586621679700514"><span id="local-6989586621679700515"><span id="local-6989586621679700516"><span class="annot"><span class="annottext">Int
Map (DRep (EraCrypto era)) (CompactForm Coin)
Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
StrictSeq (GovActionState era)
CommitteeState era
UMap (EraCrypto era)
Globals
PoolDistr (EraCrypto era)
EpochNo
EnactState era
dpGlobals :: Globals
dpProposals :: StrictSeq (GovActionState era)
dpEnactState :: EnactState era
dpCommitteeState :: CommitteeState era
dpCurrentEpoch :: EpochNo
dpDRepState :: Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
dpDRepDistr :: Map (DRep (EraCrypto era)) (CompactForm Coin)
dpStakePoolDistr :: PoolDistr (EraCrypto era)
dpStakeDistr :: Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
dpBalance :: Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
dpUMap :: UMap (EraCrypto era)
dpPulseSize :: Int
dpGlobals :: forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; Globals
dpProposals :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; StrictSeq (GovActionState era)
dpEnactState :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; EnactState era
dpCommitteeState :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; CommitteeState era
dpCurrentEpoch :: forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; EpochNo
dpDRepState :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans
-&gt; Map
     (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
dpDRepDistr :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans
-&gt; Map (DRep (EraCrypto era)) (CompactForm Coin)
dpStakePoolDistr :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; PoolDistr (EraCrypto era)
dpStakeDistr :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans
-&gt; Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
dpBalance :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans
-&gt; Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
dpUMap :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; UMap (EraCrypto era)
dpPulseSize :: forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; Int
</span><a href="#local-6989586621679700505"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-264"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall k a. Map k a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.null</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
</span><a href="#local-6989586621679700514"><span class="hs-identifier hs-var">dpBalance</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era m ans
</span><a href="#local-6989586621679700524"><span class="hs-identifier hs-var">pulser</span></a></span><span>
</span><span id="line-265"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-266"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="hs-glyph">!</span><span id="local-6989586621679700504"><span class="annot"><span class="annottext">Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
</span><a href="#local-6989586621679700504"><span class="hs-identifier hs-var">steps</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679700503"><span class="annot"><span class="annottext">Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
</span><a href="#local-6989586621679700503"><span class="hs-identifier hs-var">balance'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k a. Int -&gt; Map k a -&gt; (Map k a, Map k a)
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.splitAt</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679700516"><span class="hs-identifier hs-var">dpPulseSize</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
</span><a href="#local-6989586621679700514"><span class="hs-identifier hs-var">dpBalance</span></a></span><span>
</span><span id="line-267"></span><span>            </span><span id="local-6989586621679700501"><span class="annot"><span class="annottext">drep' :: Map (DRep (EraCrypto era)) (CompactForm Coin)
</span><a href="#local-6989586621679700501"><span class="hs-identifier hs-var hs-var">drep'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a k b. (a -&gt; k -&gt; b -&gt; a) -&gt; a -&gt; Map k b -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.foldlWithKey'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall c.
UMap c
-&gt; Map (Credential 'DRepRole c) (DRepState c)
-&gt; Map (DRep c) (CompactForm Coin)
-&gt; Credential 'Staking c
-&gt; CompactForm Coin
-&gt; Map (DRep c) (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#accumDRepDistr"><span class="hs-identifier hs-var">accumDRepDistr</span></a></span><span> </span><span class="annot"><span class="annottext">UMap (EraCrypto era)
</span><a href="#local-6989586621679700515"><span class="hs-identifier hs-var">dpUMap</span></a></span><span> </span><span class="annot"><span class="annottext">Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
</span><a href="#local-6989586621679700510"><span class="hs-identifier hs-var">dpDRepState</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map (DRep (EraCrypto era)) (CompactForm Coin)
</span><a href="#local-6989586621679700511"><span class="hs-identifier hs-var">dpDRepDistr</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
</span><a href="#local-6989586621679700504"><span class="hs-identifier hs-var">steps</span></a></span><span>
</span><span id="line-268"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DRepPulser era m ans
</span><a href="#local-6989586621679700524"><span class="hs-identifier hs-var">pulser</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">dpBalance :: Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpBalance"><span class="hs-identifier hs-var">dpBalance</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
</span><a href="#local-6989586621679700503"><span class="hs-identifier hs-var">balance'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dpDRepDistr :: Map (DRep (EraCrypto era)) (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpDRepDistr"><span class="hs-identifier hs-var">dpDRepDistr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (DRep (EraCrypto era)) (CompactForm Coin)
</span><a href="#local-6989586621679700501"><span class="hs-identifier hs-var">drep'</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-269"></span><span>
</span><span id="line-270"></span><span>  </span><span id="local-6989586621679700498"><span class="annot"><span class="annottext">completeM :: forall (m :: * -&gt; *) ans. Monad m =&gt; DRepPulser era m ans -&gt; m ans
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-data-1.2.1.0/doc/html/cardano-data/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">completeM</span></a></span></span><span> </span><span id="local-6989586621679700496"><span class="annot"><span class="annottext">x :: DRepPulser era m ans
</span><a href="#local-6989586621679700496"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-type">DRepPulser</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-var">finishDRepPulser</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679701331"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
DRepPulser era Identity (RatifyState era) -&gt; DRepPulsingState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRPulsing"><span class="hs-identifier hs-var">DRPulsing</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era m ans
</span><a href="#local-6989586621679700496"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-271"></span><span>
</span><span id="line-272"></span><span id="local-6989586621679700483"><span id="local-6989586621679700485"><span id="local-6989586621679700487"><span id="local-6989586621679701313"><span id="local-6989586621679701314"><span id="local-6989586621679701315"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701315"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701314"><span class="hs-identifier hs-type">ans</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-type">DRepPulser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701315"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701313"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701314"><span class="hs-identifier hs-type">ans</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span><span>
</span><span id="line-273"></span><span>
</span><span id="line-274"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679700481"><span id="local-6989586621679701312"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701312"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.1.5-76e731986fff9ac9cebdee355b4fbb3ea82ff8325466beffbac98173fb630134/share/doc/html/src"><span class="hs-identifier hs-type">NoThunks</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-type">DRepPulser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701312"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Identity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifyState"><span class="hs-identifier hs-type">RatifyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701312"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-275"></span><span>  </span><span id="local-6989586621679700478"><span class="annot"><span class="annottext">showTypeOf :: Proxy (DRepPulser era Identity (RatifyState era)) -&gt; String
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.1.5-76e731986fff9ac9cebdee355b4fbb3ea82ff8325466beffbac98173fb630134/share/doc/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">showTypeOf</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy (DRepPulser era Identity (RatifyState era))
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;DRepPulser&quot;</span></span><span>
</span><span id="line-276"></span><span>  </span><span id="local-6989586621679700476"><span class="annot"><span class="annottext">wNoThunks :: Context
-&gt; DRepPulser era Identity (RatifyState era)
-&gt; IO (Maybe ThunkInfo)
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.1.5-76e731986fff9ac9cebdee355b4fbb3ea82ff8325466beffbac98173fb630134/share/doc/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">wNoThunks</span></a></span></span><span> </span><span id="local-6989586621679700474"><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679700474"><span class="hs-identifier hs-var">ctxt</span></a></span></span><span> </span><span id="local-6989586621679700473"><span class="annot"><span class="annottext">drp :: DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679700473"><span class="hs-identifier hs-var">drp</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-type">DRepPulser</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">UMap (EraCrypto era)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PoolDistr (EraCrypto era)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map (DRep (EraCrypto era)) (CompactForm Coin)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">CommitteeState era
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">EnactState era
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">StrictSeq (GovActionState era)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Globals
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-277"></span><span>    </span><span class="annot"><span class="annottext">[IO (Maybe ThunkInfo)] -&gt; IO (Maybe ThunkInfo)
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.1.5-76e731986fff9ac9cebdee355b4fbb3ea82ff8325466beffbac98173fb630134/share/doc/html/src"><span class="hs-identifier hs-var">allNoThunks</span></a></span><span>
</span><span id="line-278"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall a. NoThunks a =&gt; Context -&gt; a -&gt; IO (Maybe ThunkInfo)
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.1.5-76e731986fff9ac9cebdee355b4fbb3ea82ff8325466beffbac98173fb630134/share/doc/html/src"><span class="hs-identifier hs-var">noThunks</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679700474"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; Int
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpPulseSize"><span class="hs-identifier hs-var">dpPulseSize</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679700473"><span class="hs-identifier hs-var">drp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-279"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. NoThunks a =&gt; Context -&gt; a -&gt; IO (Maybe ThunkInfo)
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.1.5-76e731986fff9ac9cebdee355b4fbb3ea82ff8325466beffbac98173fb630134/share/doc/html/src"><span class="hs-identifier hs-var">noThunks</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679700474"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; UMap (EraCrypto era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpUMap"><span class="hs-identifier hs-var">dpUMap</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679700473"><span class="hs-identifier hs-var">drp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-280"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. NoThunks a =&gt; Context -&gt; a -&gt; IO (Maybe ThunkInfo)
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.1.5-76e731986fff9ac9cebdee355b4fbb3ea82ff8325466beffbac98173fb630134/share/doc/html/src"><span class="hs-identifier hs-var">noThunks</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679700474"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *).
DRepPulser era m ans
-&gt; Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpBalance"><span class="hs-identifier hs-var">dpBalance</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679700473"><span class="hs-identifier hs-var">drp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-281"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. NoThunks a =&gt; Context -&gt; a -&gt; IO (Maybe ThunkInfo)
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.1.5-76e731986fff9ac9cebdee355b4fbb3ea82ff8325466beffbac98173fb630134/share/doc/html/src"><span class="hs-identifier hs-var">noThunks</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679700474"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *).
DRepPulser era m ans
-&gt; Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpStakeDistr"><span class="hs-identifier hs-var">dpStakeDistr</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679700473"><span class="hs-identifier hs-var">drp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-282"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- dpStakePoolDistr is allowed to have thunks</span><span>
</span><span id="line-283"></span><span>        </span><span class="annot"><span class="annottext">forall a. NoThunks a =&gt; Context -&gt; a -&gt; IO (Maybe ThunkInfo)
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.1.5-76e731986fff9ac9cebdee355b4fbb3ea82ff8325466beffbac98173fb630134/share/doc/html/src"><span class="hs-identifier hs-var">noThunks</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679700474"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *).
DRepPulser era m ans
-&gt; Map (DRep (EraCrypto era)) (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpDRepDistr"><span class="hs-identifier hs-var">dpDRepDistr</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679700473"><span class="hs-identifier hs-var">drp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-284"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. NoThunks a =&gt; Context -&gt; a -&gt; IO (Maybe ThunkInfo)
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.1.5-76e731986fff9ac9cebdee355b4fbb3ea82ff8325466beffbac98173fb630134/share/doc/html/src"><span class="hs-identifier hs-var">noThunks</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679700474"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *).
DRepPulser era m ans
-&gt; Map
     (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpDRepState"><span class="hs-identifier hs-var">dpDRepState</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679700473"><span class="hs-identifier hs-var">drp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-285"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. NoThunks a =&gt; Context -&gt; a -&gt; IO (Maybe ThunkInfo)
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.1.5-76e731986fff9ac9cebdee355b4fbb3ea82ff8325466beffbac98173fb630134/share/doc/html/src"><span class="hs-identifier hs-var">noThunks</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679700474"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; EpochNo
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpCurrentEpoch"><span class="hs-identifier hs-var">dpCurrentEpoch</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679700473"><span class="hs-identifier hs-var">drp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-286"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. NoThunks a =&gt; Context -&gt; a -&gt; IO (Maybe ThunkInfo)
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.1.5-76e731986fff9ac9cebdee355b4fbb3ea82ff8325466beffbac98173fb630134/share/doc/html/src"><span class="hs-identifier hs-var">noThunks</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679700474"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; CommitteeState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpCommitteeState"><span class="hs-identifier hs-var">dpCommitteeState</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679700473"><span class="hs-identifier hs-var">drp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-287"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. NoThunks a =&gt; Context -&gt; a -&gt; IO (Maybe ThunkInfo)
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.1.5-76e731986fff9ac9cebdee355b4fbb3ea82ff8325466beffbac98173fb630134/share/doc/html/src"><span class="hs-identifier hs-var">noThunks</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679700474"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; EnactState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpEnactState"><span class="hs-identifier hs-var">dpEnactState</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679700473"><span class="hs-identifier hs-var">drp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-288"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. NoThunks a =&gt; Context -&gt; a -&gt; IO (Maybe ThunkInfo)
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.1.5-76e731986fff9ac9cebdee355b4fbb3ea82ff8325466beffbac98173fb630134/share/doc/html/src"><span class="hs-identifier hs-var">noThunks</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679700474"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; StrictSeq (GovActionState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpProposals"><span class="hs-identifier hs-var">dpProposals</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679700473"><span class="hs-identifier hs-var">drp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-289"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. NoThunks a =&gt; Context -&gt; a -&gt; IO (Maybe ThunkInfo)
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/nothunks-0.1.5-76e731986fff9ac9cebdee355b4fbb3ea82ff8325466beffbac98173fb630134/share/doc/html/src"><span class="hs-identifier hs-var">noThunks</span></a></span><span> </span><span class="annot"><span class="annottext">Context
</span><a href="#local-6989586621679700474"><span class="hs-identifier hs-var">ctxt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; Globals
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpGlobals"><span class="hs-identifier hs-var">dpGlobals</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679700473"><span class="hs-identifier hs-var">drp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-290"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-291"></span><span>
</span><span id="line-292"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679701299"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701299"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-type">DRepPulser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701299"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Identity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifyState"><span class="hs-identifier hs-type">RatifyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701299"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-293"></span><span>  </span><span id="local-6989586621679700441"><span class="annot"><span class="annottext">rnf :: DRepPulser era Identity (RatifyState era) -&gt; ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">rnf</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-type">DRepPulser</span></a></span><span> </span><span id="local-6989586621679700411"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679700411"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679700410"><span class="annot"><span class="annottext">UMap (EraCrypto era)
</span><a href="#local-6989586621679700410"><span class="hs-identifier hs-var">um</span></a></span></span><span> </span><span id="local-6989586621679700409"><span class="annot"><span class="annottext">Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
</span><a href="#local-6989586621679700409"><span class="hs-identifier hs-var">bal</span></a></span></span><span> </span><span id="local-6989586621679700408"><span class="annot"><span class="annottext">Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
</span><a href="#local-6989586621679700408"><span class="hs-identifier hs-var">stake</span></a></span></span><span> </span><span id="local-6989586621679700407"><span class="annot"><span class="annottext">PoolDistr (EraCrypto era)
</span><a href="#local-6989586621679700407"><span class="hs-identifier hs-var">pool</span></a></span></span><span> </span><span id="local-6989586621679700406"><span class="annot"><span class="annottext">Map (DRep (EraCrypto era)) (CompactForm Coin)
</span><a href="#local-6989586621679700406"><span class="hs-identifier hs-var">drep</span></a></span></span><span> </span><span id="local-6989586621679700405"><span class="annot"><span class="annottext">Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
</span><a href="#local-6989586621679700405"><span class="hs-identifier hs-var">dstate</span></a></span></span><span> </span><span id="local-6989586621679700404"><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621679700404"><span class="hs-identifier hs-var">ep</span></a></span></span><span> </span><span id="local-6989586621679700403"><span class="annot"><span class="annottext">CommitteeState era
</span><a href="#local-6989586621679700403"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span id="local-6989586621679700402"><span class="annot"><span class="annottext">EnactState era
</span><a href="#local-6989586621679700402"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span id="local-6989586621679700401"><span class="annot"><span class="annottext">StrictSeq (GovActionState era)
</span><a href="#local-6989586621679700401"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span id="local-6989586621679700400"><span class="annot"><span class="annottext">Globals
</span><a href="#local-6989586621679700400"><span class="hs-identifier hs-var">gs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-294"></span><span>    </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679700411"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. NFData a =&gt; a -&gt; b -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/deepseq-1.4.6.1/src"><span class="hs-operator hs-var">`deepseq`</span></a></span><span>
</span><span id="line-295"></span><span>      </span><span class="annot"><span class="annottext">UMap (EraCrypto era)
</span><a href="#local-6989586621679700410"><span class="hs-identifier hs-var">um</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. NFData a =&gt; a -&gt; b -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/deepseq-1.4.6.1/src"><span class="hs-operator hs-var">`deepseq`</span></a></span><span>
</span><span id="line-296"></span><span>        </span><span class="annot"><span class="annottext">Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
</span><a href="#local-6989586621679700409"><span class="hs-identifier hs-var">bal</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. NFData a =&gt; a -&gt; b -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/deepseq-1.4.6.1/src"><span class="hs-operator hs-var">`deepseq`</span></a></span><span>
</span><span id="line-297"></span><span>          </span><span class="annot"><span class="annottext">Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
</span><a href="#local-6989586621679700408"><span class="hs-identifier hs-var">stake</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. NFData a =&gt; a -&gt; b -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/deepseq-1.4.6.1/src"><span class="hs-operator hs-var">`deepseq`</span></a></span><span>
</span><span id="line-298"></span><span>            </span><span class="annot"><span class="annottext">PoolDistr (EraCrypto era)
</span><a href="#local-6989586621679700407"><span class="hs-identifier hs-var">pool</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. NFData a =&gt; a -&gt; b -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/deepseq-1.4.6.1/src"><span class="hs-operator hs-var">`deepseq`</span></a></span><span>
</span><span id="line-299"></span><span>              </span><span class="annot"><span class="annottext">Map (DRep (EraCrypto era)) (CompactForm Coin)
</span><a href="#local-6989586621679700406"><span class="hs-identifier hs-var">drep</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. NFData a =&gt; a -&gt; b -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/deepseq-1.4.6.1/src"><span class="hs-operator hs-var">`deepseq`</span></a></span><span>
</span><span id="line-300"></span><span>                </span><span class="annot"><span class="annottext">Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
</span><a href="#local-6989586621679700405"><span class="hs-identifier hs-var">dstate</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. NFData a =&gt; a -&gt; b -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/deepseq-1.4.6.1/src"><span class="hs-operator hs-var">`deepseq`</span></a></span><span>
</span><span id="line-301"></span><span>                  </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621679700404"><span class="hs-identifier hs-var">ep</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. NFData a =&gt; a -&gt; b -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/deepseq-1.4.6.1/src"><span class="hs-operator hs-var">`deepseq`</span></a></span><span>
</span><span id="line-302"></span><span>                    </span><span class="annot"><span class="annottext">CommitteeState era
</span><a href="#local-6989586621679700403"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. NFData a =&gt; a -&gt; b -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/deepseq-1.4.6.1/src"><span class="hs-operator hs-var">`deepseq`</span></a></span><span>
</span><span id="line-303"></span><span>                      </span><span class="annot"><span class="annottext">EnactState era
</span><a href="#local-6989586621679700402"><span class="hs-identifier hs-var">es</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. NFData a =&gt; a -&gt; b -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/deepseq-1.4.6.1/src"><span class="hs-operator hs-var">`deepseq`</span></a></span><span>
</span><span id="line-304"></span><span>                        </span><span class="annot"><span class="annottext">StrictSeq (GovActionState era)
</span><a href="#local-6989586621679700401"><span class="hs-keyword hs-var">as</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. NFData a =&gt; a -&gt; b -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/deepseq-1.4.6.1/src"><span class="hs-operator hs-var">`deepseq`</span></a></span><span>
</span><span id="line-305"></span><span>                          </span><span class="annot"><span class="annottext">forall a. NFData a =&gt; a -&gt; ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-var">rnf</span></a></span><span> </span><span class="annot"><span class="annottext">Globals
</span><a href="#local-6989586621679700400"><span class="hs-identifier hs-var">gs</span></a></span><span>
</span><span id="line-306"></span><span>
</span><span id="line-307"></span><span class="hs-keyword">class</span><span>
</span><span id="line-308"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Era.html#ConwayRATIFY"><span class="hs-identifier hs-type">ConwayRATIFY</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701284"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-309"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">Signal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Era.html#ConwayRATIFY"><span class="hs-identifier hs-type">ConwayRATIFY</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701284"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifySignal"><span class="hs-identifier hs-type">RatifySignal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701284"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-310"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">BaseM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Era.html#ConwayRATIFY"><span class="hs-identifier hs-type">ConwayRATIFY</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701284"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-type">Reader</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Globals</span></a></span><span>
</span><span id="line-311"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">Environment</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Era.html#ConwayRATIFY"><span class="hs-identifier hs-type">ConwayRATIFY</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701284"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifyEnv"><span class="hs-identifier hs-type">RatifyEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701284"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-312"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Era.html#ConwayRATIFY"><span class="hs-identifier hs-type">ConwayRATIFY</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701284"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifyState"><span class="hs-identifier hs-type">RatifyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701284"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-313"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-314"></span><span>  </span><span id="RunConwayRatify"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#RunConwayRatify"><span class="hs-identifier hs-var">RunConwayRatify</span></a></span></span><span> </span><span id="local-6989586621679701284"><span class="annot"><a href="#local-6989586621679701284"><span class="hs-identifier hs-type">era</span></a></span></span><span>
</span><span id="line-315"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-316"></span><span>  </span><span id="runConwayRatify"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#runConwayRatify"><span class="hs-identifier hs-type">runConwayRatify</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Globals</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifyEnv"><span class="hs-identifier hs-type">RatifyEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701284"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifyState"><span class="hs-identifier hs-type">RatifyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701284"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifySignal"><span class="hs-identifier hs-type">RatifySignal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701284"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifyState"><span class="hs-identifier hs-type">RatifyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701284"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-317"></span><span>  </span><span id="local-6989586621679700392"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#runConwayRatify"><span class="hs-identifier hs-var hs-var">runConwayRatify</span></a></span><span> </span><span id="local-6989586621679700367"><span class="annot"><span class="annottext">Globals
</span><a href="#local-6989586621679700367"><span class="hs-identifier hs-var">globals</span></a></span></span><span> </span><span id="local-6989586621679700366"><span class="annot"><span class="annottext">RatifyEnv era
</span><a href="#local-6989586621679700366"><span class="hs-identifier hs-var">ratifyEnv</span></a></span></span><span> </span><span id="local-6989586621679700365"><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621679700365"><span class="hs-identifier hs-var">ratifyState</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifySignal"><span class="hs-identifier hs-type">RatifySignal</span></a></span><span> </span><span id="local-6989586621679700363"><span class="annot"><span class="annottext">StrictSeq (GovActionState era)
</span><a href="#local-6989586621679700363"><span class="hs-identifier hs-var">ratifySig</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-318"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679700362"><span class="annot"><span class="annottext">ratifyResult :: Either
  (NonEmpty (PredicateFailure (ConwayRATIFY era))) (RatifyState era)
</span><a href="#local-6989586621679700362"><span class="hs-identifier hs-var hs-var">ratifyResult</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-319"></span><span>          </span><span class="annot"><span class="annottext">forall r a. Reader r a -&gt; r -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-var">runReader</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *) (rtype :: RuleType).
(STS s, RuleTypeRep rtype, m ~ BaseM s) =&gt;
RuleContext rtype s
-&gt; m (Either (NonEmpty (PredicateFailure s)) (State s))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">applySTS</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Era.html#ConwayRATIFY"><span class="hs-identifier hs-type">ConwayRATIFY</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701284"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RatifyEnv era
</span><a href="#local-6989586621679700366"><span class="hs-identifier hs-var">ratifyEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621679700365"><span class="hs-identifier hs-var">ratifyState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall era. StrictSeq (GovActionState era) -&gt; RatifySignal era
</span><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifySignal"><span class="hs-identifier hs-var">RatifySignal</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
StrictSeq (GovActionState era) -&gt; StrictSeq (GovActionState era)
</span><a href="Cardano.Ledger.Conway.Governance.Internal.html#reorderActions"><span class="hs-identifier hs-var">reorderActions</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSeq (GovActionState era)
</span><a href="#local-6989586621679700363"><span class="hs-identifier hs-var">ratifySig</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Globals
</span><a href="#local-6989586621679700367"><span class="hs-identifier hs-var">globals</span></a></span><span>
</span><span id="line-320"></span><span>     </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either
  (NonEmpty (PredicateFailure (ConwayRATIFY era))) (RatifyState era)
</span><a href="#local-6989586621679700362"><span class="hs-identifier hs-var">ratifyResult</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-321"></span><span>          </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621679700358"><span class="annot"><span class="annottext">NonEmpty (PredicateFailure (ConwayRATIFY era))
</span><a href="#local-6989586621679700358"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-322"></span><span>            </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Context -&gt; String
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">unlines</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Impossible: RATIFY rule never fails, but it did:&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">toList</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (PredicateFailure (ConwayRATIFY era))
</span><a href="#local-6989586621679700358"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-323"></span><span>          </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621679700354"><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621679700354"><span class="hs-identifier hs-var">ratifyState'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621679700354"><span class="hs-identifier hs-var">ratifyState'</span></a></span></span><span>
</span><span id="line-324"></span><span>
</span><span id="line-325"></span><span id="local-6989586621679701344"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-type">finishDRepPulser</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier hs-type">DRepPulsingState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701344"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701344"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifyState"><span class="hs-identifier hs-type">RatifyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701344"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-326"></span><span id="finishDRepPulser"><span class="annot"><span class="annottext">finishDRepPulser :: forall era.
DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-var hs-var">finishDRepPulser</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-type">DRComplete</span></a></span><span> </span><span id="local-6989586621679700352"><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679700352"><span class="hs-identifier hs-var">snap</span></a></span></span><span> </span><span id="local-6989586621679700351"><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621679700351"><span class="hs-identifier hs-var">ratifyState</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679700352"><span class="hs-identifier hs-var">snap</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621679700351"><span class="hs-identifier hs-var">ratifyState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-327"></span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-var">finishDRepPulser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRPulsing"><span class="hs-identifier hs-type">DRPulsing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-type">DRepPulser</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679700329"><span id="local-6989586621679700330"><span id="local-6989586621679700331"><span id="local-6989586621679700332"><span id="local-6989586621679700333"><span id="local-6989586621679700334"><span id="local-6989586621679700335"><span id="local-6989586621679700336"><span id="local-6989586621679700337"><span id="local-6989586621679700338"><span id="local-6989586621679700339"><span id="local-6989586621679700340"><span class="annot"><span class="annottext">Int
Map (DRep (EraCrypto era)) (CompactForm Coin)
Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
StrictSeq (GovActionState era)
CommitteeState era
UMap (EraCrypto era)
Globals
PoolDistr (EraCrypto era)
EpochNo
EnactState era
dpGlobals :: Globals
dpProposals :: StrictSeq (GovActionState era)
dpEnactState :: EnactState era
dpCommitteeState :: CommitteeState era
dpCurrentEpoch :: EpochNo
dpDRepState :: Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
dpDRepDistr :: Map (DRep (EraCrypto era)) (CompactForm Coin)
dpStakePoolDistr :: PoolDistr (EraCrypto era)
dpStakeDistr :: Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
dpBalance :: Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
dpUMap :: UMap (EraCrypto era)
dpPulseSize :: Int
dpGlobals :: forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; Globals
dpProposals :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; StrictSeq (GovActionState era)
dpEnactState :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; EnactState era
dpCommitteeState :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; CommitteeState era
dpCurrentEpoch :: forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; EpochNo
dpDRepState :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans
-&gt; Map
     (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
dpDRepDistr :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans
-&gt; Map (DRep (EraCrypto era)) (CompactForm Coin)
dpStakePoolDistr :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; PoolDistr (EraCrypto era)
dpStakeDistr :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans
-&gt; Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
dpBalance :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans
-&gt; Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
dpUMap :: forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; UMap (EraCrypto era)
dpPulseSize :: forall era ans (m :: * -&gt; *). DRepPulser era m ans -&gt; Int
</span><a href="#local-6989586621679700329"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-328"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
StrictSeq (GovActionState era)
-&gt; Map (DRep (EraCrypto era)) (CompactForm Coin)
-&gt; Map
     (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
-&gt; PulsingSnapshot era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-var">PulsingSnapshot</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSeq (GovActionState era)
</span><a href="#local-6989586621679700330"><span class="hs-identifier hs-var">dpProposals</span></a></span><span> </span><span class="annot"><span class="annottext">Map (DRep (EraCrypto era)) (CompactForm Coin)
</span><a href="#local-6989586621679700328"><span class="hs-identifier hs-var">finalDRepDistr</span></a></span><span> </span><span class="annot"><span class="annottext">Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
</span><a href="#local-6989586621679700334"><span class="hs-identifier hs-var">dpDRepState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621679700327"><span class="hs-identifier hs-var">ratifyState'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-329"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-330"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621679700328"><span class="annot"><span class="annottext">finalDRepDistr :: Map (DRep (EraCrypto era)) (CompactForm Coin)
</span><a href="#local-6989586621679700328"><span class="hs-identifier hs-var hs-var">finalDRepDistr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a k b. (a -&gt; k -&gt; b -&gt; a) -&gt; a -&gt; Map k b -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.foldlWithKey'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall c.
UMap c
-&gt; Map (Credential 'DRepRole c) (DRepState c)
-&gt; Map (DRep c) (CompactForm Coin)
-&gt; Credential 'Staking c
-&gt; CompactForm Coin
-&gt; Map (DRep c) (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#accumDRepDistr"><span class="hs-identifier hs-var">accumDRepDistr</span></a></span><span> </span><span class="annot"><span class="annottext">UMap (EraCrypto era)
</span><a href="#local-6989586621679700339"><span class="hs-identifier hs-var">dpUMap</span></a></span><span> </span><span class="annot"><span class="annottext">Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
</span><a href="#local-6989586621679700334"><span class="hs-identifier hs-var">dpDRepState</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map (DRep (EraCrypto era)) (CompactForm Coin)
</span><a href="#local-6989586621679700335"><span class="hs-identifier hs-var">dpDRepDistr</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
</span><a href="#local-6989586621679700338"><span class="hs-identifier hs-var">dpBalance</span></a></span><span>
</span><span id="line-331"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621679700326"><span class="annot"><span class="annottext">ratifyEnv :: RatifyEnv era
</span><a href="#local-6989586621679700326"><span class="hs-identifier hs-var hs-var">ratifyEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-332"></span><span>      </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifyEnv"><span class="hs-identifier hs-type">RatifyEnv</span></a></span><span>
</span><span id="line-333"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">reStakeDistr :: Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.Internal.html#reStakeDistr"><span class="hs-identifier hs-var">reStakeDistr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
</span><a href="#local-6989586621679700337"><span class="hs-identifier hs-var">dpStakeDistr</span></a></span><span>
</span><span id="line-334"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">reStakePoolDistr :: PoolDistr (EraCrypto era)
</span><a href="Cardano.Ledger.Conway.Governance.Internal.html#reStakePoolDistr"><span class="hs-identifier hs-var">reStakePoolDistr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PoolDistr (EraCrypto era)
</span><a href="#local-6989586621679700336"><span class="hs-identifier hs-var">dpStakePoolDistr</span></a></span><span>
</span><span id="line-335"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">reDRepDistr :: Map (DRep (EraCrypto era)) (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.Internal.html#reDRepDistr"><span class="hs-identifier hs-var">reDRepDistr</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (DRep (EraCrypto era)) (CompactForm Coin)
</span><a href="#local-6989586621679700328"><span class="hs-identifier hs-var">finalDRepDistr</span></a></span><span>
</span><span id="line-336"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">reDRepState :: Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
</span><a href="Cardano.Ledger.Conway.Governance.Internal.html#reDRepState"><span class="hs-identifier hs-var">reDRepState</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map
  (Credential 'DRepRole (EraCrypto era)) (DRepState (EraCrypto era))
</span><a href="#local-6989586621679700334"><span class="hs-identifier hs-var">dpDRepState</span></a></span><span>
</span><span id="line-337"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">reCurrentEpoch :: EpochNo
</span><a href="Cardano.Ledger.Conway.Governance.Internal.html#reCurrentEpoch"><span class="hs-identifier hs-var">reCurrentEpoch</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621679700333"><span class="hs-identifier hs-var">dpCurrentEpoch</span></a></span><span>
</span><span id="line-338"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">reCommitteeState :: CommitteeState era
</span><a href="Cardano.Ledger.Conway.Governance.Internal.html#reCommitteeState"><span class="hs-identifier hs-var">reCommitteeState</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CommitteeState era
</span><a href="#local-6989586621679700332"><span class="hs-identifier hs-var">dpCommitteeState</span></a></span><span>
</span><span id="line-339"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-340"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621679700318"><span class="annot"><span class="annottext">ratifySig :: RatifySignal era
</span><a href="#local-6989586621679700318"><span class="hs-identifier hs-var hs-var">ratifySig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era. StrictSeq (GovActionState era) -&gt; RatifySignal era
</span><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifySignal"><span class="hs-identifier hs-var">RatifySignal</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSeq (GovActionState era)
</span><a href="#local-6989586621679700330"><span class="hs-identifier hs-var">dpProposals</span></a></span><span>
</span><span id="line-341"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621679700317"><span class="annot"><span class="annottext">ratifyState :: RatifyState era
</span><a href="#local-6989586621679700317"><span class="hs-identifier hs-var hs-var">ratifyState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-342"></span><span>      </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifyState"><span class="hs-identifier hs-type">RatifyState</span></a></span><span>
</span><span id="line-343"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rsEnactState :: EnactState era
</span><a href="Cardano.Ledger.Conway.Governance.Internal.html#rsEnactState"><span class="hs-identifier hs-var">rsEnactState</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EnactState era
</span><a href="#local-6989586621679700331"><span class="hs-identifier hs-var">dpEnactState</span></a></span><span>
</span><span id="line-344"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rsEnacted :: Seq (GovActionState era)
</span><a href="Cardano.Ledger.Conway.Governance.Internal.html#rsEnacted"><span class="hs-identifier hs-var">rsEnacted</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-345"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rsExpired :: Set (GovActionId (EraCrypto era))
</span><a href="Cardano.Ledger.Conway.Governance.Internal.html#rsExpired"><span class="hs-identifier hs-var">rsExpired</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-346"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rsDelayed :: Bool
</span><a href="Cardano.Ledger.Conway.Governance.Internal.html#rsDelayed"><span class="hs-identifier hs-var">rsDelayed</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">False</span></a></span><span>
</span><span id="line-347"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-348"></span><span>    </span><span class="hs-glyph">!</span><span id="local-6989586621679700327"><span class="annot"><span class="annottext">ratifyState' :: RatifyState era
</span><a href="#local-6989586621679700327"><span class="hs-identifier hs-var hs-var">ratifyState'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
RunConwayRatify era =&gt;
Globals
-&gt; RatifyEnv era
-&gt; RatifyState era
-&gt; RatifySignal era
-&gt; RatifyState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#runConwayRatify"><span class="hs-identifier hs-var">runConwayRatify</span></a></span><span> </span><span class="annot"><span class="annottext">Globals
</span><a href="#local-6989586621679700329"><span class="hs-identifier hs-var">dpGlobals</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyEnv era
</span><a href="#local-6989586621679700326"><span class="hs-identifier hs-var">ratifyEnv</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621679700317"><span class="hs-identifier hs-var">ratifyState</span></a></span><span> </span><span class="annot"><span class="annottext">RatifySignal era
</span><a href="#local-6989586621679700318"><span class="hs-identifier hs-var">ratifySig</span></a></span><span>
</span><span id="line-349"></span><span>
</span><span id="line-350"></span><span class="hs-comment">-- ===========================================================</span><span>
</span><span id="line-351"></span><span class="hs-comment">-- The State which is stored in ConwayGovState</span><span>
</span><span id="line-352"></span><span class="hs-comment">-- ===========================================================</span><span>
</span><span id="line-353"></span><span>
</span><span id="line-354"></span><span id="local-6989586621679700310"><span id="local-6989586621679700311"></span></span><span class="hs-keyword">data</span><span> </span><span id="DRepPulsingState"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier hs-var">DRepPulsingState</span></a></span></span><span> </span><span id="local-6989586621679701343"><span class="annot"><a href="#local-6989586621679701343"><span class="hs-identifier hs-type">era</span></a></span></span><span>
</span><span id="line-355"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="DRPulsing"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRPulsing"><span class="hs-identifier hs-var">DRPulsing</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-type">DRepPulser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701343"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Identity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifyState"><span class="hs-identifier hs-type">RatifyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701343"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-356"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="DRComplete"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-var">DRComplete</span></a></span></span><span>
</span><span id="line-357"></span><span>      </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#PulsingSnapshot"><span class="hs-identifier hs-type">PulsingSnapshot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701343"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-358"></span><span>      </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifyState"><span class="hs-identifier hs-type">RatifyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701343"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-359"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall era x. Rep (DRepPulsingState era) x -&gt; DRepPulsingState era
forall era x. DRepPulsingState era -&gt; Rep (DRepPulsingState era) x
$cto :: forall era x. Rep (DRepPulsingState era) x -&gt; DRepPulsingState era
$cfrom :: forall era x. DRepPulsingState era -&gt; Rep (DRepPulsingState era) x
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679700302"><span id="local-6989586621679700304"><span id="local-6989586621679700306"><span class="annot"><span class="annottext">forall era.
EraPParams era =&gt;
Context -&gt; DRepPulsingState era -&gt; IO (Maybe ThunkInfo)
forall era.
EraPParams era =&gt;
Proxy (DRepPulsingState era) -&gt; String
forall a.
(Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Context -&gt; a -&gt; IO (Maybe ThunkInfo))
-&gt; (Proxy a -&gt; String)
-&gt; NoThunks a
showTypeOf :: Proxy (DRepPulsingState era) -&gt; String
$cshowTypeOf :: forall era.
EraPParams era =&gt;
Proxy (DRepPulsingState era) -&gt; String
wNoThunks :: Context -&gt; DRepPulsingState era -&gt; IO (Maybe ThunkInfo)
$cwNoThunks :: forall era.
EraPParams era =&gt;
Context -&gt; DRepPulsingState era -&gt; IO (Maybe ThunkInfo)
noThunks :: Context -&gt; DRepPulsingState era -&gt; IO (Maybe ThunkInfo)
$cnoThunks :: forall era.
EraPParams era =&gt;
Context -&gt; DRepPulsingState era -&gt; IO (Maybe ThunkInfo)
</span><a href="#local-6989586621679700302"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">NoThunks</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679700300"><span class="annot"><span class="annottext">forall era. EraPParams era =&gt; DRepPulsingState era -&gt; ()
forall a. (a -&gt; ()) -&gt; NFData a
rnf :: DRepPulsingState era -&gt; ()
$crnf :: forall era. EraPParams era =&gt; DRepPulsingState era -&gt; ()
</span><a href="#local-6989586621679700300"><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-360"></span><span>
</span><span id="line-361"></span><span id="local-6989586621679701242"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dormantEpoch"><span class="hs-identifier hs-type">dormantEpoch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier hs-type">DRepPulsingState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701242"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Bool</span></a></span></span><span>
</span><span id="line-362"></span><span id="dormantEpoch"><span class="annot"><span class="annottext">dormantEpoch :: forall era. DRepPulsingState era -&gt; Bool
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dormantEpoch"><span class="hs-identifier hs-var hs-var">dormantEpoch</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRPulsing"><span class="hs-identifier hs-type">DRPulsing</span></a></span><span> </span><span id="local-6989586621679700299"><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679700299"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. StrictSeq a -&gt; Bool
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-strict-containers-0.1.3.0-c8c434ba474a408c40a155b68fe1059a1c9196931f80e9c4ade09421da2372fd/share/doc/html/src"><span class="hs-identifier hs-var">SS.null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era ans (m :: * -&gt; *).
DRepPulser era m ans -&gt; StrictSeq (GovActionState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dpProposals"><span class="hs-identifier hs-var">dpProposals</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679700299"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-363"></span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#dormantEpoch"><span class="hs-identifier hs-var">dormantEpoch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-type">DRComplete</span></a></span><span> </span><span id="local-6989586621679700297"><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679700297"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. StrictSeq a -&gt; Bool
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-strict-containers-0.1.3.0-c8c434ba474a408c40a155b68fe1059a1c9196931f80e9c4ade09421da2372fd/share/doc/html/src"><span class="hs-identifier hs-var">SS.null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. PulsingSnapshot era -&gt; StrictSeq (GovActionState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psProposals"><span class="hs-identifier hs-var">psProposals</span></a></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679700297"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-364"></span><span>
</span><span id="line-365"></span><span class="hs-comment">-- | This is potentially an expensive getter. Make sure not to use it in the first 80% of</span><span>
</span><span id="line-366"></span><span class="hs-comment">-- the epoch.</span><span>
</span><span id="line-367"></span><span id="local-6989586621679701239"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepDistrG"><span class="hs-identifier hs-type">psDRepDistrG</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-368"></span><span>  </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier hs-type">SimpleGetter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier hs-type">DRepPulsingState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701239"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">DRep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701239"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">CompactForm</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Coin</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-369"></span><span id="psDRepDistrG"><span class="annot"><span class="annottext">psDRepDistrG :: forall era.
SimpleGetter
  (DRepPulsingState era)
  (Map (DRep (EraCrypto era)) (CompactForm Coin))
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepDistrG"><span class="hs-identifier hs-var hs-var">psDRepDistrG</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">forall {era}.
DRepPulsingState era
-&gt; Map (DRep (EraCrypto era)) (CompactForm Coin)
</span><a href="#local-6989586621679700295"><span class="hs-identifier hs-var">get</span></a></span><span>
</span><span id="line-370"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-371"></span><span>    </span><span id="local-6989586621679700295"><span class="annot"><span class="annottext">get :: DRepPulsingState era
-&gt; Map (DRep (EraCrypto era)) (CompactForm Coin)
</span><a href="#local-6989586621679700295"><span class="hs-identifier hs-var hs-var">get</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-type">DRComplete</span></a></span><span> </span><span id="local-6989586621679700294"><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679700294"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
PulsingSnapshot era
-&gt; Map (DRep (EraCrypto era)) (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepDistr"><span class="hs-identifier hs-var">psDRepDistr</span></a></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679700294"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-372"></span><span>    </span><span class="annot"><a href="#local-6989586621679700295"><span class="hs-identifier hs-var">get</span></a></span><span> </span><span id="local-6989586621679700293"><span class="annot"><span class="annottext">DRepPulsingState era
</span><a href="#local-6989586621679700293"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
PulsingSnapshot era
-&gt; Map (DRep (EraCrypto era)) (CompactForm Coin)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#psDRepDistr"><span class="hs-identifier hs-var">psDRepDistr</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-var">finishDRepPulser</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era
</span><a href="#local-6989586621679700293"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-373"></span><span>
</span><span id="line-374"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679700290"><span id="local-6989586621679701232"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701232"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier hs-type">DRepPulsingState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701232"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-375"></span><span>  </span><span id="local-6989586621679700286"><span class="annot"><span class="annottext">DRepPulsingState era
</span><a href="#local-6989586621679700286"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679700285"><span class="annot"><span class="annottext">== :: DRepPulsingState era -&gt; DRepPulsingState era -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var hs-var hs-var hs-var">==</span></a></span></span><span> </span><span id="local-6989586621679700284"><span class="annot"><span class="annottext">DRepPulsingState era
</span><a href="#local-6989586621679700284"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-var">finishDRepPulser</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era
</span><a href="#local-6989586621679700286"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-var">finishDRepPulser</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era
</span><a href="#local-6989586621679700284"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-376"></span><span>
</span><span id="line-377"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679700279"><span id="local-6989586621679700282"><span id="local-6989586621679701231"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701231"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier hs-type">DRepPulsingState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701231"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-378"></span><span>  </span><span id="local-6989586621679700270"><span class="annot"><span class="annottext">show :: DRepPulsingState era -&gt; String
</span><a href="#local-6989586621679700270"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-type">DRComplete</span></a></span><span> </span><span id="local-6989586621679700269"><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679700269"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679700268"><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621679700268"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(DRComplete &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679700269"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621679700268"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;)&quot;</span></span><span>
</span><span id="line-379"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span id="local-6989586621679700267"><span class="annot"><span class="annottext">DRepPulsingState era
</span><a href="#local-6989586621679700267"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">uncurry</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-var">DRComplete</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-var">finishDRepPulser</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era
</span><a href="#local-6989586621679700267"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-380"></span><span>
</span><span id="line-381"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679700258"><span id="local-6989586621679700260"><span id="local-6989586621679701225"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701225"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-type">EncCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier hs-type">DRepPulsingState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701225"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-382"></span><span>  </span><span id="local-6989586621679700254"><span class="annot"><span class="annottext">encCBOR :: DRepPulsingState era -&gt; Encoding
</span><a href="#local-6989586621679700254"><span class="hs-identifier hs-var hs-var hs-var hs-var">encCBOR</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-type">DRComplete</span></a></span><span> </span><span id="local-6989586621679700253"><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679700253"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679700252"><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621679700252"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (w :: Wrapped) t. Encode w t -&gt; Encoding
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">encode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t. t -&gt; Encode ('Closed 'Dense) t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">Rec</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-var">DRComplete</span></a></span><span> </span><span class="annot"><span class="annottext">forall (w :: Wrapped) a t (r :: Density).
Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-operator hs-var">!&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. EncCBOR t =&gt; t -&gt; Encode ('Closed 'Dense) t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">To</span></a></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679700253"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">forall (w :: Wrapped) a t (r :: Density).
Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-operator hs-var">!&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. EncCBOR t =&gt; t -&gt; Encode ('Closed 'Dense) t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">To</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621679700252"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-383"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">encCBOR</span></a></span><span> </span><span id="local-6989586621679700251"><span class="annot"><span class="annottext">x :: DRepPulsingState era
</span><a href="#local-6989586621679700251"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRPulsing"><span class="hs-identifier hs-type">DRPulsing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-type">DRepPulser</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (w :: Wrapped) t. Encode w t -&gt; Encoding
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">encode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t. t -&gt; Encode ('Closed 'Dense) t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">Rec</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-var">DRComplete</span></a></span><span> </span><span class="annot"><span class="annottext">forall (w :: Wrapped) a t (r :: Density).
Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-operator hs-var">!&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. EncCBOR t =&gt; t -&gt; Encode ('Closed 'Dense) t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">To</span></a></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679700245"><span class="hs-identifier hs-var">snap</span></a></span><span> </span><span class="annot"><span class="annottext">forall (w :: Wrapped) a t (r :: Density).
Encode w (a -&gt; t) -&gt; Encode ('Closed r) a -&gt; Encode w t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-operator hs-var">!&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. EncCBOR t =&gt; t -&gt; Encode ('Closed 'Dense) t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">To</span></a></span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621679700244"><span class="hs-identifier hs-var">ratstate</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-384"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-385"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621679700245"><span class="annot"><span class="annottext">PulsingSnapshot era
</span><a href="#local-6989586621679700245"><span class="hs-identifier hs-var">snap</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679700244"><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621679700244"><span class="hs-identifier hs-var">ratstate</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-var">finishDRepPulser</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era
</span><a href="#local-6989586621679700251"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-386"></span><span>
</span><span id="line-387"></span><span class="hs-comment">-- TODO: Implement Sharing: https://github.com/intersectmbo/cardano-ledger/issues/3486</span><span>
</span><span id="line-388"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679700236"><span id="local-6989586621679700239"><span id="local-6989586621679701223"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701223"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-type">DecShareCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier hs-type">DRepPulsingState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701223"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-389"></span><span>  </span><span id="local-6989586621679700232"><span class="annot"><span class="annottext">decShareCBOR :: forall s.
Share (DRepPulsingState era) -&gt; Decoder s (DRepPulsingState era)
</span><a href="#local-6989586621679700232"><span class="hs-identifier hs-var hs-var hs-var hs-var">decShareCBOR</span></a></span></span><span> </span><span class="annot"><span class="annottext">Share (DRepPulsingState era)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-390"></span><span>    </span><span class="annot"><span class="annottext">forall (w :: Wrapped) t s. Decode w t -&gt; Decoder s t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">decode</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-391"></span><span>      </span><span class="annot"><span class="annottext">forall t. t -&gt; Decode ('Closed 'Dense) t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">RecD</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-var">DRComplete</span></a></span><span>
</span><span id="line-392"></span><span>        </span><span class="annot"><span class="annottext">forall (w1 :: Wrapped) a t (w :: Density).
Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-operator hs-var">&lt;!</span></a></span><span> </span><span class="annot"><span class="annottext">forall t (w :: Wrapped). DecCBOR t =&gt; Decode w t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">From</span></a></span><span>
</span><span id="line-393"></span><span>        </span><span class="annot"><span class="annottext">forall (w1 :: Wrapped) a t (w :: Density).
Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-operator hs-var">&lt;!</span></a></span><span> </span><span class="annot"><span class="annottext">forall t (w :: Wrapped). DecCBOR t =&gt; Decode w t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">From</span></a></span><span>
</span><span id="line-394"></span><span>
</span><span id="line-395"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679700224"><span id="local-6989586621679700226"><span id="local-6989586621679701220"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraPParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701220"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-type">DecCBOR</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier hs-type">DRepPulsingState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701220"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-396"></span><span>  </span><span id="local-6989586621679700221"><span class="annot"><span class="annottext">decCBOR :: forall s. Decoder s (DRepPulsingState era)
</span><a href="#local-6989586621679700221"><span class="hs-identifier hs-var hs-var hs-var hs-var">decCBOR</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (w :: Wrapped) t s. Decode w t -&gt; Decoder s t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">decode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t. t -&gt; Decode ('Closed 'Dense) t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">RecD</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-var">DRComplete</span></a></span><span> </span><span class="annot"><span class="annottext">forall (w1 :: Wrapped) a t (w :: Density).
Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-operator hs-var">&lt;!</span></a></span><span> </span><span class="annot"><span class="annottext">forall t (w :: Wrapped). DecCBOR t =&gt; Decode w t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">From</span></a></span><span> </span><span class="annot"><span class="annottext">forall (w1 :: Wrapped) a t (w :: Density).
Decode w1 (a -&gt; t) -&gt; Decode ('Closed w) a -&gt; Decode w1 t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-operator hs-var">&lt;!</span></a></span><span> </span><span class="annot"><span class="annottext">forall t (w :: Wrapped). DecCBOR t =&gt; Decode w t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">From</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-397"></span><span>
</span><span id="line-398"></span><span class="hs-comment">-- =====================================</span><span>
</span><span id="line-399"></span><span class="hs-comment">-- High level operations of DRepDistr</span><span>
</span><span id="line-400"></span><span>
</span><span id="line-401"></span><span id="local-6989586621679701219"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#pulseDRepPulsingState"><span class="hs-identifier hs-type">pulseDRepPulsingState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier hs-type">DRepPulsingState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701219"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier hs-type">DRepPulsingState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701219"><span class="hs-identifier hs-type">era</span></a></span></span><span>
</span><span id="line-402"></span><span id="pulseDRepPulsingState"><span class="annot"><span class="annottext">pulseDRepPulsingState :: forall era. DRepPulsingState era -&gt; DRepPulsingState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#pulseDRepPulsingState"><span class="hs-identifier hs-var hs-var">pulseDRepPulsingState</span></a></span></span><span> </span><span id="local-6989586621679700220"><span class="annot"><span class="annottext">x :: DRepPulsingState era
</span><a href="#local-6989586621679700220"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-type">DRComplete</span></a></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era
</span><a href="#local-6989586621679700220"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-403"></span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#pulseDRepPulsingState"><span class="hs-identifier hs-var">pulseDRepPulsingState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRPulsing"><span class="hs-identifier hs-type">DRPulsing</span></a></span><span> </span><span id="local-6989586621679700219"><span class="annot"><span class="annottext">x :: DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679700219"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulser"><span class="hs-identifier hs-type">DRepPulser</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-404"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679700213"><span class="annot"><span class="annottext">x2 :: DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679700213"><span class="hs-identifier hs-var hs-var">x2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (p :: (* -&gt; *) -&gt; * -&gt; *) ans.
Pulsable p =&gt;
p Identity ans -&gt; p Identity ans
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-data-1.2.1.0/doc/html/cardano-data/src"><span class="hs-identifier hs-var">pulse</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679700219"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-405"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">forall (pulse :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) ans.
Pulsable pulse =&gt;
pulse m ans -&gt; Bool
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-data-1.2.1.0/doc/html/cardano-data/src"><span class="hs-identifier hs-var">done</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679700213"><span class="hs-identifier hs-var">x2</span></a></span><span>
</span><span id="line-406"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">uncurry</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-var">DRComplete</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-var">finishDRepPulser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
DRepPulser era Identity (RatifyState era) -&gt; DRepPulsingState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRPulsing"><span class="hs-identifier hs-var">DRPulsing</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679700213"><span class="hs-identifier hs-var">x2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-407"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall era.
DRepPulser era Identity (RatifyState era) -&gt; DRepPulsingState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRPulsing"><span class="hs-identifier hs-var">DRPulsing</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><a href="#local-6989586621679700213"><span class="hs-identifier hs-var">x2</span></a></span><span>
</span><span id="line-408"></span><span>
</span><span id="line-409"></span><span id="local-6989586621679700212"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#completeDRepPulsingState"><span class="hs-identifier hs-type">completeDRepPulsingState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier hs-type">DRepPulsingState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679700212"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier hs-type">DRepPulsingState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679700212"><span class="hs-identifier hs-type">era</span></a></span></span><span>
</span><span id="line-410"></span><span id="completeDRepPulsingState"><span class="annot"><span class="annottext">completeDRepPulsingState :: forall era. DRepPulsingState era -&gt; DRepPulsingState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#completeDRepPulsingState"><span class="hs-identifier hs-var hs-var">completeDRepPulsingState</span></a></span></span><span> </span><span id="local-6989586621679700211"><span class="annot"><span class="annottext">x :: DRepPulsingState era
</span><a href="#local-6989586621679700211"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRPulsing"><span class="hs-identifier hs-type">DRPulsing</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">uncurry</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
PulsingSnapshot era -&gt; RatifyState era -&gt; DRepPulsingState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-var">DRComplete</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-var">finishDRepPulser</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era
</span><a href="#local-6989586621679700211"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-411"></span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#completeDRepPulsingState"><span class="hs-identifier hs-var">completeDRepPulsingState</span></a></span><span> </span><span id="local-6989586621679700210"><span class="annot"><span class="annottext">x :: DRepPulsingState era
</span><a href="#local-6989586621679700210"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-type">DRComplete</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era
</span><a href="#local-6989586621679700210"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-412"></span><span>
</span><span id="line-413"></span><span id="local-6989586621679701214"><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#extractDRepPulsingState"><span class="hs-identifier hs-type">extractDRepPulsingState</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRepPulsingState"><span class="hs-identifier hs-type">DRepPulsingState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701214"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.Internal.html#RatifyState"><span class="hs-identifier hs-type">RatifyState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679701214"><span class="hs-identifier hs-type">era</span></a></span></span><span>
</span><span id="line-414"></span><span id="extractDRepPulsingState"><span class="annot"><span class="annottext">extractDRepPulsingState :: forall era. DRepPulsingState era -&gt; RatifyState era
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#extractDRepPulsingState"><span class="hs-identifier hs-var hs-var">extractDRepPulsingState</span></a></span></span><span> </span><span id="local-6989586621679700209"><span class="annot"><span class="annottext">x :: DRepPulsingState era
</span><a href="#local-6989586621679700209"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRPulsing"><span class="hs-identifier hs-type">DRPulsing</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulser era Identity (RatifyState era)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
DRepPulsingState era -&gt; (PulsingSnapshot era, RatifyState era)
</span><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#finishDRepPulser"><span class="hs-identifier hs-var">finishDRepPulser</span></a></span><span> </span><span class="annot"><span class="annottext">DRepPulsingState era
</span><a href="#local-6989586621679700209"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-415"></span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#extractDRepPulsingState"><span class="hs-identifier hs-var">extractDRepPulsingState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Ledger.Conway.Governance.DRepPulser.html#DRComplete"><span class="hs-identifier hs-type">DRComplete</span></a></span><span> </span><span class="annot"><span class="annottext">PulsingSnapshot era
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679700208"><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621679700208"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RatifyState era
</span><a href="#local-6989586621679700208"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-416"></span></pre></body></html>