<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE AllowAmbiguousTypes #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DeriveFunctor #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE ImplicitParams #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE NumericUnderscores #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE OverloadedLists #-}</span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-15"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes #-}</span><span>
</span><span id="line-16"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-17"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-18"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilyDependencies #-}</span><span>
</span><span id="line-19"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators #-}</span><span>
</span><span id="line-20"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-21"></span><span class="hs-pragma">{-# LANGUAGE UndecidableSuperClasses #-}</span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Test.Cardano.Ledger.Shelley.ImpTest</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-24"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier">ImpTestM</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#runImpTestM"><span class="hs-identifier">runImpTestM</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#runImpTestM_"><span class="hs-identifier">runImpTestM_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#evalImpTestM"><span class="hs-identifier">evalImpTestM</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#execImpTestM"><span class="hs-identifier">execImpTestM</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#runImpTestGenM"><span class="hs-identifier">runImpTestGenM</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#runImpTestGenM_"><span class="hs-identifier">runImpTestGenM_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#evalImpTestGenM"><span class="hs-identifier">evalImpTestGenM</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#execImpTestGenM"><span class="hs-identifier">execImpTestGenM</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier">ImpTestState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestEnv"><span class="hs-identifier">ImpTestEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpException"><span class="hs-identifier">ImpException</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier">ShelleyEraImp</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier">PlutusArgs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier">ScriptTestContext</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#initShelleyImpNES"><span class="hs-identifier">initShelleyImpNES</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impWitsVKeyNeeded"><span class="hs-identifier">impWitsVKeyNeeded</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#modifyPrevPParams"><span class="hs-identifier">modifyPrevPParams</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#passEpoch"><span class="hs-identifier">passEpoch</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#passNEpochs"><span class="hs-identifier">passNEpochs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#passTick"><span class="hs-identifier">passTick</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier">freshKeyHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyPair"><span class="hs-identifier">freshKeyPair</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyAddr"><span class="hs-identifier">freshKeyAddr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#lookupKeyPair"><span class="hs-identifier">lookupKeyPair</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#freshByronKeyHash"><span class="hs-identifier">freshByronKeyHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#freshBootstapAddress"><span class="hs-identifier">freshBootstapAddress</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#lookupByronKeyPair"><span class="hs-identifier">lookupByronKeyPair</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#freshSafeHash"><span class="hs-identifier">freshSafeHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHashVRF"><span class="hs-identifier">freshKeyHashVRF</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#submitTx"><span class="hs-identifier">submitTx</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#submitTx_"><span class="hs-identifier">submitTx_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#submitTxAnn"><span class="hs-identifier">submitTxAnn</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-57"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#submitTxAnn_"><span class="hs-identifier">submitTxAnn_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-58"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#submitFailingTx"><span class="hs-identifier">submitFailingTx</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#trySubmitTx"><span class="hs-identifier">trySubmitTx</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#modifyNES"><span class="hs-identifier">modifyNES</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier">getsNES</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getUTxO"><span class="hs-identifier">getUTxO</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impAddNativeScript"><span class="hs-identifier">impAddNativeScript</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impAnn"><span class="hs-identifier">impAnn</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#runImpRule"><span class="hs-identifier">runImpRule</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#tryRunImpRule"><span class="hs-identifier">tryRunImpRule</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-67"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#registerRewardAccount"><span class="hs-identifier">registerRewardAccount</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-68"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#lookupReward"><span class="hs-identifier">lookupReward</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-69"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#registerPool"><span class="hs-identifier">registerPool</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-70"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getRewardAccountAmount"><span class="hs-identifier">getRewardAccountAmount</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-71"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#withImpState"><span class="hs-identifier">withImpState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-72"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#shelleyFixupTx"><span class="hs-identifier">shelleyFixupTx</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-73"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#lookupImpRootTxOut"><span class="hs-identifier">lookupImpRootTxOut</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-74"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#sendValueTo"><span class="hs-identifier">sendValueTo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-75"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#sendCoinTo"><span class="hs-identifier">sendCoinTo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-76"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#expectRegisteredRewardAddress"><span class="hs-identifier">expectRegisteredRewardAddress</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-77"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#expectNotRegisteredRewardAddress"><span class="hs-identifier">expectNotRegisteredRewardAddress</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-78"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#expectTreasury"><span class="hs-identifier">expectTreasury</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-79"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#updateAddrTxWits"><span class="hs-identifier">updateAddrTxWits</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-80"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#addNativeScriptTxWits"><span class="hs-identifier">addNativeScriptTxWits</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-81"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#addRootTxIn"><span class="hs-identifier">addRootTxIn</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-82"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#fixupFees"><span class="hs-identifier">fixupFees</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-83"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impGetNativeScript"><span class="hs-identifier">impGetNativeScript</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-84"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impLookupUTxO"><span class="hs-identifier">impLookupUTxO</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-85"></span><span>
</span><span id="line-86"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Logging</span></span><span>
</span><span id="line-87"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#logEntry"><span class="hs-identifier">logEntry</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-88"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#logToExpr"><span class="hs-identifier">logToExpr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-89"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#logStakeDistr"><span class="hs-identifier">logStakeDistr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-90"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#logFeeMismatch"><span class="hs-identifier">logFeeMismatch</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span>  </span><span class="annot"><span class="hs-comment">-- * Combinators</span></span><span>
</span><span id="line-93"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#withNoFixup"><span class="hs-identifier">withNoFixup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-94"></span><span>  </span><span class="hs-comment">-- We only export getters, because internal state should not be accessed during testing</span><span>
</span><span id="line-95"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNESG"><span class="hs-identifier">impNESG</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-96"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impLastTickG"><span class="hs-identifier">impLastTickG</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-97"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impKeyPairsG"><span class="hs-identifier">impKeyPairsG</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-98"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNativeScriptsG"><span class="hs-identifier">impNativeScriptsG</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-99"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-byron-1.0.0.4/doc/html/cardano-ledger-byron/src"><span class="hs-identifier">Cardano.Chain.Common</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Byron</span></span><span>
</span><span id="line-102"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-crypto-class-2.1.4.0-f9a064a9f4847ae2186cc0b7de9c9032806ff44166e6dee0ed45e502459e8305/share/doc/html/src"><span class="hs-identifier">Cardano.Crypto.DSIGN</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-crypto-class-2.1.4.0-f9a064a9f4847ae2186cc0b7de9c9032806ff44166e6dee0ed45e502459e8305/share/doc/html/src"><span class="hs-identifier">DSIGNAlgorithm</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-crypto-class-2.1.4.0-f9a064a9f4847ae2186cc0b7de9c9032806ff44166e6dee0ed45e502459e8305/share/doc/html/src"><span class="hs-identifier">Ed25519DSIGN</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-crypto-class-2.1.4.0-f9a064a9f4847ae2186cc0b7de9c9032806ff44166e6dee0ed45e502459e8305/share/doc/html/src"><span class="hs-identifier">seedSizeDSIGN</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-103"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-crypto-class-2.1.4.0-f9a064a9f4847ae2186cc0b7de9c9032806ff44166e6dee0ed45e502459e8305/share/doc/html/src"><span class="hs-identifier">Cardano.Crypto.Hash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-crypto-class-2.1.4.0-f9a064a9f4847ae2186cc0b7de9c9032806ff44166e6dee0ed45e502459e8305/share/doc/html/src"><span class="hs-identifier">Hash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-crypto-class-2.1.4.0-f9a064a9f4847ae2186cc0b7de9c9032806ff44166e6dee0ed45e502459e8305/share/doc/html/src"><span class="hs-identifier">HashAlgorithm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-104"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-crypto-class-2.1.4.0-f9a064a9f4847ae2186cc0b7de9c9032806ff44166e6dee0ed45e502459e8305/share/doc/html/src"><span class="hs-identifier">Cardano.Crypto.Seed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-crypto-class-2.1.4.0-f9a064a9f4847ae2186cc0b7de9c9032806ff44166e6dee0ed45e502459e8305/share/doc/html/src"><span class="hs-identifier">mkSeedFromBytes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-crypto-class-2.1.4.0-f9a064a9f4847ae2186cc0b7de9c9032806ff44166e6dee0ed45e502459e8305/share/doc/html/src"><span class="hs-identifier">Cardano.Crypto.VRF</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">VRF</span></span><span>
</span><span id="line-106"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.Address</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Addr</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">BootstrapAddress</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">RewardAccount</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">bootstrapKeyHash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-107"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.BaseTypes</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-108"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">BlocksMade</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-109"></span><span>  </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-slotting-0.2.0.0-e8312797f023619ba000361257739ea3242d7d9366b817847e018e86b37d28d6/share/doc/html/src"><span class="hs-identifier">EpochSize</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-110"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Globals</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-111"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Network</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-112"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">ShelleyBase</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-113"></span><span>  </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-slotting-0.2.0.0-e8312797f023619ba000361257739ea3242d7d9366b817847e018e86b37d28d6/share/doc/html/src"><span class="hs-identifier">SlotNo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-114"></span><span>  </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-strict-containers-0.1.3.0-c8c434ba474a408c40a155b68fe1059a1c9196931f80e9c4ade09421da2372fd/share/doc/html/src"><span class="hs-identifier">StrictMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-115"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">TxIx</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-116"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">inject</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-117"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">mkTxIxPartial</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-118"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-119"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.CertState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">certDStateL</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">dsUnifiedL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-120"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.Coin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Coin</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-121"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.Core</span></a></span><span>
</span><span id="line-122"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.Credential</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Credential</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">StakeReference</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">credToText</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-123"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.Crypto</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Crypto</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-124"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.EpochBoundary</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">emptySnapShots</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-125"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.Keys</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-126"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">HasKeyRole</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-127"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">KeyHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-128"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">KeyRole</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-129"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">VerKeyVRF</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-130"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">bootstrapWitKeyHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-131"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">hashKey</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-132"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">makeBootstrapWitness</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-133"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">witVKeyHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-134"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.PoolDistr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">IndividualPoolStake</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">PoolDistr</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-136"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.PoolParams</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">PoolParams</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-137"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.SafeHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">HashAnnotated</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">SafeHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">extractHash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">Cardano.Ledger.Shelley</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">ShelleyEra</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-139"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">Cardano.Ledger.Shelley.AdaPots</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">AdaPots</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">sumAdaPots</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">totalAdaPotsES</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-140"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">Cardano.Ledger.Shelley.Core</span></a></span><span>
</span><span id="line-141"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">Cardano.Ledger.Shelley.LedgerState</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-142"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">AccountState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-143"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">EpochState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-144"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">LedgerState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-145"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">NewEpochState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-146"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">StashedAVVMAddresses</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-147"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">asTreasuryL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-148"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">consumed</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-149"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">curPParamsEpochStateL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-150"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">epochStateIncrStakeDistrL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-151"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">epochStateUMapL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-152"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">esAccountStateL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-153"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">esLStateL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-154"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">lsCertStateL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-155"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">lsUTxOStateL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-156"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">nesELL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-157"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">nesEsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-158"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">prevPParamsEpochStateL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-159"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">produced</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-160"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">smartUTxOState</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-161"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">startStep</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-162"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">utxosUtxoL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-163"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-164"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">Cardano.Ledger.Shelley.Rules</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">LedgerEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-165"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">Cardano.Ledger.Shelley.Scripts</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier">MultiSig</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-166"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.Tools</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">calcMinFeeTxNativeScriptWits</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">integralToByteStringN</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">TxId</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-168"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.UMap</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">UMap</span></span><span>
</span><span id="line-169"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.UTxO</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-170"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">EraUTxO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-171"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">ScriptsProvided</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-172"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">UTxO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-173"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">txinLookup</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-174"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-175"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Cardano.Ledger.Val</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Val</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-176"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Control.Monad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">forM</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-177"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Control.Monad.IO.Class</span></a></span><span>
</span><span id="line-178"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier">Control.Monad.Reader</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier">MonadReader</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier">asks</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-179"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier">Control.Monad.State.Strict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier">MonadState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier">execStateT</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier">gets</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier">modify</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-180"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier">Control.Monad.Trans</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier">lift</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-181"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier">Control.Monad.Trans.Reader</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier">ReaderT</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-182"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier">Control.State.Transition</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier">STS</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-183"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-test-1.1.0.0/doc/html/small-steps-test/src"><span class="hs-identifier">Control.State.Transition.Trace</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-test-1.1.0.0/doc/html/small-steps-test/src"><span class="hs-identifier">applySTSTest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-184"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.Coerce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier">coerce</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-185"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.Data</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Proxy</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-186"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/data-default-class-0.1.2.0-d021275d74faf56efb7a1c98c49b66562c7b07f4d3882878288b6faf38a43071/share/doc/html/src"><span class="hs-identifier">Data.Default.Class</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/data-default-class-0.1.2.0-d021275d74faf56efb7a1c98c49b66562c7b07f4d3882878288b6faf38a43071/share/doc/html/src"><span class="hs-identifier">Default</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.Foldable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">toList</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-188"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.Functor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator">($&gt;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-189"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.Functor.Identity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Identity</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-190"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.IORef</span></a></span><span>
</span><span id="line-191"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.List.NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">NonEmpty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-192"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Data.Map.Strict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Map</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-193"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Data.Map.Strict</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-194"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Data.Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">catMaybes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">fromMaybe</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">mapMaybe</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-195"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-strict-containers-0.1.3.0-c8c434ba474a408c40a155b68fe1059a1c9196931f80e9c4ade09421da2372fd/share/doc/html/src"><span class="hs-identifier">Data.Sequence.Strict</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-strict-containers-0.1.3.0-c8c434ba474a408c40a155b68fe1059a1c9196931f80e9c4ade09421da2372fd/share/doc/html/src"><span class="hs-identifier">StrictSeq</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-196"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-strict-containers-0.1.3.0-c8c434ba474a408c40a155b68fe1059a1c9196931f80e9c4ade09421da2372fd/share/doc/html/src"><span class="hs-identifier">Data.Sequence.Strict</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SSeq</span></span><span>
</span><span id="line-197"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-198"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/text-1.2.5.0/src"><span class="hs-identifier">Data.Text</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-199"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">GHC.Stack</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">SrcLoc</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">getCallStack</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-200"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">GHC.TypeLits</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">KnownSymbol</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">symbolVal</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-201"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier">Lens.Micro</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier">Lens'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier">SimpleGetter</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier">lens</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier">to</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator">(%~)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator">(&amp;)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator">(.~)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator">(&lt;&gt;~)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator">(^.)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-202"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-mtl-0.2.0.3-30febb7a254c037eae9a749580d8462f4e1181aa6379e82c103234a8f48251c9/share/doc/html/src"><span class="hs-identifier">Lens.Micro.Mtl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-mtl-0.2.0.3-30febb7a254c037eae9a749580d8462f4e1181aa6379e82c103234a8f48251c9/share/doc/html/src"><span class="hs-identifier">use</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-mtl-0.2.0.3-30febb7a254c037eae9a749580d8462f4e1181aa6379e82c103234a8f48251c9/share/doc/html/src"><span class="hs-identifier">view</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-mtl-0.2.0.3-30febb7a254c037eae9a749580d8462f4e1181aa6379e82c103234a8f48251c9/share/doc/html/src"><span class="hs-operator">(%=)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-mtl-0.2.0.3-30febb7a254c037eae9a749580d8462f4e1181aa6379e82c103234a8f48251c9/share/doc/html/src"><span class="hs-operator">(+=)</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-mtl-0.2.0.3-30febb7a254c037eae9a749580d8462f4e1181aa6379e82c103234a8f48251c9/share/doc/html/src"><span class="hs-operator">(.=)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-203"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Numeric.Natural</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-bignum-1.2/src"><span class="hs-identifier">Natural</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-204"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/prettyprinter-1.7.1-546164a61e33fff52b43324c1636e343b3360b907f873b5adf59f460acb23f60/share/doc/html/src"><span class="hs-identifier">Prettyprinter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/prettyprinter-1.7.1-546164a61e33fff52b43324c1636e343b3360b907f873b5adf59f460acb23f60/share/doc/html/src"><span class="hs-identifier">Doc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/prettyprinter-1.7.1-546164a61e33fff52b43324c1636e343b3360b907f873b5adf59f460acb23f60/share/doc/html/src"><span class="hs-identifier">Pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/prettyprinter-1.7.1-546164a61e33fff52b43324c1636e343b3360b907f873b5adf59f460acb23f60/share/doc/html/src"><span class="hs-identifier">defaultLayoutOptions</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/prettyprinter-1.7.1-546164a61e33fff52b43324c1636e343b3360b907f873b5adf59f460acb23f60/share/doc/html/src"><span class="hs-identifier">layoutPretty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/prettyprinter-1.7.1-546164a61e33fff52b43324c1636e343b3360b907f873b5adf59f460acb23f60/share/doc/html/src"><span class="hs-identifier">line</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-205"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/prettyprinter-1.7.1-546164a61e33fff52b43324c1636e343b3360b907f873b5adf59f460acb23f60/share/doc/html/src"><span class="hs-identifier">Prettyprinter.Render.String</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/prettyprinter-1.7.1-546164a61e33fff52b43324c1636e343b3360b907f873b5adf59f460acb23f60/share/doc/html/src"><span class="hs-identifier">renderString</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-206"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/random-1.2.1.1-97d351bf97dd57637441798736e25556058018a1de673671ce7fdce6e47d0d77/share/doc/html/src"><span class="hs-identifier">System.Random</span></a></span><span>
</span><span id="line-207"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/random-1.2.1.1-97d351bf97dd57637441798736e25556058018a1de673671ce7fdce6e47d0d77/share/doc/html/src"><span class="hs-identifier">System.Random</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Random</span></span><span>
</span><span id="line-208"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Test.Cardano.Ledger.Core.Arbitrary</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-209"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Test.Cardano.Ledger.Core.KeyPair</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-210"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier">ByronKeyPair</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-211"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier">KeyPair</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-212"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier">mkAddr</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-213"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier">mkKeyHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-214"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier">mkWitnessesVKey</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-215"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-216"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Test.Cardano.Ledger.Core.Utils</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier">mkDummySafeHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier">testGlobals</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier">txInAt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-217"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Test.Cardano.Ledger.Imp.Common</span></a></span><span>
</span><span id="line-218"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier">Test.Cardano.Ledger.Plutus</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier">PlutusArgs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier">ScriptTestContext</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-219"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.TreeDiff.html"><span class="hs-identifier">Test.Cardano.Ledger.Shelley.TreeDiff</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-220"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-slotting-0.2.0.0-l-testlib-0d2e34532c4ba05abf230fb8679070e204df6b362cf666718a6e9f58eca7ab20/share/doc/html/src"><span class="hs-identifier">Test.Cardano.Slotting.Numeric</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-221"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/HUnit-1.6.2.0-59aa0f65a28ee534ccd9433cc361768bd0714e76c4786df4d82486bce6c2be36/share/doc/html/src"><span class="hs-identifier">Test.HUnit.Lang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/HUnit-1.6.2.0-59aa0f65a28ee534ccd9433cc361768bd0714e76c4786df4d82486bce6c2be36/share/doc/html/src"><span class="hs-identifier">FailureReason</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/HUnit-1.6.2.0-59aa0f65a28ee534ccd9433cc361768bd0714e76c4786df4d82486bce6c2be36/share/doc/html/src"><span class="hs-identifier">HUnitFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-222"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hspec-core-2.11.7-8079ad8b174397fbf8417423f1b52873a1b0df10044b26818c3cac3f982389d1/share/doc/html/src"><span class="hs-identifier">Test.Hspec.Core.Spec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hspec-core-2.11.7-8079ad8b174397fbf8417423f1b52873a1b0df10044b26818c3cac3f982389d1/share/doc/html/src"><span class="hs-identifier">Example</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hspec-core-2.11.7-8079ad8b174397fbf8417423f1b52873a1b0df10044b26818c3cac3f982389d1/share/doc/html/src"><span class="hs-identifier">Params</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hspec-core-2.11.7-8079ad8b174397fbf8417423f1b52873a1b0df10044b26818c3cac3f982389d1/share/doc/html/src"><span class="hs-identifier">paramsQuickCheckArgs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-223"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.14.3-a65fd1c4eb4ae76375c6e3f3845a1ba912285f018239b330ae730fef533366f9/share/doc/html/src"><span class="hs-identifier">Test.QuickCheck.Gen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.14.3-a65fd1c4eb4ae76375c6e3f3845a1ba912285f018239b330ae730fef533366f9/share/doc/html/src"><span class="hs-identifier">Gen</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-224"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.14.3-a65fd1c4eb4ae76375c6e3f3845a1ba912285f018239b330ae730fef533366f9/share/doc/html/src"><span class="hs-identifier">Test.QuickCheck.Random</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.14.3-a65fd1c4eb4ae76375c6e3f3845a1ba912285f018239b330ae730fef533366f9/share/doc/html/src"><span class="hs-identifier">QCGen</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.14.3-a65fd1c4eb4ae76375c6e3f3845a1ba912285f018239b330ae730fef533366f9/share/doc/html/src"><span class="hs-identifier">mkQCGen</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-225"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/unliftio-0.2.25.0-8f9832938fccae827eac9a277285942342049f20136025c9a200d96eb4f776f9/share/doc/html/src"><span class="hs-identifier">UnliftIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/unliftio-core-0.2.1.0-43d04bbaa41559f7f1361069ad1775e341ff50d95412902c1522767d45f0d7a6/share/doc/html/src"><span class="hs-identifier">MonadUnliftIO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-226"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/unliftio-0.2.25.0-8f9832938fccae827eac9a277285942342049f20136025c9a200d96eb4f776f9/share/doc/html/src"><span class="hs-identifier">UnliftIO.Exception</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-227"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">Exception</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-228"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier">SomeException</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-229"></span><span>  </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/unliftio-0.2.25.0-8f9832938fccae827eac9a277285942342049f20136025c9a200d96eb4f776f9/share/doc/html/src"><span class="hs-identifier">catchAny</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-230"></span><span>  </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/unliftio-0.2.25.0-8f9832938fccae827eac9a277285942342049f20136025c9a200d96eb4f776f9/share/doc/html/src"><span class="hs-identifier">catchAnyDeep</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-231"></span><span>  </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/unliftio-0.2.25.0-8f9832938fccae827eac9a277285942342049f20136025c9a200d96eb4f776f9/share/doc/html/src"><span class="hs-identifier">evaluateDeep</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-232"></span><span>  </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/unliftio-0.2.25.0-8f9832938fccae827eac9a277285942342049f20136025c9a200d96eb4f776f9/share/doc/html/src"><span class="hs-identifier">throwIO</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-233"></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-234"></span><span>
</span><span id="line-235"></span><span class="hs-keyword">data</span><span> </span><span id="ImpTestState"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-var">ImpTestState</span></a></span></span><span> </span><span id="local-6989586621679429012"><span class="annot"><a href="#local-6989586621679429012"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ImpTestState"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-var">ImpTestState</span></a></span></span><span>
</span><span id="line-236"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="impNES"><span class="annot"><span class="annottext">forall era. ImpTestState era -&gt; NewEpochState era
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNES"><span class="hs-identifier hs-var hs-var">impNES</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679429012"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-237"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="impRootTxIn"><span class="annot"><span class="annottext">forall era. ImpTestState era -&gt; TxIn (EraCrypto era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impRootTxIn"><span class="hs-identifier hs-var hs-var">impRootTxIn</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679429012"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-238"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="impKeyPairs"><span class="annot"><span class="annottext">forall era.
ImpTestState era
-&gt; forall (k :: KeyRole).
   Map (KeyHash k (EraCrypto era)) (KeyPair k (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impKeyPairs"><span class="hs-identifier hs-var hs-var">impKeyPairs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679429005"><span class="annot"><a href="#local-6989586621679429005"><span class="hs-identifier hs-type">k</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679429005"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679429012"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyPair</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679429005"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679429012"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-239"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="impByronKeyPairs"><span class="annot"><span class="annottext">forall era.
ImpTestState era
-&gt; Map (BootstrapAddress (EraCrypto era)) ByronKeyPair
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impByronKeyPairs"><span class="hs-identifier hs-var hs-var">impByronKeyPairs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">BootstrapAddress</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679429012"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">ByronKeyPair</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-240"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="impNativeScripts"><span class="annot"><span class="annottext">forall era.
ImpTestState era
-&gt; Map (ScriptHash (EraCrypto era)) (NativeScript era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNativeScripts"><span class="hs-identifier hs-var hs-var">impNativeScripts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679429012"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">NativeScript</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679429012"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-241"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="impLastTick"><span class="annot"><span class="annottext">forall era. ImpTestState era -&gt; SlotNo
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impLastTick"><span class="hs-identifier hs-var hs-var">impLastTick</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-slotting-0.2.0.0-e8312797f023619ba000361257739ea3242d7d9366b817847e018e86b37d28d6/share/doc/html/src"><span class="hs-identifier hs-type">SlotNo</span></a></span><span>
</span><span id="line-242"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="impGlobals"><span class="annot"><span class="annottext">forall era. ImpTestState era -&gt; Globals
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impGlobals"><span class="hs-identifier hs-var hs-var">impGlobals</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Globals</span></a></span><span>
</span><span id="line-243"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="impLog"><span class="annot"><span class="annottext">forall era. ImpTestState era -&gt; Doc ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impLog"><span class="hs-identifier hs-var hs-var">impLog</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/prettyprinter-1.7.1-546164a61e33fff52b43324c1636e343b3360b907f873b5adf59f460acb23f60/share/doc/html/src"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-244"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="impGen"><span class="annot"><span class="annottext">forall era. ImpTestState era -&gt; QCGen
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impGen"><span class="hs-identifier hs-var hs-var">impGen</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.14.3-a65fd1c4eb4ae76375c6e3f3845a1ba912285f018239b330ae730fef533366f9/share/doc/html/src"><span class="hs-identifier hs-type">QCGen</span></a></span><span>
</span><span id="line-245"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-246"></span><span>
</span><span id="line-247"></span><span id="local-6989586621679428986"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impLogL"><span class="hs-identifier hs-type">impLogL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428986"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/prettyprinter-1.7.1-546164a61e33fff52b43324c1636e343b3360b907f873b5adf59f460acb23f60/share/doc/html/src"><span class="hs-identifier hs-type">Doc</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-248"></span><span id="impLogL"><span class="annot"><span class="annottext">impLogL :: forall era. Lens' (ImpTestState era) (Doc ())
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impLogL"><span class="hs-identifier hs-var hs-var">impLogL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier hs-var">lens</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. ImpTestState era -&gt; Doc ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impLog"><span class="hs-identifier hs-var">impLog</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679427724"><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679427724"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679427723"><span class="annot"><span class="annottext">Doc ()
</span><a href="#local-6989586621679427723"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679427724"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">impLog :: Doc ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impLog"><span class="hs-identifier hs-var">impLog</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc ()
</span><a href="#local-6989586621679427723"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-249"></span><span>
</span><span id="line-250"></span><span id="local-6989586621679428977"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNESL"><span class="hs-identifier hs-type">impNESL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428977"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428977"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-251"></span><span id="impNESL"><span class="annot"><span class="annottext">impNESL :: forall era. Lens' (ImpTestState era) (NewEpochState era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNESL"><span class="hs-identifier hs-var hs-var">impNESL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier hs-var">lens</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. ImpTestState era -&gt; NewEpochState era
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNES"><span class="hs-identifier hs-var">impNES</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679427719"><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679427719"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679427718"><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621679427718"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679427719"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">impNES :: NewEpochState era
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNES"><span class="hs-identifier hs-var">impNES</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621679427718"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span>
</span><span id="line-253"></span><span id="local-6989586621679428974"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNESG"><span class="hs-identifier hs-type">impNESG</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier hs-type">SimpleGetter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428974"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428974"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-254"></span><span id="impNESG"><span class="annot"><span class="annottext">impNESG :: forall era. SimpleGetter (ImpTestState era) (NewEpochState era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNESG"><span class="hs-identifier hs-var hs-var">impNESG</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (ImpTestState era) (NewEpochState era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNESL"><span class="hs-identifier hs-var">impNESL</span></a></span><span>
</span><span id="line-255"></span><span>
</span><span id="line-256"></span><span id="local-6989586621679428969"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impLastTickL"><span class="hs-identifier hs-type">impLastTickL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428969"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-slotting-0.2.0.0-e8312797f023619ba000361257739ea3242d7d9366b817847e018e86b37d28d6/share/doc/html/src"><span class="hs-identifier hs-type">SlotNo</span></a></span></span><span>
</span><span id="line-257"></span><span id="impLastTickL"><span class="annot"><span class="annottext">impLastTickL :: forall era. Lens' (ImpTestState era) SlotNo
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impLastTickL"><span class="hs-identifier hs-var hs-var">impLastTickL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier hs-var">lens</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. ImpTestState era -&gt; SlotNo
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impLastTick"><span class="hs-identifier hs-var">impLastTick</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679427712"><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679427712"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679427711"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679427711"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679427712"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">impLastTick :: SlotNo
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impLastTick"><span class="hs-identifier hs-var">impLastTick</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679427711"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-258"></span><span>
</span><span id="line-259"></span><span id="local-6989586621679428966"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impLastTickG"><span class="hs-identifier hs-type">impLastTickG</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier hs-type">SimpleGetter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428966"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-slotting-0.2.0.0-e8312797f023619ba000361257739ea3242d7d9366b817847e018e86b37d28d6/share/doc/html/src"><span class="hs-identifier hs-type">SlotNo</span></a></span></span><span>
</span><span id="line-260"></span><span id="impLastTickG"><span class="annot"><span class="annottext">impLastTickG :: forall era. SimpleGetter (ImpTestState era) SlotNo
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impLastTickG"><span class="hs-identifier hs-var hs-var">impLastTickG</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (ImpTestState era) SlotNo
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impLastTickL"><span class="hs-identifier hs-var">impLastTickL</span></a></span><span>
</span><span id="line-261"></span><span>
</span><span id="line-262"></span><span id="local-6989586621679428964"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impRootTxInL"><span class="hs-identifier hs-type">impRootTxInL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428964"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428964"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-263"></span><span id="impRootTxInL"><span class="annot"><span class="annottext">impRootTxInL :: forall era. Lens' (ImpTestState era) (TxIn (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impRootTxInL"><span class="hs-identifier hs-var hs-var">impRootTxInL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier hs-var">lens</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. ImpTestState era -&gt; TxIn (EraCrypto era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impRootTxIn"><span class="hs-identifier hs-var">impRootTxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679427706"><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679427706"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679427705"><span class="annot"><span class="annottext">TxIn (EraCrypto era)
</span><a href="#local-6989586621679427705"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679427706"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">impRootTxIn :: TxIn (EraCrypto era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impRootTxIn"><span class="hs-identifier hs-var">impRootTxIn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxIn (EraCrypto era)
</span><a href="#local-6989586621679427705"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-264"></span><span>
</span><span id="line-265"></span><span id="local-6989586621679428960"><span id="local-6989586621679428961"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impKeyPairsG"><span class="hs-identifier hs-type">impKeyPairsG</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-266"></span><span>  </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier hs-type">SimpleGetter</span></a></span><span>
</span><span id="line-267"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428961"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-268"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428960"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428961"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyPair</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428960"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428961"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-269"></span><span id="impKeyPairsG"><span class="annot"><span class="annottext">impKeyPairsG :: forall era (k :: KeyRole).
SimpleGetter
  (ImpTestState era)
  (Map (KeyHash k (EraCrypto era)) (KeyPair k (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impKeyPairsG"><span class="hs-identifier hs-var hs-var">impKeyPairsG</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
ImpTestState era
-&gt; forall (k :: KeyRole).
   Map (KeyHash k (EraCrypto era)) (KeyPair k (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impKeyPairs"><span class="hs-identifier hs-var">impKeyPairs</span></a></span><span>
</span><span id="line-270"></span><span>
</span><span id="line-271"></span><span id="local-6989586621679428957"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNativeScriptsL"><span class="hs-identifier hs-type">impNativeScriptsL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428957"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428957"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">NativeScript</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428957"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-272"></span><span id="impNativeScriptsL"><span class="annot"><span class="annottext">impNativeScriptsL :: forall era.
Lens'
  (ImpTestState era)
  (Map (ScriptHash (EraCrypto era)) (NativeScript era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNativeScriptsL"><span class="hs-identifier hs-var hs-var">impNativeScriptsL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier hs-var">lens</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
ImpTestState era
-&gt; Map (ScriptHash (EraCrypto era)) (NativeScript era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNativeScripts"><span class="hs-identifier hs-var">impNativeScripts</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679427701"><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679427701"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679427700"><span class="annot"><span class="annottext">Map (ScriptHash (EraCrypto era)) (NativeScript era)
</span><a href="#local-6989586621679427700"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679427701"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">impNativeScripts :: Map (ScriptHash (EraCrypto era)) (NativeScript era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNativeScripts"><span class="hs-identifier hs-var">impNativeScripts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (ScriptHash (EraCrypto era)) (NativeScript era)
</span><a href="#local-6989586621679427700"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-273"></span><span>
</span><span id="line-274"></span><span id="local-6989586621679428954"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNativeScriptsG"><span class="hs-identifier hs-type">impNativeScriptsG</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier hs-type">SimpleGetter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428954"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428954"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">NativeScript</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428954"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-275"></span><span id="impNativeScriptsG"><span class="annot"><span class="annottext">impNativeScriptsG :: forall era.
SimpleGetter
  (ImpTestState era)
  (Map (ScriptHash (EraCrypto era)) (NativeScript era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNativeScriptsG"><span class="hs-identifier hs-var hs-var">impNativeScriptsG</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
Lens'
  (ImpTestState era)
  (Map (ScriptHash (EraCrypto era)) (NativeScript era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNativeScriptsL"><span class="hs-identifier hs-var">impNativeScriptsL</span></a></span><span>
</span><span id="line-276"></span><span>
</span><span id="line-277"></span><span class="hs-keyword">class</span><span>
</span><span id="line-278"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-279"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/tree-diff-0.3.0.1-cc369363586a073c43a96e3fe90be75e8458452f619676a40f10888621bb4dcc/share/doc/html/src"><span class="hs-identifier hs-type">ToExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-280"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/tree-diff-0.3.0.1-cc369363586a073c43a96e3fe90be75e8458452f619676a40f10888621bb4dcc/share/doc/html/src"><span class="hs-identifier hs-type">ToExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-281"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/tree-diff-0.3.0.1-cc369363586a073c43a96e3fe90be75e8458452f619676a40f10888621bb4dcc/share/doc/html/src"><span class="hs-identifier hs-type">ToExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxOut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-282"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/tree-diff-0.3.0.1-cc369363586a073c43a96e3fe90be75e8458452f619676a40f10888621bb4dcc/share/doc/html/src"><span class="hs-identifier hs-type">ToExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">PParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-283"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/tree-diff-0.3.0.1-cc369363586a073c43a96e3fe90be75e8458452f619676a40f10888621bb4dcc/share/doc/html/src"><span class="hs-identifier hs-type">ToExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">StashedAVVMAddresses</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-284"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/tree-diff-0.3.0.1-cc369363586a073c43a96e3fe90be75e8458452f619676a40f10888621bb4dcc/share/doc/html/src"><span class="hs-identifier hs-type">ToExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">GovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-285"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/tree-diff-0.3.0.1-cc369363586a073c43a96e3fe90be75e8458452f619676a40f10888621bb4dcc/share/doc/html/src"><span class="hs-identifier hs-type">ToExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">PParamsHKD</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-strict-containers-0.1.3.0-c8c434ba474a408c40a155b68fe1059a1c9196931f80e9c4ade09421da2372fd/share/doc/html/src"><span class="hs-identifier hs-type">StrictMaybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-286"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/tree-diff-0.3.0.1-cc369363586a073c43a96e3fe90be75e8458452f619676a40f10888621bb4dcc/share/doc/html/src"><span class="hs-identifier hs-type">ToExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">PParamsHKD</span></a></span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Identity</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-287"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxOut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-288"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">PParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-289"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">StashedAVVMAddresses</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-290"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">GovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-291"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxOut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-292"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">PParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-293"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">StashedAVVMAddresses</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-294"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Eq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">GovState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-295"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">Signal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-296"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">BaseM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">ShelleyBase</span></a></span><span>
</span><span id="line-297"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-298"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-crypto-class-2.1.4.0-f9a064a9f4847ae2186cc0b7de9c9032806ff44166e6dee0ed45e502459e8305/share/doc/html/src"><span class="hs-identifier hs-type">Signable</span></a></span><span>
</span><span id="line-299"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">DSIGN</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-300"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-crypto-class-2.1.4.0-f9a064a9f4847ae2186cc0b7de9c9032806ff44166e6dee0ed45e502459e8305/share/doc/html/src"><span class="hs-identifier hs-type">Hash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">HASH</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraIndependentTxBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-301"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">DSIGN</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-crypto-class-2.1.4.0-f9a064a9f4847ae2186cc0b7de9c9032806ff44166e6dee0ed45e502459e8305/share/doc/html/src"><span class="hs-identifier hs-type">Ed25519DSIGN</span></a></span><span>
</span><span id="line-302"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/tree-diff-0.3.0.1-cc369363586a073c43a96e3fe90be75e8458452f619676a40f10888621bb4dcc/share/doc/html/src"><span class="hs-identifier hs-type">ToExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-303"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/tree-diff-0.3.0.1-cc369363586a073c43a96e3fe90be75e8458452f619676a40f10888621bb4dcc/share/doc/html/src"><span class="hs-identifier hs-type">ToExpr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;UTXOW&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-304"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraUTxO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-305"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">ShelleyEraTxCert</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-306"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">LedgerState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-307"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">Environment</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">LedgerEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-308"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-309"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">BaseM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;TICK&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">ShelleyBase</span></a></span><span>
</span><span id="line-310"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">Signal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;TICK&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-slotting-0.2.0.0-e8312797f023619ba000361257739ea3242d7d9366b817847e018e86b37d28d6/share/doc/html/src"><span class="hs-identifier hs-type">SlotNo</span></a></span><span>
</span><span id="line-311"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">Environment</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;TICK&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-312"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;TICK&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-313"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;TICK&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-314"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;TICK&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-315"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">StashedAVVMAddresses</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-316"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-317"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-crypto-class-2.1.4.0-f9a064a9f4847ae2186cc0b7de9c9032806ff44166e6dee0ed45e502459e8305/share/doc/html/src"><span class="hs-identifier hs-type">VerKeyDSIGN</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">DSIGN</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-318"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-319"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-crypto-class-2.1.4.0-f9a064a9f4847ae2186cc0b7de9c9032806ff44166e6dee0ed45e502459e8305/share/doc/html/src"><span class="hs-identifier hs-type">VRF.VRFAlgorithm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">VRF</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-320"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-crypto-class-2.1.4.0-f9a064a9f4847ae2186cc0b7de9c9032806ff44166e6dee0ed45e502459e8305/share/doc/html/src"><span class="hs-identifier hs-type">HashAlgorithm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">HASH</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-321"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-crypto-class-2.1.4.0-f9a064a9f4847ae2186cc0b7de9c9032806ff44166e6dee0ed45e502459e8305/share/doc/html/src"><span class="hs-identifier hs-type">DSIGNAlgorithm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">DSIGN</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-322"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-323"></span><span>  </span><span id="ShelleyEraImp"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-var">ShelleyEraImp</span></a></span></span><span> </span><span id="local-6989586621679428952"><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span></span><span>
</span><span id="line-324"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-325"></span><span>  </span><span id="initImpNES"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#initImpNES"><span class="hs-identifier hs-type">initImpNES</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-326"></span><span>
</span><span id="line-327"></span><span>  </span><span class="hs-comment">-- | Try to find a sufficient number of KeyPairs that would satisfy a native script.</span><span>
</span><span id="line-328"></span><span>  </span><span class="hs-comment">-- Whenever script can't be satisfied, Nothing is returned</span><span>
</span><span id="line-329"></span><span>  </span><span id="impSatisfyNativeScript"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impSatisfyNativeScript"><span class="hs-identifier hs-type">impSatisfyNativeScript</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-330"></span><span>    </span><span class="hs-comment">-- | Set of Witnesses that have already been satisfied</span><span>
</span><span id="line-331"></span><span>    </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set.Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Witness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-332"></span><span>    </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">NativeScript</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-333"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Witness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyPair</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Witness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-334"></span><span>
</span><span id="line-335"></span><span>  </span><span class="hs-comment">-- | This modifer should change not only the current PParams, but also the future</span><span>
</span><span id="line-336"></span><span>  </span><span class="hs-comment">-- PParams. If the future PParams are not updated, then they will overwrite the</span><span>
</span><span id="line-337"></span><span>  </span><span class="hs-comment">-- mofication of the current PParams at the next epoch.</span><span>
</span><span id="line-338"></span><span>  </span><span id="modifyPParams"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#modifyPParams"><span class="hs-identifier hs-type">modifyPParams</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-339"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">PParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">PParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-340"></span><span>    </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-341"></span><span>  </span><span id="local-6989586621679427652"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#modifyPParams"><span class="hs-identifier hs-var hs-var">modifyPParams</span></a></span><span> </span><span id="local-6989586621679427646"><span class="annot"><span class="annottext">PParams era -&gt; PParams era
</span><a href="#local-6989586621679427646"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
(NewEpochState era -&gt; NewEpochState era) -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#modifyNES"><span class="hs-identifier hs-var">modifyNES</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (NewEpochState era) (EpochState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">curPParamsEpochStateL</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">%~</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era -&gt; PParams era
</span><a href="#local-6989586621679427646"><span class="hs-identifier hs-var">f</span></a></span></span><span>
</span><span id="line-342"></span><span>
</span><span id="line-343"></span><span>  </span><span id="fixupTx"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#fixupTx"><span class="hs-identifier hs-type">fixupTx</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428952"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-344"></span><span>
</span><span id="line-345"></span><span id="local-6989586621679428914"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impLedgerEnv"><span class="hs-identifier hs-type">impLedgerEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428914"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428914"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428914"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">LedgerEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428914"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-346"></span><span id="impLedgerEnv"><span class="annot"><span class="annottext">impLedgerEnv :: forall era.
EraGov era =&gt;
NewEpochState era -&gt; ImpTestM era (LedgerEnv era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impLedgerEnv"><span class="hs-identifier hs-var hs-var">impLedgerEnv</span></a></span></span><span> </span><span id="local-6989586621679427629"><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621679427629"><span class="hs-identifier hs-var">nes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-347"></span><span>  </span><span id="local-6989586621679427628"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679427628"><span class="hs-identifier hs-var">slotNo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">gets</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. ImpTestState era -&gt; SlotNo
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impLastTick"><span class="hs-identifier hs-var">impLastTick</span></a></span><span>
</span><span id="line-348"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span>
</span><span id="line-349"></span><span>    </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">LedgerEnv</span></a></span><span>
</span><span id="line-350"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ledgerSlotNo :: SlotNo
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">ledgerSlotNo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679427628"><span class="hs-identifier hs-var">slotNo</span></a></span><span>
</span><span id="line-351"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ledgerPp :: PParams era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">ledgerPp</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621679427629"><span class="hs-identifier hs-var">nes</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (NewEpochState era) (EpochState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">curPParamsEpochStateL</span></a></span><span>
</span><span id="line-352"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ledgerIx :: TxIx
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">ledgerIx</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; TxIx
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">TxIx</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span>
</span><span id="line-353"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ledgerAccount :: AccountState
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">ledgerAccount</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621679427629"><span class="hs-identifier hs-var">nes</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (NewEpochState era) (EpochState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (EpochState era) AccountState
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">esAccountStateL</span></a></span><span>
</span><span id="line-354"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-355"></span><span>
</span><span id="line-356"></span><span class="hs-comment">-- | Modify the previous PParams in the current state with the given function. For current</span><span>
</span><span id="line-357"></span><span class="hs-comment">-- and future PParams, use `modifyPParams`</span><span>
</span><span id="line-358"></span><span id="local-6989586621679428899"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#modifyPrevPParams"><span class="hs-identifier hs-type">modifyPrevPParams</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-359"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428899"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-360"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">PParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428899"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">PParams</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428899"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-361"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428899"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-362"></span><span id="modifyPrevPParams"><span class="annot"><span class="annottext">modifyPrevPParams :: forall era.
EraGov era =&gt;
(PParams era -&gt; PParams era) -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#modifyPrevPParams"><span class="hs-identifier hs-var hs-var">modifyPrevPParams</span></a></span></span><span> </span><span id="local-6989586621679427617"><span class="annot"><span class="annottext">PParams era -&gt; PParams era
</span><a href="#local-6989586621679427617"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
(NewEpochState era -&gt; NewEpochState era) -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#modifyNES"><span class="hs-identifier hs-var">modifyNES</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (NewEpochState era) (EpochState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">prevPParamsEpochStateL</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">%~</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era -&gt; PParams era
</span><a href="#local-6989586621679427617"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-363"></span><span>
</span><span id="line-364"></span><span class="hs-comment">-- | Logs the current stake distribution</span><span>
</span><span id="line-365"></span><span id="local-6989586621679428897"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#logStakeDistr"><span class="hs-identifier hs-type">logStakeDistr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428897"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-366"></span><span id="logStakeDistr"><span class="annot"><span class="annottext">logStakeDistr :: forall era. ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#logStakeDistr"><span class="hs-identifier hs-var hs-var">logStakeDistr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-367"></span><span>  </span><span id="local-6989586621679427602"><span class="annot"><span class="annottext">Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
</span><a href="#local-6989586621679427602"><span class="hs-identifier hs-var">stakeDistr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (NewEpochState era) (EpochState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
Lens'
  (EpochState era)
  (Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">epochStateIncrStakeDistrL</span></a></span><span>
</span><span id="line-368"></span><span>  </span><span class="annot"><span class="annottext">forall era. HasCallStack =&gt; String -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#logEntry"><span class="hs-identifier hs-var">logEntry</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Stake distr: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. ToExpr a =&gt; a -&gt; String
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/l/testlib/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">showExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Credential 'Staking (EraCrypto era)) (CompactForm Coin)
</span><a href="#local-6989586621679427602"><span class="hs-identifier hs-var">stakeDistr</span></a></span><span>
</span><span id="line-369"></span><span>
</span><span id="line-370"></span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#mkHashVerKeyVRF"><span class="hs-identifier hs-type">mkHashVerKeyVRF</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-371"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679428877"><span class="annot"><a href="#local-6989586621679428877"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-372"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428877"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-373"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-bignum-1.2/src"><span class="hs-identifier hs-type">Integer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-374"></span><span>  </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-crypto-class-2.1.4.0-f9a064a9f4847ae2186cc0b7de9c9032806ff44166e6dee0ed45e502459e8305/share/doc/html/src"><span class="hs-identifier hs-type">Hash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">HASH</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428877"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">VerKeyVRF</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428877"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-375"></span><span id="mkHashVerKeyVRF"><span class="annot"><span class="annottext">mkHashVerKeyVRF :: forall era.
ShelleyEraImp era =&gt;
Integer -&gt; Hash (HASH (EraCrypto era)) (VerKeyVRF (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#mkHashVerKeyVRF"><span class="hs-identifier hs-var hs-var">mkHashVerKeyVRF</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-376"></span><span>  </span><span class="annot"><span class="annottext">forall v h.
(VRFAlgorithm v, HashAlgorithm h) =&gt;
VerKeyVRF v -&gt; Hash h (VerKeyVRF v)
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-crypto-class-2.1.4.0-f9a064a9f4847ae2186cc0b7de9c9032806ff44166e6dee0ed45e502459e8305/share/doc/html/src"><span class="hs-identifier hs-var">VRF.hashVerKeyVRF</span></a></span><span>
</span><span id="line-377"></span><span>    </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall v. VRFAlgorithm v =&gt; SignKeyVRF v -&gt; VerKeyVRF v
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-crypto-class-2.1.4.0-f9a064a9f4847ae2186cc0b7de9c9032806ff44166e6dee0ed45e502459e8305/share/doc/html/src"><span class="hs-identifier hs-var">VRF.deriveVerKeyVRF</span></a></span><span>
</span><span id="line-378"></span><span>    </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall v. VRFAlgorithm v =&gt; Seed -&gt; SignKeyVRF v
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-crypto-class-2.1.4.0-f9a064a9f4847ae2186cc0b7de9c9032806ff44166e6dee0ed45e502459e8305/share/doc/html/src"><span class="hs-identifier hs-var">VRF.genKeyVRF</span></a></span><span>
</span><span id="line-379"></span><span>    </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Seed
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-crypto-class-2.1.4.0-f9a064a9f4847ae2186cc0b7de9c9032806ff44166e6dee0ed45e502459e8305/share/doc/html/src"><span class="hs-identifier hs-var">mkSeedFromBytes</span></a></span><span>
</span><span id="line-380"></span><span>    </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall i. (Integral i, Bits i) =&gt; Int -&gt; i -&gt; ByteString
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">integralToByteStringN</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679427574"><span class="hs-identifier hs-var">seedSize</span></a></span><span>
</span><span id="line-381"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-382"></span><span>    </span><span id="local-6989586621679427574"><span class="annot"><span class="annottext">seedSize :: Int
</span><a href="#local-6989586621679427574"><span class="hs-identifier hs-var hs-var">seedSize</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall v (proxy :: * -&gt; *). DSIGNAlgorithm v =&gt; proxy v -&gt; Word
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-crypto-class-2.1.4.0-f9a064a9f4847ae2186cc0b7de9c9032806ff44166e6dee0ed45e502459e8305/share/doc/html/src"><span class="hs-identifier hs-var">seedSizeDSIGN</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy t
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">DSIGN</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428877"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-383"></span><span>
</span><span id="line-384"></span><span id="local-6989586621679428858"><span id="local-6989586621679428859"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#testKeyHash"><span class="hs-identifier hs-type">testKeyHash</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428859"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428858"><span class="hs-identifier hs-type">kd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428859"><span class="hs-identifier hs-type">c</span></a></span></span></span><span>
</span><span id="line-385"></span><span id="testKeyHash"><span class="annot"><span class="annottext">testKeyHash :: forall c (kd :: KeyRole). Crypto c =&gt; KeyHash kd c
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#testKeyHash"><span class="hs-identifier hs-var hs-var">testKeyHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall c (kd :: KeyRole). Crypto c =&gt; Int -&gt; KeyHash kd c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">mkKeyHash</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-386"></span><span>
</span><span id="line-387"></span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#initShelleyImpNES"><span class="hs-identifier hs-type">initShelleyImpNES</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-388"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679428854"><span class="annot"><a href="#local-6989586621679428854"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-389"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/data-default-class-0.1.2.0-d021275d74faf56efb7a1c98c49b66562c7b07f4d3882878288b6faf38a43071/share/doc/html/src"><span class="hs-identifier hs-type">Default</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">StashedAVVMAddresses</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428854"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-390"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428854"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-391"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-392"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428854"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-393"></span><span id="initShelleyImpNES"><span class="annot"><span class="annottext">initShelleyImpNES :: forall era.
(Default (StashedAVVMAddresses era), ShelleyEraImp era) =&gt;
NewEpochState era
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#initShelleyImpNES"><span class="hs-identifier hs-var hs-var">initShelleyImpNES</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-394"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span>
</span><span id="line-395"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">stashedAVVMAddresses :: StashedAVVMAddresses era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">stashedAVVMAddresses</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Default a =&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/data-default-class-0.1.2.0-d021275d74faf56efb7a1c98c49b66562c7b07f4d3882878288b6faf38a43071/share/doc/html/src"><span class="hs-identifier hs-var">def</span></a></span><span>
</span><span id="line-396"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nesRu :: StrictMaybe (PulsingRewUpdate (EraCrypto era))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">nesRu</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-397"></span><span>        </span><span class="annot"><span class="annottext">forall a. a -&gt; StrictMaybe a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-strict-containers-0.1.3.0-c8c434ba474a408c40a155b68fe1059a1c9196931f80e9c4ade09421da2372fd/share/doc/html/src"><span class="hs-identifier hs-var">SJust</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-398"></span><span>          </span><span class="annot"><span class="annottext">forall era.
EraGov era =&gt;
EpochSize
-&gt; BlocksMade (EraCrypto era)
-&gt; EpochState era
-&gt; Coin
-&gt; ActiveSlotCoeff
-&gt; Word64
-&gt; PulsingRewUpdate (EraCrypto era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">startStep</span></a></span><span>
</span><span id="line-399"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; EpochSize
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-slotting-0.2.0.0-e8312797f023619ba000361257739ea3242d7d9366b817847e018e86b37d28d6/share/doc/html/src"><span class="hs-identifier hs-var">EpochSize</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">432_000</span></span><span class="hs-special">)</span><span>
</span><span id="line-400"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall c. Map (KeyHash 'StakePool c) Natural -&gt; BlocksMade c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">BlocksMade</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k a. k -&gt; a -&gt; Map k a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.singleton</span></a></span><span> </span><span class="annot"><span class="annottext">forall c (kd :: KeyRole). Crypto c =&gt; KeyHash kd c
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#testKeyHash"><span class="hs-identifier hs-var">testKeyHash</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">10</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-401"></span><span>            </span><span class="annot"><span class="annottext">EpochState era
</span><a href="#local-6989586621679427502"><span class="hs-identifier hs-var">epochState</span></a></span><span>
</span><span id="line-402"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">45</span></span><span class="hs-special">)</span><span>
</span><span id="line-403"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Globals -&gt; ActiveSlotCoeff
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">activeSlotCoeff</span></a></span><span> </span><span class="annot"><span class="annottext">Globals
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">testGlobals</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-404"></span><span>            </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">10</span></span><span>
</span><span id="line-405"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nesPd :: PoolDistr (EraCrypto era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">nesPd</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-406"></span><span>        </span><span class="annot"><span class="annottext">forall c.
Map (KeyHash 'StakePool c) (IndividualPoolStake c) -&gt; PoolDistr c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">PoolDistr</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-407"></span><span>          </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.fromList</span></a></span><span>
</span><span id="line-408"></span><span>            </span><span class="hs-special">[</span><span>
</span><span id="line-409"></span><span>              </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">forall c (kd :: KeyRole). Crypto c =&gt; KeyHash kd c
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#testKeyHash"><span class="hs-identifier hs-var">testKeyHash</span></a></span><span>
</span><span id="line-410"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall c. Rational -&gt; Hash c (VerKeyVRF c) -&gt; IndividualPoolStake c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">IndividualPoolStake</span></a></span><span>
</span><span id="line-411"></span><span>                  </span><span class="annot"><span class="annottext">Rational
</span><span class="hs-number">1</span></span><span>
</span><span id="line-412"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
ShelleyEraImp era =&gt;
Integer -&gt; Hash (HASH (EraCrypto era)) (VerKeyVRF (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#mkHashVerKeyVRF"><span class="hs-identifier hs-var">mkHashVerKeyVRF</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679428854"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-413"></span><span>              </span><span class="hs-special">)</span><span>
</span><span id="line-414"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-415"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nesEs :: EpochState era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">nesEs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpochState era
</span><a href="#local-6989586621679427502"><span class="hs-identifier hs-var">epochState</span></a></span><span>
</span><span id="line-416"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nesEL :: EpochNo
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">nesEL</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><span class="hs-number">0</span></span><span>
</span><span id="line-417"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nesBprev :: BlocksMade (EraCrypto era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">nesBprev</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall c. Map (KeyHash 'StakePool c) Natural -&gt; BlocksMade c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">BlocksMade</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k a. k -&gt; a -&gt; Map k a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.singleton</span></a></span><span> </span><span class="annot"><span class="annottext">forall c (kd :: KeyRole). Crypto c =&gt; KeyHash kd c
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#testKeyHash"><span class="hs-identifier hs-var">testKeyHash</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">10</span></span><span class="hs-special">)</span><span>
</span><span id="line-418"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nesBcur :: BlocksMade (EraCrypto era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">nesBcur</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall c. Map (KeyHash 'StakePool c) Natural -&gt; BlocksMade c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">BlocksMade</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-419"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-420"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-421"></span><span>    </span><span id="local-6989586621679427486"><span class="annot"><span class="annottext">pp :: PParams era
</span><a href="#local-6989586621679427486"><span class="hs-identifier hs-var hs-var">pp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-422"></span><span>      </span><span class="annot"><span class="annottext">forall era. EraPParams era =&gt; PParams era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">emptyPParams</span></a></span><span>
</span><span id="line-423"></span><span>        </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraPParams era =&gt; Lens' (PParams era) Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">ppMinFeeAL</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">44</span></span><span>
</span><span id="line-424"></span><span>        </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraPParams era =&gt; Lens' (PParams era) Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">ppMinFeeBL</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">155_381</span></span><span>
</span><span id="line-425"></span><span>    </span><span id="local-6989586621679427502"><span class="annot"><span class="annottext">epochState :: EpochState era
</span><a href="#local-6989586621679427502"><span class="hs-identifier hs-var hs-var">epochState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-426"></span><span>      </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">EpochState</span></a></span><span>
</span><span id="line-427"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">esAccountState :: AccountState
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">esAccountState</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-428"></span><span>            </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">AccountState</span></a></span><span>
</span><span id="line-429"></span><span>              </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">asTreasury :: Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">asTreasury</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">10_000</span></span><span>
</span><span id="line-430"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">asReserves :: Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">asReserves</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1_000</span></span><span>
</span><span id="line-431"></span><span>              </span><span class="hs-special">}</span><span>
</span><span id="line-432"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">esSnapshots :: SnapShots (EraCrypto era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">esSnapshots</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall c. SnapShots c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">emptySnapShots</span></a></span><span>
</span><span id="line-433"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">esLState :: LedgerState era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">esLState</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-434"></span><span>            </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">LedgerState</span></a></span><span>
</span><span id="line-435"></span><span>              </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">lsUTxOState :: UTxOState era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">lsUTxOState</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-436"></span><span>                  </span><span class="annot"><span class="annottext">forall era.
EraTxOut era =&gt;
PParams era
-&gt; UTxO era
-&gt; Coin
-&gt; Coin
-&gt; GovState era
-&gt; Coin
-&gt; UTxOState era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">smartUTxOState</span></a></span><span>
</span><span id="line-437"></span><span>                    </span><span class="annot"><span class="annottext">forall era. EraPParams era =&gt; PParams era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">emptyPParams</span></a></span><span>
</span><span id="line-438"></span><span>                    </span><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621679427473"><span class="hs-identifier hs-var">utxo</span></a></span><span>
</span><span id="line-439"></span><span>                    </span><span class="annot"><span class="annottext">forall t. Val t =&gt; t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">zero</span></a></span><span>
</span><span id="line-440"></span><span>                    </span><span class="annot"><span class="annottext">forall t. Val t =&gt; t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">zero</span></a></span><span>
</span><span id="line-441"></span><span>                    </span><span class="annot"><span class="annottext">forall era. EraGov era =&gt; GovState era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">emptyGovState</span></a></span><span>
</span><span id="line-442"></span><span>                    </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-443"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lsCertState :: CertState era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">lsCertState</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Default a =&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/data-default-class-0.1.2.0-d021275d74faf56efb7a1c98c49b66562c7b07f4d3882878288b6faf38a43071/share/doc/html/src"><span class="hs-identifier hs-var">def</span></a></span><span>
</span><span id="line-444"></span><span>              </span><span class="hs-special">}</span><span>
</span><span id="line-445"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">esNonMyopic :: NonMyopic (EraCrypto era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">esNonMyopic</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Default a =&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/data-default-class-0.1.2.0-d021275d74faf56efb7a1c98c49b66562c7b07f4d3882878288b6faf38a43071/share/doc/html/src"><span class="hs-identifier hs-var">def</span></a></span><span>
</span><span id="line-446"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-447"></span><span>        </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">prevPParamsEpochStateL</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621679427486"><span class="hs-identifier hs-var">pp</span></a></span><span>
</span><span id="line-448"></span><span>        </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">curPParamsEpochStateL</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621679427486"><span class="hs-identifier hs-var">pp</span></a></span><span>
</span><span id="line-449"></span><span>    </span><span id="local-6989586621679427473"><span class="annot"><span class="annottext">utxo :: UTxO era
</span><a href="#local-6989586621679427473"><span class="hs-identifier hs-var hs-var">utxo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-450"></span><span>
</span><span id="line-451"></span><span id="local-6989586621679428792"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#mkTxId"><span class="hs-identifier hs-type">mkTxId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428792"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428792"><span class="hs-identifier hs-type">c</span></a></span></span><span>
</span><span id="line-452"></span><span id="mkTxId"><span class="annot"><span class="annottext">mkTxId :: forall c. Crypto c =&gt; Int -&gt; TxId c
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#mkTxId"><span class="hs-identifier hs-var hs-var">mkTxId</span></a></span></span><span> </span><span id="local-6989586621679427463"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679427463"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall c. SafeHash c EraIndependentTxBody -&gt; TxId c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">TxId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall c a. Crypto c =&gt; Proxy c -&gt; Int -&gt; SafeHash c a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">mkDummySafeHash</span></a></span><span> </span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy t
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679427463"><span class="hs-identifier hs-var">idx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-453"></span><span>
</span><span id="line-454"></span><span class="hs-keyword">instance</span><span>
</span><span id="line-455"></span><span>  </span><span id="local-6989586621679427329"><span id="local-6989586621679428576"><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Crypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428576"><span class="hs-identifier hs-type">c</span></a></span><span>
</span><span id="line-456"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-crypto-class-2.1.4.0-f9a064a9f4847ae2186cc0b7de9c9032806ff44166e6dee0ed45e502459e8305/share/doc/html/src"><span class="hs-identifier hs-type">SigDSIGN</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">DSIGN</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428576"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-457"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-crypto-class-2.1.4.0-f9a064a9f4847ae2186cc0b7de9c9032806ff44166e6dee0ed45e502459e8305/share/doc/html/src"><span class="hs-identifier hs-type">VerKeyDSIGN</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">DSIGN</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428576"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-458"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">DSIGN</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428576"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-crypto-class-2.1.4.0-f9a064a9f4847ae2186cc0b7de9c9032806ff44166e6dee0ed45e502459e8305/share/doc/html/src"><span class="hs-identifier hs-type">Ed25519DSIGN</span></a></span><span>
</span><span id="line-459"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-crypto-class-2.1.4.0-f9a064a9f4847ae2186cc0b7de9c9032806ff44166e6dee0ed45e502459e8305/share/doc/html/src"><span class="hs-identifier hs-type">Signable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">DSIGN</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428576"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-crypto-class-2.1.4.0-f9a064a9f4847ae2186cc0b7de9c9032806ff44166e6dee0ed45e502459e8305/share/doc/html/src"><span class="hs-identifier hs-type">Hash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">HASH</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428576"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraIndependentTxBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-460"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-461"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">ShelleyEra</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428576"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-462"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-463"></span><span>  </span><span id="local-6989586621679426789"><span class="annot"><span class="annottext">initImpNES :: NewEpochState (ShelleyEra c)
</span><a href="#local-6989586621679426789"><span class="hs-identifier hs-var hs-var hs-var hs-var">initImpNES</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
(Default (StashedAVVMAddresses era), ShelleyEraImp era) =&gt;
NewEpochState era
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#initShelleyImpNES"><span class="hs-identifier hs-var">initShelleyImpNES</span></a></span><span>
</span><span id="line-464"></span><span>
</span><span id="line-465"></span><span>  </span><span id="local-6989586621679426762"><span class="annot"><span class="annottext">impSatisfyNativeScript :: Set (KeyHash 'Witness (EraCrypto (ShelleyEra c)))
-&gt; NativeScript (ShelleyEra c)
-&gt; ImpTestM
     (ShelleyEra c)
     (Maybe
        (Map
           (KeyHash 'Witness (EraCrypto (ShelleyEra c)))
           (KeyPair 'Witness (EraCrypto (ShelleyEra c)))))
</span><a href="#local-6989586621679426762"><span class="hs-identifier hs-var hs-var hs-var hs-var">impSatisfyNativeScript</span></a></span></span><span> </span><span id="local-6989586621679426761"><span class="annot"><span class="annottext">Set (KeyHash 'Witness (EraCrypto (ShelleyEra c)))
</span><a href="#local-6989586621679426761"><span class="hs-identifier hs-var">providedVKeyHashes</span></a></span></span><span> </span><span id="local-6989586621679426760"><span class="annot"><span class="annottext">NativeScript (ShelleyEra c)
</span><a href="#local-6989586621679426760"><span class="hs-identifier hs-var">script</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-466"></span><span>    </span><span id="local-6989586621679426759"><span class="annot"><span class="annottext">Map
  (KeyHash 'Witness (EraCrypto (ShelleyEra c))) (KeyPair 'Witness c)
</span><a href="#local-6989586621679426759"><span class="hs-identifier hs-var">keyPairs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">gets</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
ImpTestState era
-&gt; forall (k :: KeyRole).
   Map (KeyHash k (EraCrypto era)) (KeyPair k (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impKeyPairs"><span class="hs-identifier hs-var">impKeyPairs</span></a></span><span>
</span><span id="line-467"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-468"></span><span>      </span><span id="local-6989586621679426758"><span class="annot"><span class="annottext">satisfyMOf :: Int
-&gt; [MultiSig (ShelleyEra c)]
-&gt; Maybe (Map (KeyHash 'Witness c) (KeyPair 'Witness c))
</span><a href="#local-6989586621679426758"><span class="hs-identifier hs-var hs-var">satisfyMOf</span></a></span></span><span> </span><span id="local-6989586621679426757"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679426757"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-469"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679426757"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">&lt;=</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-470"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-471"></span><span>      </span><span class="annot"><a href="#local-6989586621679426758"><span class="hs-identifier hs-var">satisfyMOf</span></a></span><span> </span><span id="local-6989586621679426755"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679426755"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679426754"><span class="annot"><span class="annottext">MultiSig (ShelleyEra c)
</span><a href="#local-6989586621679426754"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-glyph hs-type">:</span></a></span><span> </span><span id="local-6989586621679426753"><span class="annot"><span class="annottext">[MultiSig (ShelleyEra c)]
</span><a href="#local-6989586621679426753"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-472"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MultiSig (ShelleyEra c)
-&gt; Maybe (Map (KeyHash 'Witness c) (KeyPair 'Witness c))
</span><a href="#local-6989586621679426752"><span class="hs-identifier hs-var">satisfyScript</span></a></span><span> </span><span class="annot"><span class="annottext">MultiSig (ShelleyEra c)
</span><a href="#local-6989586621679426754"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-473"></span><span>          </span><span class="annot"><span class="annottext">Maybe (Map (KeyHash 'Witness c) (KeyPair 'Witness c))
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; [MultiSig (ShelleyEra c)]
-&gt; Maybe (Map (KeyHash 'Witness c) (KeyPair 'Witness c))
</span><a href="#local-6989586621679426758"><span class="hs-identifier hs-var">satisfyMOf</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679426755"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">[MultiSig (ShelleyEra c)]
</span><a href="#local-6989586621679426753"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-474"></span><span>          </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679426751"><span class="annot"><span class="annottext">Map (KeyHash 'Witness c) (KeyPair 'Witness c)
</span><a href="#local-6989586621679426751"><span class="hs-identifier hs-var">kps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-475"></span><span>            </span><span id="local-6989586621679426750"><span class="annot"><span class="annottext">Map (KeyHash 'Witness c) (KeyPair 'Witness c)
</span><a href="#local-6989586621679426750"><span class="hs-identifier hs-var">kps'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; [MultiSig (ShelleyEra c)]
-&gt; Maybe (Map (KeyHash 'Witness c) (KeyPair 'Witness c))
</span><a href="#local-6989586621679426758"><span class="hs-identifier hs-var">satisfyMOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679426755"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[MultiSig (ShelleyEra c)]
</span><a href="#local-6989586621679426753"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-476"></span><span>            </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'Witness c) (KeyPair 'Witness c)
</span><a href="#local-6989586621679426751"><span class="hs-identifier hs-var">kps</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash 'Witness c) (KeyPair 'Witness c)
</span><a href="#local-6989586621679426750"><span class="hs-identifier hs-var">kps'</span></a></span><span>
</span><span id="line-477"></span><span>      </span><span id="local-6989586621679426752"><span class="annot"><span class="annottext">satisfyScript :: MultiSig (ShelleyEra c)
-&gt; Maybe (Map (KeyHash 'Witness c) (KeyPair 'Witness c))
</span><a href="#local-6989586621679426752"><span class="hs-identifier hs-var hs-var">satisfyScript</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-478"></span><span>        </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">RequireSignature</span></a></span><span> </span><span id="local-6989586621679426748"><span class="annot"><span class="annottext">KeyHash 'Witness (EraCrypto (ShelleyEra c))
</span><a href="#local-6989586621679426748"><span class="hs-identifier hs-var">keyHash</span></a></span></span><span>
</span><span id="line-479"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">KeyHash 'Witness (EraCrypto (ShelleyEra c))
</span><a href="#local-6989586621679426748"><span class="hs-identifier hs-var">keyHash</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-operator hs-var">`Set.member`</span></a></span><span> </span><span class="annot"><span class="annottext">Set (KeyHash 'Witness (EraCrypto (ShelleyEra c)))
</span><a href="#local-6989586621679426761"><span class="hs-identifier hs-var">providedVKeyHashes</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-480"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-481"></span><span>              </span><span id="local-6989586621679426746"><span class="annot"><span class="annottext">KeyPair 'Witness c
</span><a href="#local-6989586621679426746"><span class="hs-identifier hs-var">keyPair</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'Witness (EraCrypto (ShelleyEra c))
</span><a href="#local-6989586621679426748"><span class="hs-identifier hs-var">keyHash</span></a></span><span> </span><span class="annot"><span class="annottext">Map
  (KeyHash 'Witness (EraCrypto (ShelleyEra c))) (KeyPair 'Witness c)
</span><a href="#local-6989586621679426759"><span class="hs-identifier hs-var">keyPairs</span></a></span><span>
</span><span id="line-482"></span><span>              </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall k a. k -&gt; a -&gt; Map k a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.singleton</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'Witness (EraCrypto (ShelleyEra c))
</span><a href="#local-6989586621679426748"><span class="hs-identifier hs-var">keyHash</span></a></span><span> </span><span class="annot"><span class="annottext">KeyPair 'Witness c
</span><a href="#local-6989586621679426746"><span class="hs-identifier hs-var">keyPair</span></a></span><span>
</span><span id="line-483"></span><span>        </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">RequireAllOf</span></a></span><span> </span><span id="local-6989586621679426743"><span class="annot"><span class="annottext">[MultiSig (ShelleyEra c)]
</span><a href="#local-6989586621679426743"><span class="hs-identifier hs-var">ss</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; [MultiSig (ShelleyEra c)]
-&gt; Maybe (Map (KeyHash 'Witness c) (KeyPair 'Witness c))
</span><a href="#local-6989586621679426758"><span class="hs-identifier hs-var">satisfyMOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">length</span></a></span><span> </span><span class="annot"><span class="annottext">[MultiSig (ShelleyEra c)]
</span><a href="#local-6989586621679426743"><span class="hs-identifier hs-var">ss</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[MultiSig (ShelleyEra c)]
</span><a href="#local-6989586621679426743"><span class="hs-identifier hs-var">ss</span></a></span><span>
</span><span id="line-484"></span><span>        </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">RequireAnyOf</span></a></span><span> </span><span id="local-6989586621679426740"><span class="annot"><span class="annottext">[MultiSig (ShelleyEra c)]
</span><a href="#local-6989586621679426740"><span class="hs-identifier hs-var">ss</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; [MultiSig (ShelleyEra c)]
-&gt; Maybe (Map (KeyHash 'Witness c) (KeyPair 'Witness c))
</span><a href="#local-6989586621679426758"><span class="hs-identifier hs-var">satisfyMOf</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">[MultiSig (ShelleyEra c)]
</span><a href="#local-6989586621679426740"><span class="hs-identifier hs-var">ss</span></a></span><span>
</span><span id="line-485"></span><span>        </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">RequireMOf</span></a></span><span> </span><span id="local-6989586621679426738"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679426738"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621679426737"><span class="annot"><span class="annottext">[MultiSig (ShelleyEra c)]
</span><a href="#local-6989586621679426737"><span class="hs-identifier hs-var">ss</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; [MultiSig (ShelleyEra c)]
-&gt; Maybe (Map (KeyHash 'Witness c) (KeyPair 'Witness c))
</span><a href="#local-6989586621679426758"><span class="hs-identifier hs-var">satisfyMOf</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679426738"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">[MultiSig (ShelleyEra c)]
</span><a href="#local-6989586621679426737"><span class="hs-identifier hs-var">ss</span></a></span><span>
</span><span id="line-486"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">MultiSig (ShelleyEra c)
-&gt; Maybe (Map (KeyHash 'Witness c) (KeyPair 'Witness c))
</span><a href="#local-6989586621679426752"><span class="hs-identifier hs-var">satisfyScript</span></a></span><span> </span><span class="annot"><span class="annottext">NativeScript (ShelleyEra c)
</span><a href="#local-6989586621679426760"><span class="hs-identifier hs-var">script</span></a></span><span>
</span><span id="line-487"></span><span>
</span><span id="line-488"></span><span>  </span><span id="local-6989586621679426728"><span class="annot"><span class="annottext">fixupTx :: HasCallStack =&gt;
Tx (ShelleyEra c) -&gt; ImpTestM (ShelleyEra c) (Tx (ShelleyEra c))
</span><a href="#local-6989586621679426728"><span class="hs-identifier hs-var hs-var hs-var hs-var">fixupTx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
(ShelleyEraImp era, HasCallStack) =&gt;
Tx era -&gt; ImpTestM era (Tx era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#shelleyFixupTx"><span class="hs-identifier hs-var">shelleyFixupTx</span></a></span><span>
</span><span id="line-489"></span><span>
</span><span id="line-490"></span><span id="local-6989586621679428564"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getAdaPots"><span class="hs-identifier hs-type">getAdaPots</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428564"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraTxOut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428564"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428564"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">AdaPots</span></a></span></span><span>
</span><span id="line-491"></span><span id="getAdaPots"><span class="annot"><span class="annottext">getAdaPots :: forall era. (EraGov era, EraTxOut era) =&gt; ImpTestM era AdaPots
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getAdaPots"><span class="hs-identifier hs-var hs-var">getAdaPots</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era. (EraTxOut era, EraGov era) =&gt; EpochState era -&gt; AdaPots
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">totalAdaPotsES</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (NewEpochState era) (EpochState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">nesEsL</span></a></span><span>
</span><span id="line-492"></span><span>
</span><span id="line-493"></span><span class="hs-comment">-- | Figure out all the Byron Addresses that need witnesses as well as all of the</span><span>
</span><span id="line-494"></span><span class="hs-comment">-- KeyHashes for Shelley Key witnesses that are required.</span><span>
</span><span id="line-495"></span><span id="local-6989586621679428556"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impWitsVKeyNeeded"><span class="hs-identifier hs-type">impWitsVKeyNeeded</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-496"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraUTxO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428556"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-497"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxBody</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428556"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-498"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span>
</span><span id="line-499"></span><span>    </span><span class="annot"><a href="#local-6989586621679428556"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-500"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set.Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">BootstrapAddress</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428556"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Byron Based Addresses</span><span>
</span><span id="line-501"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Set.Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Witness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428556"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Shelley Based KeyHashes</span><span>
</span><span id="line-502"></span><span>    </span><span class="hs-special">)</span></span><span>
</span><span id="line-503"></span><span id="impWitsVKeyNeeded"><span class="annot"><span class="annottext">impWitsVKeyNeeded :: forall era.
EraUTxO era =&gt;
TxBody era
-&gt; ImpTestM
     era
     (Set (BootstrapAddress (EraCrypto era)),
      Set (KeyHash 'Witness (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impWitsVKeyNeeded"><span class="hs-identifier hs-var hs-var">impWitsVKeyNeeded</span></a></span></span><span> </span><span id="local-6989586621679426692"><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621679426692"><span class="hs-identifier hs-var">txBody</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-504"></span><span>  </span><span id="local-6989586621679426691"><span class="annot"><span class="annottext">LedgerState era
</span><a href="#local-6989586621679426691"><span class="hs-identifier hs-var">ls</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Lens' (NewEpochState era) (EpochState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (EpochState era) (LedgerState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">esLStateL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-505"></span><span>  </span><span id="local-6989586621679426688"><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621679426688"><span class="hs-identifier hs-var">utxo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era. ImpTestM era (UTxO era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getUTxO"><span class="hs-identifier hs-var">getUTxO</span></a></span><span>
</span><span id="line-506"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679426687"><span class="annot"><span class="annottext">toBootAddr :: TxIn (EraCrypto era) -&gt; Maybe (BootstrapAddress (EraCrypto era))
</span><a href="#local-6989586621679426687"><span class="hs-identifier hs-var hs-var">toBootAddr</span></a></span></span><span> </span><span id="local-6989586621679426686"><span class="annot"><span class="annottext">TxIn (EraCrypto era)
</span><a href="#local-6989586621679426686"><span class="hs-identifier hs-var">txIn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-507"></span><span>        </span><span id="local-6989586621679426685"><span class="annot"><span class="annottext">TxOut era
</span><a href="#local-6989586621679426685"><span class="hs-identifier hs-var">txOut</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era. TxIn (EraCrypto era) -&gt; UTxO era -&gt; Maybe (TxOut era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">txinLookup</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn (EraCrypto era)
</span><a href="#local-6989586621679426686"><span class="hs-identifier hs-var">txIn</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621679426688"><span class="hs-identifier hs-var">utxo</span></a></span><span>
</span><span id="line-508"></span><span>        </span><span class="annot"><span class="annottext">TxOut era
</span><a href="#local-6989586621679426685"><span class="hs-identifier hs-var">txOut</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
EraTxOut era =&gt;
SimpleGetter (TxOut era) (Maybe (BootstrapAddress (EraCrypto era)))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">bootAddrTxOutF</span></a></span><span>
</span><span id="line-509"></span><span>      </span><span id="local-6989586621679426683"><span class="annot"><span class="annottext">bootAddrs :: Set (BootstrapAddress (EraCrypto era))
</span><a href="#local-6989586621679426683"><span class="hs-identifier hs-var hs-var">bootAddrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">mapMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn (EraCrypto era) -&gt; Maybe (BootstrapAddress (EraCrypto era))
</span><a href="#local-6989586621679426687"><span class="hs-identifier hs-var">toBootAddr</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Set a -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.toList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621679426692"><span class="hs-identifier hs-var">txBody</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
EraTxBody era =&gt;
SimpleGetter (TxBody era) (Set (TxIn (EraCrypto era)))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">spendableInputsTxBodyF</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-510"></span><span>      </span><span id="local-6989586621679426679"><span class="annot"><span class="annottext">bootKeyHashes :: Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621679426679"><span class="hs-identifier hs-var hs-var">bootKeyHashes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b a. Ord b =&gt; (a -&gt; b) -&gt; Set a -&gt; Set b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (a :: KeyRole -&gt; * -&gt; *) (r :: KeyRole) c (r' :: KeyRole).
HasKeyRole a =&gt;
a r c -&gt; a r' c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">coerceKeyRole</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall c. Crypto c =&gt; BootstrapAddress c -&gt; KeyHash 'Payment c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">bootstrapKeyHash</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set (BootstrapAddress (EraCrypto era))
</span><a href="#local-6989586621679426683"><span class="hs-identifier hs-var">bootAddrs</span></a></span><span>
</span><span id="line-511"></span><span>      </span><span id="local-6989586621679426676"><span class="annot"><span class="annottext">allKeyHashes :: Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621679426676"><span class="hs-identifier hs-var hs-var">allKeyHashes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-512"></span><span>        </span><span class="annot"><span class="annottext">forall era.
EraUTxO era =&gt;
CertState era
-&gt; UTxO era -&gt; TxBody era -&gt; Set (KeyHash 'Witness (EraCrypto era))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">getWitsVKeyNeeded</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LedgerState era
</span><a href="#local-6989586621679426691"><span class="hs-identifier hs-var">ls</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (LedgerState era) (CertState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">lsCertStateL</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LedgerState era
</span><a href="#local-6989586621679426691"><span class="hs-identifier hs-var">ls</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (LedgerState era) (UTxOState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">lsUTxOStateL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (UTxOState era) (UTxO era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">utxosUtxoL</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621679426692"><span class="hs-identifier hs-var">txBody</span></a></span><span>
</span><span id="line-513"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set (BootstrapAddress (EraCrypto era))
</span><a href="#local-6989586621679426683"><span class="hs-identifier hs-var">bootAddrs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621679426676"><span class="hs-identifier hs-var">allKeyHashes</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-operator hs-var">Set.\\</span></a></span><span> </span><span class="annot"><span class="annottext">Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621679426679"><span class="hs-identifier hs-var">bootKeyHashes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-514"></span><span>
</span><span id="line-515"></span><span class="hs-keyword">data</span><span> </span><span id="ImpTestEnv"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestEnv"><span class="hs-identifier hs-var">ImpTestEnv</span></a></span></span><span> </span><span id="local-6989586621679428529"><span class="annot"><a href="#local-6989586621679428529"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ImpTestEnv"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestEnv"><span class="hs-identifier hs-var">ImpTestEnv</span></a></span></span><span>
</span><span id="line-516"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="iteState"><span class="annot"><span class="annottext">forall era. ImpTestEnv era -&gt; IORef (ImpTestState era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#iteState"><span class="hs-identifier hs-var hs-var">iteState</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">IORef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428529"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-517"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="iteDoTxFixup"><span class="annot"><span class="annottext">forall era. ImpTestEnv era -&gt; Bool
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#iteDoTxFixup"><span class="hs-identifier hs-var hs-var">iteDoTxFixup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-518"></span><span>  </span><span class="hs-comment">-- ^ This flag is used to toggle the fixing up of transactions. If it</span><span>
</span><span id="line-519"></span><span>  </span><span class="hs-comment">-- is set to False then any transaction should be submitted as-is.</span><span>
</span><span id="line-520"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-521"></span><span>
</span><span id="line-522"></span><span id="local-6989586621679428524"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#iteDoTxFixupL"><span class="hs-identifier hs-type">iteDoTxFixupL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestEnv"><span class="hs-identifier hs-type">ImpTestEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428524"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Bool</span></a></span></span><span>
</span><span id="line-523"></span><span id="iteDoTxFixupL"><span class="annot"><span class="annottext">iteDoTxFixupL :: forall era. Lens' (ImpTestEnv era) Bool
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#iteDoTxFixupL"><span class="hs-identifier hs-var hs-var">iteDoTxFixupL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier hs-var">lens</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. ImpTestEnv era -&gt; Bool
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#iteDoTxFixup"><span class="hs-identifier hs-var">iteDoTxFixup</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679426667"><span class="annot"><span class="annottext">ImpTestEnv era
</span><a href="#local-6989586621679426667"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679426666"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679426666"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ImpTestEnv era
</span><a href="#local-6989586621679426667"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">iteDoTxFixup :: Bool
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#iteDoTxFixup"><span class="hs-identifier hs-var">iteDoTxFixup</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679426666"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-524"></span><span>
</span><span id="line-525"></span><span class="hs-keyword">newtype</span><span> </span><span id="ImpTestM"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-var">ImpTestM</span></a></span></span><span> </span><span id="local-6989586621679428910"><span class="annot"><a href="#local-6989586621679428910"><span class="hs-identifier hs-type">era</span></a></span></span><span> </span><span id="local-6989586621679428521"><span class="annot"><a href="#local-6989586621679428521"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ImpTestM"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-var">ImpTestM</span></a></span></span><span> </span><span class="hs-special">{</span><span id="unImpTestM"><span class="annot"><span class="annottext">forall era a.
ImpTestM era a -&gt; ReaderT (ImpTestEnv era) (GenT IO) a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#unImpTestM"><span class="hs-identifier hs-var hs-var">unImpTestM</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-type">ReaderT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestEnv"><span class="hs-identifier hs-type">ImpTestEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428910"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/quickcheck-transformer-0.3.1.2-37a3ba1358fd0d06b7c9d052985e623cc8c8103003d289ff2443df2cbc4aad62/share/doc/html/src"><span class="hs-identifier hs-type">GenT</span></a></span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">IO</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679428521"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-526"></span><span>  </span><span class="hs-keyword">deriving</span><span>
</span><span id="line-527"></span><span>    </span><span class="hs-special">(</span><span> </span><span id="local-6989586621679426656"><span id="local-6989586621679426662"><span class="annot"><span class="annottext">forall a b. a -&gt; ImpTestM era b -&gt; ImpTestM era a
forall a b. (a -&gt; b) -&gt; ImpTestM era a -&gt; ImpTestM era b
forall era a b. a -&gt; ImpTestM era b -&gt; ImpTestM era a
forall era a b. (a -&gt; b) -&gt; ImpTestM era a -&gt; ImpTestM era b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
&lt;$ :: forall a b. a -&gt; ImpTestM era b -&gt; ImpTestM era a
$c&lt;$ :: forall era a b. a -&gt; ImpTestM era b -&gt; ImpTestM era a
fmap :: forall a b. (a -&gt; b) -&gt; ImpTestM era a -&gt; ImpTestM era b
$cfmap :: forall era a b. (a -&gt; b) -&gt; ImpTestM era a -&gt; ImpTestM era b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></a></span></span></span><span>
</span><span id="line-528"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679426623"><span id="local-6989586621679426628"><span id="local-6989586621679426633"><span id="local-6989586621679426638"><span id="local-6989586621679426644"><span class="annot"><span class="annottext">forall era. Functor (ImpTestM era)
forall a. a -&gt; ImpTestM era a
forall era a. a -&gt; ImpTestM era a
forall a b. ImpTestM era a -&gt; ImpTestM era b -&gt; ImpTestM era a
forall a b. ImpTestM era a -&gt; ImpTestM era b -&gt; ImpTestM era b
forall a b.
ImpTestM era (a -&gt; b) -&gt; ImpTestM era a -&gt; ImpTestM era b
forall era a b. ImpTestM era a -&gt; ImpTestM era b -&gt; ImpTestM era a
forall era a b. ImpTestM era a -&gt; ImpTestM era b -&gt; ImpTestM era b
forall era a b.
ImpTestM era (a -&gt; b) -&gt; ImpTestM era a -&gt; ImpTestM era b
forall a b c.
(a -&gt; b -&gt; c) -&gt; ImpTestM era a -&gt; ImpTestM era b -&gt; ImpTestM era c
forall era a b c.
(a -&gt; b -&gt; c) -&gt; ImpTestM era a -&gt; ImpTestM era b -&gt; ImpTestM era c
forall (f :: * -&gt; *).
Functor f
-&gt; (forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
&lt;* :: forall a b. ImpTestM era a -&gt; ImpTestM era b -&gt; ImpTestM era a
$c&lt;* :: forall era a b. ImpTestM era a -&gt; ImpTestM era b -&gt; ImpTestM era a
*&gt; :: forall a b. ImpTestM era a -&gt; ImpTestM era b -&gt; ImpTestM era b
$c*&gt; :: forall era a b. ImpTestM era a -&gt; ImpTestM era b -&gt; ImpTestM era b
liftA2 :: forall a b c.
(a -&gt; b -&gt; c) -&gt; ImpTestM era a -&gt; ImpTestM era b -&gt; ImpTestM era c
$cliftA2 :: forall era a b c.
(a -&gt; b -&gt; c) -&gt; ImpTestM era a -&gt; ImpTestM era b -&gt; ImpTestM era c
&lt;*&gt; :: forall a b.
ImpTestM era (a -&gt; b) -&gt; ImpTestM era a -&gt; ImpTestM era b
$c&lt;*&gt; :: forall era a b.
ImpTestM era (a -&gt; b) -&gt; ImpTestM era a -&gt; ImpTestM era b
pure :: forall a. a -&gt; ImpTestM era a
$cpure :: forall era a. a -&gt; ImpTestM era a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></a></span></span></span></span></span></span><span>
</span><span id="line-529"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679426592"><span id="local-6989586621679426597"><span id="local-6989586621679426603"><span class="annot"><span class="annottext">forall era. Applicative (ImpTestM era)
forall a. a -&gt; ImpTestM era a
forall era a. a -&gt; ImpTestM era a
forall a b. ImpTestM era a -&gt; ImpTestM era b -&gt; ImpTestM era b
forall a b.
ImpTestM era a -&gt; (a -&gt; ImpTestM era b) -&gt; ImpTestM era b
forall era a b. ImpTestM era a -&gt; ImpTestM era b -&gt; ImpTestM era b
forall era a b.
ImpTestM era a -&gt; (a -&gt; ImpTestM era b) -&gt; ImpTestM era b
forall (m :: * -&gt; *).
Applicative m
-&gt; (forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
return :: forall a. a -&gt; ImpTestM era a
$creturn :: forall era a. a -&gt; ImpTestM era a
&gt;&gt; :: forall a b. ImpTestM era a -&gt; ImpTestM era b -&gt; ImpTestM era b
$c&gt;&gt; :: forall era a b. ImpTestM era a -&gt; ImpTestM era b -&gt; ImpTestM era b
&gt;&gt;= :: forall a b.
ImpTestM era a -&gt; (a -&gt; ImpTestM era b) -&gt; ImpTestM era b
$c&gt;&gt;= :: forall era a b.
ImpTestM era a -&gt; (a -&gt; ImpTestM era b) -&gt; ImpTestM era b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></a></span></span></span></span><span>
</span><span id="line-530"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679426580"><span class="annot"><span class="annottext">forall era. Monad (ImpTestM era)
forall a. IO a -&gt; ImpTestM era a
forall era a. IO a -&gt; ImpTestM era a
forall (m :: * -&gt; *).
Monad m -&gt; (forall a. IO a -&gt; m a) -&gt; MonadIO m
liftIO :: forall a. IO a -&gt; ImpTestM era a
$cliftIO :: forall era a. IO a -&gt; ImpTestM era a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadIO</span></a></span></span><span>
</span><span id="line-531"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679426567"><span class="annot"><span class="annottext">forall era. MonadIO (ImpTestM era)
forall b.
((forall a. ImpTestM era a -&gt; IO a) -&gt; IO b) -&gt; ImpTestM era b
forall era b.
((forall a. ImpTestM era a -&gt; IO a) -&gt; IO b) -&gt; ImpTestM era b
forall (m :: * -&gt; *).
MonadIO m
-&gt; (forall b. ((forall a. m a -&gt; IO a) -&gt; IO b) -&gt; m b)
-&gt; MonadUnliftIO m
withRunInIO :: forall b.
((forall a. ImpTestM era a -&gt; IO a) -&gt; IO b) -&gt; ImpTestM era b
$cwithRunInIO :: forall era b.
((forall a. ImpTestM era a -&gt; IO a) -&gt; IO b) -&gt; ImpTestM era b
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/unliftio-core-0.2.1.0-43d04bbaa41559f7f1361069ad1775e341ff50d95412902c1522767d45f0d7a6/share/doc/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadUnliftIO</span></a></span></span><span>
</span><span id="line-532"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679426543"><span id="local-6989586621679426548"><span id="local-6989586621679426554"><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-type">MonadReader</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestEnv"><span class="hs-identifier hs-type">ImpTestEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428910"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-533"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-534"></span><span>
</span><span id="line-535"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679428435"><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">MonadFail</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428435"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-536"></span><span>  </span><span id="local-6989586621679426526"><span class="annot"><span class="annottext">fail :: forall a. String -&gt; ImpTestM era a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">fail</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. (HasCallStack, MonadIO m) =&gt; String -&gt; m a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">assertFailure</span></a></span><span>
</span><span id="line-537"></span><span>
</span><span id="line-538"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679426519"><span id="local-6989586621679428911"><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-type">MonadState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428911"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428911"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-539"></span><span>  </span><span id="local-6989586621679426510"><span class="annot"><span class="annottext">get :: ImpTestM era (ImpTestState era)
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">get</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era a.
ReaderT (ImpTestEnv era) (GenT IO) a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-var">ImpTestM</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-540"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. IORef a -&gt; IO a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">readIORef</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. ImpTestEnv era -&gt; IORef (ImpTestState era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#iteState"><span class="hs-identifier hs-var">iteState</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall r (m :: * -&gt; *). MonadReader r m =&gt; m r
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">ask</span></a></span><span>
</span><span id="line-541"></span><span>  </span><span id="local-6989586621679426497"><span class="annot"><span class="annottext">put :: ImpTestState era -&gt; ImpTestM era ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">put</span></a></span></span><span> </span><span id="local-6989586621679426495"><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679426495"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era a.
ReaderT (ImpTestEnv era) (GenT IO) a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-var">ImpTestM</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-542"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. IORef a -&gt; a -&gt; IO ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">writeIORef</span></a></span><span> </span><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679426495"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. ImpTestEnv era -&gt; IORef (ImpTestState era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#iteState"><span class="hs-identifier hs-var">iteState</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall r (m :: * -&gt; *). MonadReader r m =&gt; m r
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">ask</span></a></span><span>
</span><span id="line-543"></span><span>
</span><span id="line-544"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679428413"><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hspec-core-2.11.7-8079ad8b174397fbf8417423f1b52873a1b0df10044b26818c3cac3f982389d1/share/doc/html/src"><span class="hs-identifier hs-type">Example</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428413"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-545"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Arg"><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hspec-core-2.11.7-8079ad8b174397fbf8417423f1b52873a1b0df10044b26818c3cac3f982389d1/share/doc/html/src"><span class="hs-identifier hs-var">Arg</span></a></span></span><span> </span><span id="local-6989586621679428413"><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428413"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428413"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-546"></span><span>
</span><span id="line-547"></span><span>  </span><span id="local-6989586621679426487"><span class="annot"><span class="annottext">evaluateExample :: ImpTestM era ()
-&gt; Params
-&gt; (ActionWith (Arg (ImpTestM era ())) -&gt; IO ())
-&gt; ProgressCallback
-&gt; IO Result
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hspec-core-2.11.7-8079ad8b174397fbf8417423f1b52873a1b0df10044b26818c3cac3f982389d1/share/doc/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">evaluateExample</span></a></span></span><span> </span><span id="local-6989586621679426485"><span class="annot"><span class="annottext">ImpTestM era ()
</span><a href="#local-6989586621679426485"><span class="hs-identifier hs-var">impTest</span></a></span></span><span> </span><span id="local-6989586621679426484"><span class="annot"><span class="annottext">Params
</span><a href="#local-6989586621679426484"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-548"></span><span>    </span><span class="annot"><span class="annottext">forall e.
Example e =&gt;
e
-&gt; Params
-&gt; (ActionWith (Arg e) -&gt; IO ())
-&gt; ProgressCallback
-&gt; IO Result
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hspec-core-2.11.7-8079ad8b174397fbf8417423f1b52873a1b0df10044b26818c3cac3f982389d1/share/doc/html/src"><span class="hs-identifier hs-var">evaluateExample</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679426483"><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679426483"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall era b.
Maybe (QCGen, Int) -&gt; ImpTestState era -&gt; ImpTestM era b -&gt; IO b
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#evalImpTestM"><span class="hs-identifier hs-var">evalImpTestM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Params -&gt; Maybe (QCGen, Int)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getParamsQCGen"><span class="hs-identifier hs-var">getParamsQCGen</span></a></span><span> </span><span class="annot"><span class="annottext">Params
</span><a href="#local-6989586621679426484"><span class="hs-identifier hs-var">params</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679426483"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">ImpTestM era ()
</span><a href="#local-6989586621679426485"><span class="hs-identifier hs-var">impTest</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Params
</span><a href="#local-6989586621679426484"><span class="hs-identifier hs-var">params</span></a></span><span>
</span><span id="line-549"></span><span>
</span><span id="line-550"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679428405"><span id="local-6989586621679428406"><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.14.3-a65fd1c4eb4ae76375c6e3f3845a1ba912285f018239b330ae730fef533366f9/share/doc/html/src"><span class="hs-identifier hs-type">Arbitrary</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428406"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428406"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hspec-core-2.11.7-8079ad8b174397fbf8417423f1b52873a1b0df10044b26818c3cac3f982389d1/share/doc/html/src"><span class="hs-identifier hs-type">Example</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679428406"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428405"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-551"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="Arg"><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hspec-core-2.11.7-8079ad8b174397fbf8417423f1b52873a1b0df10044b26818c3cac3f982389d1/share/doc/html/src"><span class="hs-identifier hs-var">Arg</span></a></span></span><span> </span><span id="local-6989586621679428405"><span id="local-6989586621679428406"><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679428406"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428405"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428405"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-552"></span><span>
</span><span id="line-553"></span><span>  </span><span id="local-6989586621679426471"><span class="annot"><span class="annottext">evaluateExample :: (a -&gt; ImpTestM era ())
-&gt; Params
-&gt; (ActionWith (Arg (a -&gt; ImpTestM era ())) -&gt; IO ())
-&gt; ProgressCallback
-&gt; IO Result
</span><a href="#local-6989586621679426471"><span class="hs-identifier hs-var hs-var hs-var hs-var">evaluateExample</span></a></span></span><span> </span><span id="local-6989586621679426470"><span class="annot"><span class="annottext">a -&gt; ImpTestM era ()
</span><a href="#local-6989586621679426470"><span class="hs-identifier hs-var">impTest</span></a></span></span><span> </span><span id="local-6989586621679426469"><span class="annot"><span class="annottext">Params
</span><a href="#local-6989586621679426469"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-554"></span><span>    </span><span class="annot"><span class="annottext">forall e.
Example e =&gt;
e
-&gt; Params
-&gt; (ActionWith (Arg e) -&gt; IO ())
-&gt; ProgressCallback
-&gt; IO Result
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hspec-core-2.11.7-8079ad8b174397fbf8417423f1b52873a1b0df10044b26818c3cac3f982389d1/share/doc/html/src"><span class="hs-identifier hs-var">evaluateExample</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679426468"><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679426468"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall prop. Testable prop =&gt; prop -&gt; Property
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.14.3-a65fd1c4eb4ae76375c6e3f3845a1ba912285f018239b330ae730fef533366f9/share/doc/html/src"><span class="hs-identifier hs-var">property</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era b.
Maybe (QCGen, Int) -&gt; ImpTestState era -&gt; ImpTestM era b -&gt; IO b
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#evalImpTestM"><span class="hs-identifier hs-var">evalImpTestM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Params -&gt; Maybe (QCGen, Int)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getParamsQCGen"><span class="hs-identifier hs-var">getParamsQCGen</span></a></span><span> </span><span class="annot"><span class="annottext">Params
</span><a href="#local-6989586621679426469"><span class="hs-identifier hs-var">params</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679426468"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; ImpTestM era ()
</span><a href="#local-6989586621679426470"><span class="hs-identifier hs-var">impTest</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Params
</span><a href="#local-6989586621679426469"><span class="hs-identifier hs-var">params</span></a></span><span>
</span><span id="line-555"></span><span>
</span><span id="line-556"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679428387"><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/quickcheck-transformer-0.3.1.2-37a3ba1358fd0d06b7c9d052985e623cc8c8103003d289ff2443df2cbc4aad62/share/doc/html/src"><span class="hs-identifier hs-type">MonadGen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428387"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-557"></span><span>  </span><span id="local-6989586621679426447"><span class="annot"><span class="annottext">liftGen :: forall a. Gen a -&gt; ImpTestM era a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/quickcheck-transformer-0.3.1.2-37a3ba1358fd0d06b7c9d052985e623cc8c8103003d289ff2443df2cbc4aad62/share/doc/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">liftGen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era a.
ReaderT (ImpTestEnv era) (GenT IO) a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-var">ImpTestM</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (g :: * -&gt; *) a. MonadGen g =&gt; Gen a -&gt; g a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/quickcheck-transformer-0.3.1.2-37a3ba1358fd0d06b7c9d052985e623cc8c8103003d289ff2443df2cbc4aad62/share/doc/html/src"><span class="hs-identifier hs-var">liftGen</span></a></span><span>
</span><span id="line-558"></span><span>  </span><span id="local-6989586621679426435"><span class="annot"><span class="annottext">variant :: forall n a. Integral n =&gt; n -&gt; ImpTestM era a -&gt; ImpTestM era a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/quickcheck-transformer-0.3.1.2-37a3ba1358fd0d06b7c9d052985e623cc8c8103003d289ff2443df2cbc4aad62/share/doc/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">variant</span></a></span></span><span> </span><span id="local-6989586621679426433"><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621679426433"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span id="local-6989586621679426432"><span class="annot"><span class="annottext">ReaderT (ImpTestEnv era) (GenT IO) a
</span><a href="#local-6989586621679426432"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era a.
ReaderT (ImpTestEnv era) (GenT IO) a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-var">ImpTestM</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall r (m :: * -&gt; *). MonadReader r m =&gt; m r
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">ask</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (g :: * -&gt; *) n a.
(MonadGen g, Integral n) =&gt;
n -&gt; g a -&gt; g a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/quickcheck-transformer-0.3.1.2-37a3ba1358fd0d06b7c9d052985e623cc8c8103003d289ff2443df2cbc4aad62/share/doc/html/src"><span class="hs-identifier hs-var">variant</span></a></span><span> </span><span class="annot"><span class="annottext">n
</span><a href="#local-6989586621679426433"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall r (m :: * -&gt; *) a. ReaderT r m a -&gt; r -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-var">runReaderT</span></a></span><span> </span><span class="annot"><span class="annottext">ReaderT (ImpTestEnv era) (GenT IO) a
</span><a href="#local-6989586621679426432"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-559"></span><span>  </span><span id="local-6989586621679426422"><span class="annot"><span class="annottext">sized :: forall a. (Int -&gt; ImpTestM era a) -&gt; ImpTestM era a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/quickcheck-transformer-0.3.1.2-37a3ba1358fd0d06b7c9d052985e623cc8c8103003d289ff2443df2cbc4aad62/share/doc/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">sized</span></a></span></span><span> </span><span id="local-6989586621679426420"><span class="annot"><span class="annottext">Int -&gt; ImpTestM era a
</span><a href="#local-6989586621679426420"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era a.
ReaderT (ImpTestEnv era) (GenT IO) a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-var">ImpTestM</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-560"></span><span>    </span><span id="local-6989586621679426419"><span class="annot"><span class="annottext">ImpTestEnv era
</span><a href="#local-6989586621679426419"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall r (m :: * -&gt; *). MonadReader r m =&gt; m r
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">ask</span></a></span><span>
</span><span id="line-561"></span><span>    </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall (g :: * -&gt; *) a. MonadGen g =&gt; (Int -&gt; g a) -&gt; g a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/quickcheck-transformer-0.3.1.2-37a3ba1358fd0d06b7c9d052985e623cc8c8103003d289ff2443df2cbc4aad62/share/doc/html/src"><span class="hs-identifier hs-var">sized</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679426418"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679426418"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall r (m :: * -&gt; *) a. ReaderT r m a -&gt; r -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-var">runReaderT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era a.
ImpTestM era a -&gt; ReaderT (ImpTestEnv era) (GenT IO) a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#unImpTestM"><span class="hs-identifier hs-var">unImpTestM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; ImpTestM era a
</span><a href="#local-6989586621679426420"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679426418"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ImpTestEnv era
</span><a href="#local-6989586621679426419"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-562"></span><span>  </span><span id="local-6989586621679426409"><span class="annot"><span class="annottext">resize :: forall a. Int -&gt; ImpTestM era a -&gt; ImpTestM era a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/quickcheck-transformer-0.3.1.2-37a3ba1358fd0d06b7c9d052985e623cc8c8103003d289ff2443df2cbc4aad62/share/doc/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">resize</span></a></span></span><span> </span><span id="local-6989586621679426407"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679426407"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span id="local-6989586621679426406"><span class="annot"><span class="annottext">ReaderT (ImpTestEnv era) (GenT IO) a
</span><a href="#local-6989586621679426406"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era a.
ReaderT (ImpTestEnv era) (GenT IO) a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-var">ImpTestM</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall r (m :: * -&gt; *). MonadReader r m =&gt; m r
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">ask</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (g :: * -&gt; *) a. MonadGen g =&gt; Int -&gt; g a -&gt; g a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/quickcheck-transformer-0.3.1.2-37a3ba1358fd0d06b7c9d052985e623cc8c8103003d289ff2443df2cbc4aad62/share/doc/html/src"><span class="hs-identifier hs-var">resize</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679426407"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall r (m :: * -&gt; *) a. ReaderT r m a -&gt; r -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-var">runReaderT</span></a></span><span> </span><span class="annot"><span class="annottext">ReaderT (ImpTestEnv era) (GenT IO) a
</span><a href="#local-6989586621679426406"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-563"></span><span>  </span><span id="local-6989586621679426398"><span class="annot"><span class="annottext">choose :: forall a. Random a =&gt; (a, a) -&gt; ImpTestM era a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/quickcheck-transformer-0.3.1.2-37a3ba1358fd0d06b7c9d052985e623cc8c8103003d289ff2443df2cbc4aad62/share/doc/html/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">choose</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era a.
ReaderT (ImpTestEnv era) (GenT IO) a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-var">ImpTestM</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-var">lift</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (g :: * -&gt; *) a. (MonadGen g, Random a) =&gt; (a, a) -&gt; g a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/quickcheck-transformer-0.3.1.2-37a3ba1358fd0d06b7c9d052985e623cc8c8103003d289ff2443df2cbc4aad62/share/doc/html/src"><span class="hs-identifier hs-var">choose</span></a></span><span>
</span><span id="line-564"></span><span>
</span><span id="line-565"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679428357"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">HasStatefulGen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">StateGenM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428357"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428357"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-566"></span><span>  </span><span id="local-6989586621679426381"><span class="annot"><span class="annottext">askStatefulGen :: ImpTestM era (StateGenM (ImpTestState era))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">askStatefulGen</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall s. StateGenM s
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">StateGenM</span></a></span><span>
</span><span id="line-567"></span><span>
</span><span id="line-568"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679428358"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">HasSubState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428358"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-569"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="SubState"><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">SubState</span></a></span></span><span> </span><span id="local-6989586621679428358"><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428358"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">StateGen</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.14.3-a65fd1c4eb4ae76375c6e3f3845a1ba912285f018239b330ae730fef533366f9/share/doc/html/src"><span class="hs-identifier hs-type">QCGen</span></a></span><span>
</span><span id="line-570"></span><span>  </span><span id="local-6989586621679426375"><span class="annot"><span class="annottext">getSubState :: ImpTestState era -&gt; SubState (ImpTestState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">getSubState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall s. s -&gt; StateGen s
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">StateGen</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. ImpTestState era -&gt; QCGen
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impGen"><span class="hs-identifier hs-var">impGen</span></a></span><span>
</span><span id="line-571"></span><span>  </span><span id="local-6989586621679426372"><span class="annot"><span class="annottext">setSubState :: ImpTestState era -&gt; SubState (ImpTestState era) -&gt; ImpTestState era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var hs-var hs-var hs-var">setSubState</span></a></span></span><span> </span><span id="local-6989586621679426370"><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679426370"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">StateGen</span></a></span><span> </span><span id="local-6989586621679426369"><span class="annot"><span class="annottext">QCGen
</span><a href="#local-6989586621679426369"><span class="hs-identifier hs-var">g</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679426370"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">impGen :: QCGen
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impGen"><span class="hs-identifier hs-var">impGen</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QCGen
</span><a href="#local-6989586621679426369"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-572"></span><span>
</span><span id="line-573"></span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getParamsQCGen"><span class="hs-identifier hs-type">getParamsQCGen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hspec-core-2.11.7-8079ad8b174397fbf8417423f1b52873a1b0df10044b26818c3cac3f982389d1/share/doc/html/src"><span class="hs-identifier hs-type">Params</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.14.3-a65fd1c4eb4ae76375c6e3f3845a1ba912285f018239b330ae730fef533366f9/share/doc/html/src"><span class="hs-identifier hs-type">QCGen</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-574"></span><span id="getParamsQCGen"><span class="annot"><span class="annottext">getParamsQCGen :: Params -&gt; Maybe (QCGen, Int)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getParamsQCGen"><span class="hs-identifier hs-var hs-var">getParamsQCGen</span></a></span></span><span> </span><span id="local-6989586621679426368"><span class="annot"><span class="annottext">Params
</span><a href="#local-6989586621679426368"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Args -&gt; Maybe (QCGen, Int)
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.14.3-a65fd1c4eb4ae76375c6e3f3845a1ba912285f018239b330ae730fef533366f9/share/doc/html/src"><span class="hs-identifier hs-var">replay</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Params -&gt; Args
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hspec-core-2.11.7-8079ad8b174397fbf8417423f1b52873a1b0df10044b26818c3cac3f982389d1/share/doc/html/src"><span class="hs-identifier hs-var">paramsQuickCheckArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Params
</span><a href="#local-6989586621679426368"><span class="hs-identifier hs-var">params</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-575"></span><span>
</span><span id="line-576"></span><span id="local-6989586621679428350"><span id="local-6989586621679428351"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#evalImpTestGenM"><span class="hs-identifier hs-type">evalImpTestGenM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428351"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428351"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428350"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.14.3-a65fd1c4eb4ae76375c6e3f3845a1ba912285f018239b330ae730fef533366f9/share/doc/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428350"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-577"></span><span id="evalImpTestGenM"><span class="annot"><span class="annottext">evalImpTestGenM :: forall era b. ImpTestState era -&gt; ImpTestM era b -&gt; Gen (IO b)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#evalImpTestGenM"><span class="hs-identifier hs-var hs-var">evalImpTestGenM</span></a></span></span><span> </span><span id="local-6989586621679426363"><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679426363"><span class="hs-identifier hs-var">impState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fst</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era b.
ImpTestState era
-&gt; ImpTestM era b -&gt; Gen (IO (b, ImpTestState era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#runImpTestGenM"><span class="hs-identifier hs-var">runImpTestGenM</span></a></span><span> </span><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679426363"><span class="hs-identifier hs-var">impState</span></a></span><span>
</span><span id="line-578"></span><span>
</span><span id="line-579"></span><span id="local-6989586621679428410"><span id="local-6989586621679428411"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#evalImpTestM"><span class="hs-identifier hs-type">evalImpTestM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.14.3-a65fd1c4eb4ae76375c6e3f3845a1ba912285f018239b330ae730fef533366f9/share/doc/html/src"><span class="hs-identifier hs-type">QCGen</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428411"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428411"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428410"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428410"><span class="hs-identifier hs-type">b</span></a></span></span></span><span>
</span><span id="line-580"></span><span id="evalImpTestM"><span class="annot"><span class="annottext">evalImpTestM :: forall era b.
Maybe (QCGen, Int) -&gt; ImpTestState era -&gt; ImpTestM era b -&gt; IO b
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#evalImpTestM"><span class="hs-identifier hs-var hs-var">evalImpTestM</span></a></span></span><span> </span><span id="local-6989586621679426361"><span class="annot"><span class="annottext">Maybe (QCGen, Int)
</span><a href="#local-6989586621679426361"><span class="hs-identifier hs-var">qc</span></a></span></span><span> </span><span id="local-6989586621679426360"><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679426360"><span class="hs-identifier hs-var">impState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era b.
Maybe (QCGen, Int)
-&gt; ImpTestState era -&gt; ImpTestM era b -&gt; IO (b, ImpTestState era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#runImpTestM"><span class="hs-identifier hs-var">runImpTestM</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (QCGen, Int)
</span><a href="#local-6989586621679426361"><span class="hs-identifier hs-var">qc</span></a></span><span> </span><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679426360"><span class="hs-identifier hs-var">impState</span></a></span><span>
</span><span id="line-581"></span><span>
</span><span id="line-582"></span><span id="local-6989586621679428338"><span id="local-6989586621679428339"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#execImpTestGenM"><span class="hs-identifier hs-type">execImpTestGenM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428339"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428339"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428338"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.14.3-a65fd1c4eb4ae76375c6e3f3845a1ba912285f018239b330ae730fef533366f9/share/doc/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428339"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-583"></span><span id="execImpTestGenM"><span class="annot"><span class="annottext">execImpTestGenM :: forall era b.
ImpTestState era -&gt; ImpTestM era b -&gt; Gen (IO (ImpTestState era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#execImpTestGenM"><span class="hs-identifier hs-var hs-var">execImpTestGenM</span></a></span></span><span> </span><span id="local-6989586621679426357"><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679426357"><span class="hs-identifier hs-var">impState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era b.
ImpTestState era
-&gt; ImpTestM era b -&gt; Gen (IO (b, ImpTestState era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#runImpTestGenM"><span class="hs-identifier hs-var">runImpTestGenM</span></a></span><span> </span><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679426357"><span class="hs-identifier hs-var">impState</span></a></span><span>
</span><span id="line-584"></span><span>
</span><span id="line-585"></span><span id="local-6989586621679428332"><span id="local-6989586621679428333"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#execImpTestM"><span class="hs-identifier hs-type">execImpTestM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.14.3-a65fd1c4eb4ae76375c6e3f3845a1ba912285f018239b330ae730fef533366f9/share/doc/html/src"><span class="hs-identifier hs-type">QCGen</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428333"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428333"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428332"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428333"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-586"></span><span id="execImpTestM"><span class="annot"><span class="annottext">execImpTestM :: forall era b.
Maybe (QCGen, Int)
-&gt; ImpTestState era -&gt; ImpTestM era b -&gt; IO (ImpTestState era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#execImpTestM"><span class="hs-identifier hs-var hs-var">execImpTestM</span></a></span></span><span> </span><span id="local-6989586621679426355"><span class="annot"><span class="annottext">Maybe (QCGen, Int)
</span><a href="#local-6989586621679426355"><span class="hs-identifier hs-var">qc</span></a></span></span><span> </span><span id="local-6989586621679426354"><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679426354"><span class="hs-identifier hs-var">impState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">snd</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era b.
Maybe (QCGen, Int)
-&gt; ImpTestState era -&gt; ImpTestM era b -&gt; IO (b, ImpTestState era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#runImpTestM"><span class="hs-identifier hs-var">runImpTestM</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (QCGen, Int)
</span><a href="#local-6989586621679426355"><span class="hs-identifier hs-var">qc</span></a></span><span> </span><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679426354"><span class="hs-identifier hs-var">impState</span></a></span><span>
</span><span id="line-587"></span><span>
</span><span id="line-588"></span><span id="local-6989586621679428328"><span id="local-6989586621679428329"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#runImpTestGenM_"><span class="hs-identifier hs-type">runImpTestGenM_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428329"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428329"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428328"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.14.3-a65fd1c4eb4ae76375c6e3f3845a1ba912285f018239b330ae730fef533366f9/share/doc/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-589"></span><span id="runImpTestGenM_"><span class="annot"><span class="annottext">runImpTestGenM_ :: forall era b. ImpTestState era -&gt; ImpTestM era b -&gt; Gen (IO ())
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#runImpTestGenM_"><span class="hs-identifier hs-var hs-var">runImpTestGenM_</span></a></span></span><span> </span><span id="local-6989586621679426351"><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679426351"><span class="hs-identifier hs-var">impState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era b.
ImpTestState era
-&gt; ImpTestM era b -&gt; Gen (IO (b, ImpTestState era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#runImpTestGenM"><span class="hs-identifier hs-var">runImpTestGenM</span></a></span><span> </span><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679426351"><span class="hs-identifier hs-var">impState</span></a></span><span>
</span><span id="line-590"></span><span>
</span><span id="line-591"></span><span id="local-6989586621679428322"><span id="local-6989586621679428323"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#runImpTestM_"><span class="hs-identifier hs-type">runImpTestM_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.14.3-a65fd1c4eb4ae76375c6e3f3845a1ba912285f018239b330ae730fef533366f9/share/doc/html/src"><span class="hs-identifier hs-type">QCGen</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428323"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428323"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428322"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-592"></span><span id="runImpTestM_"><span class="annot"><span class="annottext">runImpTestM_ :: forall era b.
Maybe (QCGen, Int) -&gt; ImpTestState era -&gt; ImpTestM era b -&gt; IO ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#runImpTestM_"><span class="hs-identifier hs-var hs-var">runImpTestM_</span></a></span></span><span> </span><span id="local-6989586621679426348"><span class="annot"><span class="annottext">Maybe (QCGen, Int)
</span><a href="#local-6989586621679426348"><span class="hs-identifier hs-var">qc</span></a></span></span><span> </span><span id="local-6989586621679426347"><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679426347"><span class="hs-identifier hs-var">impState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era b.
Maybe (QCGen, Int)
-&gt; ImpTestState era -&gt; ImpTestM era b -&gt; IO (b, ImpTestState era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#runImpTestM"><span class="hs-identifier hs-var">runImpTestM</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (QCGen, Int)
</span><a href="#local-6989586621679426348"><span class="hs-identifier hs-var">qc</span></a></span><span> </span><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679426347"><span class="hs-identifier hs-var">impState</span></a></span><span>
</span><span id="line-593"></span><span>
</span><span id="line-594"></span><span id="local-6989586621679428344"><span id="local-6989586621679428345"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#runImpTestGenM"><span class="hs-identifier hs-type">runImpTestGenM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428345"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428345"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428344"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.14.3-a65fd1c4eb4ae76375c6e3f3845a1ba912285f018239b330ae730fef533366f9/share/doc/html/src"><span class="hs-identifier hs-type">Gen</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679428344"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428345"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-595"></span><span id="runImpTestGenM"><span class="annot"><span class="annottext">runImpTestGenM :: forall era b.
ImpTestState era
-&gt; ImpTestM era b -&gt; Gen (IO (b, ImpTestState era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#runImpTestGenM"><span class="hs-identifier hs-var hs-var">runImpTestGenM</span></a></span></span><span> </span><span id="local-6989586621679426346"><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679426346"><span class="hs-identifier hs-var">impState</span></a></span></span><span> </span><span id="local-6989586621679426345"><span class="annot"><span class="annottext">ImpTestM era b
</span><a href="#local-6989586621679426345"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. (QCGen -&gt; Int -&gt; a) -&gt; Gen a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.14.3-a65fd1c4eb4ae76375c6e3f3845a1ba912285f018239b330ae730fef533366f9/share/doc/html/src"><span class="hs-identifier hs-var">MkGen</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679426343"><span class="annot"><span class="annottext">QCGen
</span><a href="#local-6989586621679426343"><span class="hs-identifier hs-var">qcGen</span></a></span></span><span> </span><span id="local-6989586621679426342"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679426342"><span class="hs-identifier hs-var">qcSz</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall era b.
Maybe (QCGen, Int)
-&gt; ImpTestState era -&gt; ImpTestM era b -&gt; IO (b, ImpTestState era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#runImpTestM"><span class="hs-identifier hs-var">runImpTestM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QCGen
</span><a href="#local-6989586621679426343"><span class="hs-identifier hs-var">qcGen</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679426342"><span class="hs-identifier hs-var">qcSz</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679426346"><span class="hs-identifier hs-var">impState</span></a></span><span> </span><span class="annot"><span class="annottext">ImpTestM era b
</span><a href="#local-6989586621679426345"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-596"></span><span>
</span><span id="line-597"></span><span id="local-6989586621679428340"><span id="local-6989586621679428341"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#runImpTestM"><span class="hs-identifier hs-type">runImpTestM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.14.3-a65fd1c4eb4ae76375c6e3f3845a1ba912285f018239b330ae730fef533366f9/share/doc/html/src"><span class="hs-identifier hs-type">QCGen</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428341"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428341"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428340"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679428340"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428341"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-598"></span><span id="runImpTestM"><span class="annot"><span class="annottext">runImpTestM :: forall era b.
Maybe (QCGen, Int)
-&gt; ImpTestState era -&gt; ImpTestM era b -&gt; IO (b, ImpTestState era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#runImpTestM"><span class="hs-identifier hs-var hs-var">runImpTestM</span></a></span></span><span> </span><span id="local-6989586621679426302"><span class="annot"><span class="annottext">Maybe (QCGen, Int)
</span><a href="#local-6989586621679426302"><span class="hs-identifier hs-var">mQCGen</span></a></span></span><span> </span><span id="local-6989586621679426301"><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679426301"><span class="hs-identifier hs-var">impState</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span id="local-6989586621679426300"><span class="annot"><span class="annottext">ReaderT (ImpTestEnv era) (GenT IO) b
</span><a href="#local-6989586621679426300"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-599"></span><span>  </span><span class="hs-keyword">let</span><span>
</span><span id="line-600"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679426299"><span class="annot"><span class="annottext">QCGen
</span><a href="#local-6989586621679426299"><span class="hs-identifier hs-var">qcGen</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679426298"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679426298"><span class="hs-identifier hs-var">qcSize</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679426297"><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679426297"><span class="hs-identifier hs-var">impState'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-601"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fromMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. ImpTestState era -&gt; QCGen
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impGen"><span class="hs-identifier hs-var">impGen</span></a></span><span> </span><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679426301"><span class="hs-identifier hs-var">impState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">30</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe (QCGen, Int)
</span><a href="#local-6989586621679426302"><span class="hs-identifier hs-var">mQCGen</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-602"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679426296"><span class="annot"><span class="annottext">QCGen
</span><a href="#local-6989586621679426296"><span class="hs-identifier hs-var">initGen</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679426295"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679426295"><span class="hs-identifier hs-var">sz</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-603"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall g. RandomGen g =&gt; g -&gt; (g, g)
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/random-1.2.1.1-97d351bf97dd57637441798736e25556058018a1de673671ce7fdce6e47d0d77/share/doc/html/src"><span class="hs-identifier hs-var">split</span></a></span><span> </span><span class="annot"><span class="annottext">QCGen
</span><a href="#local-6989586621679426296"><span class="hs-identifier hs-var">initGen</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-604"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621679426293"><span class="annot"><span class="annottext">QCGen
</span><a href="#local-6989586621679426293"><span class="hs-identifier hs-var">qc</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679426292"><span class="annot"><span class="annottext">QCGen
</span><a href="#local-6989586621679426292"><span class="hs-identifier hs-var">stdGen</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QCGen
</span><a href="#local-6989586621679426293"><span class="hs-identifier hs-var">qc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679426295"><span class="hs-identifier hs-var">sz</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679426301"><span class="hs-identifier hs-var">impState</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">impGen :: QCGen
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impGen"><span class="hs-identifier hs-var">impGen</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QCGen
</span><a href="#local-6989586621679426292"><span class="hs-identifier hs-var">stdGen</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-605"></span><span>  </span><span id="local-6989586621679426291"><span class="annot"><span class="annottext">IORef (ImpTestState era)
</span><a href="#local-6989586621679426291"><span class="hs-identifier hs-var">ioRef</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; IO (IORef a)
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">newIORef</span></a></span><span> </span><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679426297"><span class="hs-identifier hs-var">impState'</span></a></span><span>
</span><span id="line-606"></span><span>  </span><span class="hs-keyword">let</span><span>
</span><span id="line-607"></span><span>    </span><span id="local-6989586621679426289"><span class="annot"><span class="annottext">env :: ImpTestEnv era
</span><a href="#local-6989586621679426289"><span class="hs-identifier hs-var hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-608"></span><span>      </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestEnv"><span class="hs-identifier hs-type">ImpTestEnv</span></a></span><span>
</span><span id="line-609"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">iteState :: IORef (ImpTestState era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#iteState"><span class="hs-identifier hs-var">iteState</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IORef (ImpTestState era)
</span><a href="#local-6989586621679426291"><span class="hs-identifier hs-var">ioRef</span></a></span><span>
</span><span id="line-610"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">iteDoTxFixup :: Bool
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#iteDoTxFixup"><span class="hs-identifier hs-var">iteDoTxFixup</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-611"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-612"></span><span>  </span><span id="local-6989586621679426288"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679426288"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-613"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. GenT m a -&gt; QCGen -&gt; Int -&gt; m a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/quickcheck-transformer-0.3.1.2-37a3ba1358fd0d06b7c9d052985e623cc8c8103003d289ff2443df2cbc4aad62/share/doc/html/src"><span class="hs-identifier hs-var">unGenT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall r (m :: * -&gt; *) a. ReaderT r m a -&gt; r -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-var">runReaderT</span></a></span><span> </span><span class="annot"><span class="annottext">ReaderT (ImpTestEnv era) (GenT IO) b
</span><a href="#local-6989586621679426300"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">ImpTestEnv era
</span><a href="#local-6989586621679426289"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">QCGen
</span><a href="#local-6989586621679426299"><span class="hs-identifier hs-var">qcGen</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679426298"><span class="hs-identifier hs-var">qcSize</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a.
MonadUnliftIO m =&gt;
m a -&gt; (SomeException -&gt; m a) -&gt; m a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/unliftio-0.2.25.0-8f9832938fccae827eac9a277285942342049f20136025c9a200d96eb4f776f9/share/doc/html/src"><span class="hs-operator hs-var">`catchAny`</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679426286"><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679426286"><span class="hs-identifier hs-var">exc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-614"></span><span>      </span><span id="local-6989586621679426285"><span class="annot"><span class="annottext">Doc ()
</span><a href="#local-6989586621679426285"><span class="hs-identifier hs-var">logsDoc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era. ImpTestState era -&gt; Doc ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impLog"><span class="hs-identifier hs-var">impLog</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. IORef a -&gt; IO a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">readIORef</span></a></span><span> </span><span class="annot"><span class="annottext">IORef (ImpTestState era)
</span><a href="#local-6989586621679426291"><span class="hs-identifier hs-var">ioRef</span></a></span><span>
</span><span id="line-615"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679426284"><span class="annot"><span class="annottext">logs :: String
</span><a href="#local-6989586621679426284"><span class="hs-identifier hs-var hs-var">logs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall ann. SimpleDocStream ann -&gt; String
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/prettyprinter-1.7.1-546164a61e33fff52b43324c1636e343b3360b907f873b5adf59f460acb23f60/share/doc/html/src"><span class="hs-identifier hs-var">renderString</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall ann. LayoutOptions -&gt; Doc ann -&gt; SimpleDocStream ann
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/prettyprinter-1.7.1-546164a61e33fff52b43324c1636e343b3360b907f873b5adf59f460acb23f60/share/doc/html/src"><span class="hs-identifier hs-var">layoutPretty</span></a></span><span> </span><span class="annot"><span class="annottext">LayoutOptions
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/prettyprinter-1.7.1-546164a61e33fff52b43324c1636e343b3360b907f873b5adf59f460acb23f60/share/doc/html/src"><span class="hs-identifier hs-var">defaultLayoutOptions</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ()
</span><a href="#local-6989586621679426285"><span class="hs-identifier hs-var">logsDoc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-616"></span><span>          </span><span id="local-6989586621679426283"><span class="annot"><span class="annottext">adjustHUnitExc :: String -&gt; HUnitFailure -&gt; SomeException
</span><a href="#local-6989586621679426283"><span class="hs-identifier hs-var hs-var">adjustHUnitExc</span></a></span></span><span> </span><span id="local-6989586621679426282"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679426282"><span class="hs-identifier hs-var">header</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/HUnit-1.6.2.0-59aa0f65a28ee534ccd9433cc361768bd0714e76c4786df4d82486bce6c2be36/share/doc/html/src"><span class="hs-identifier hs-type">HUnitFailure</span></a></span><span> </span><span id="local-6989586621679426280"><span class="annot"><span class="annottext">Maybe SrcLoc
</span><a href="#local-6989586621679426280"><span class="hs-identifier hs-var">srcLoc</span></a></span></span><span> </span><span id="local-6989586621679426279"><span class="annot"><span class="annottext">FailureReason
</span><a href="#local-6989586621679426279"><span class="hs-identifier hs-var">failReason</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-617"></span><span>            </span><span class="annot"><span class="annottext">forall e. Exception e =&gt; e -&gt; SomeException
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">toException</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-618"></span><span>              </span><span class="annot"><span class="annottext">Maybe SrcLoc -&gt; FailureReason -&gt; HUnitFailure
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/HUnit-1.6.2.0-59aa0f65a28ee534ccd9433cc361768bd0714e76c4786df4d82486bce6c2be36/share/doc/html/src"><span class="hs-identifier hs-var">HUnitFailure</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe SrcLoc
</span><a href="#local-6989586621679426280"><span class="hs-identifier hs-var">srcLoc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-619"></span><span>                </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">FailureReason
</span><a href="#local-6989586621679426279"><span class="hs-identifier hs-var">failReason</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-620"></span><span>                  </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/HUnit-1.6.2.0-59aa0f65a28ee534ccd9433cc361768bd0714e76c4786df4d82486bce6c2be36/share/doc/html/src"><span class="hs-identifier hs-type">Reason</span></a></span><span> </span><span id="local-6989586621679426276"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679426276"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; FailureReason
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/HUnit-1.6.2.0-59aa0f65a28ee534ccd9433cc361768bd0714e76c4786df4d82486bce6c2be36/share/doc/html/src"><span class="hs-identifier hs-var">Reason</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679426284"><span class="hs-identifier hs-var">logs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\n&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679426282"><span class="hs-identifier hs-var">header</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679426276"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-621"></span><span>                  </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/HUnit-1.6.2.0-59aa0f65a28ee534ccd9433cc361768bd0714e76c4786df4d82486bce6c2be36/share/doc/html/src"><span class="hs-identifier hs-type">ExpectedButGot</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe String
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span id="local-6989586621679426274"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679426274"><span class="hs-identifier hs-var">expected</span></a></span></span><span> </span><span id="local-6989586621679426273"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679426273"><span class="hs-identifier hs-var">got</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-622"></span><span>                    </span><span class="annot"><span class="annottext">Maybe String -&gt; String -&gt; String -&gt; FailureReason
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/HUnit-1.6.2.0-59aa0f65a28ee534ccd9433cc361768bd0714e76c4786df4d82486bce6c2be36/share/doc/html/src"><span class="hs-identifier hs-var">ExpectedButGot</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679426284"><span class="hs-identifier hs-var">logs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679426282"><span class="hs-identifier hs-var">header</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679426274"><span class="hs-identifier hs-var">expected</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679426273"><span class="hs-identifier hs-var">got</span></a></span><span>
</span><span id="line-623"></span><span>                  </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/HUnit-1.6.2.0-59aa0f65a28ee534ccd9433cc361768bd0714e76c4786df4d82486bce6c2be36/share/doc/html/src"><span class="hs-identifier hs-type">ExpectedButGot</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679426272"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679426272"><span class="hs-identifier hs-var">msg</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679426271"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679426271"><span class="hs-identifier hs-var">expected</span></a></span></span><span> </span><span id="local-6989586621679426270"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679426270"><span class="hs-identifier hs-var">got</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-624"></span><span>                    </span><span class="annot"><span class="annottext">Maybe String -&gt; String -&gt; String -&gt; FailureReason
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/HUnit-1.6.2.0-59aa0f65a28ee534ccd9433cc361768bd0714e76c4786df4d82486bce6c2be36/share/doc/html/src"><span class="hs-identifier hs-var">ExpectedButGot</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679426284"><span class="hs-identifier hs-var">logs</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\n&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679426282"><span class="hs-identifier hs-var">header</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679426272"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679426271"><span class="hs-identifier hs-var">expected</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679426270"><span class="hs-identifier hs-var">got</span></a></span><span>
</span><span id="line-625"></span><span>          </span><span id="local-6989586621679426269"><span class="annot"><span class="annottext">newExc :: SomeException
</span><a href="#local-6989586621679426269"><span class="hs-identifier hs-var hs-var">newExc</span></a></span></span><span>
</span><span id="line-626"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679426268"><span class="annot"><span class="annottext">HUnitFailure
</span><a href="#local-6989586621679426268"><span class="hs-identifier hs-var">hUnitExc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall e. Exception e =&gt; SomeException -&gt; Maybe e
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fromException</span></a></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679426286"><span class="hs-identifier hs-var">exc</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-627"></span><span>                </span><span class="annot"><span class="annottext">String -&gt; HUnitFailure -&gt; SomeException
</span><a href="#local-6989586621679426283"><span class="hs-identifier hs-var">adjustHUnitExc</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">HUnitFailure
</span><a href="#local-6989586621679426268"><span class="hs-identifier hs-var">hUnitExc</span></a></span><span>
</span><span id="line-628"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpException"><span class="hs-identifier hs-type">ImpException</span></a></span><span> </span><span id="local-6989586621679426265"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679426265"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621679426264"><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679426264"><span class="hs-identifier hs-var">excThrown</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall e. Exception e =&gt; SomeException -&gt; Maybe e
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fromException</span></a></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679426286"><span class="hs-identifier hs-var">exc</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-629"></span><span>                </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679426263"><span class="annot"><span class="annottext">header :: String
</span><a href="#local-6989586621679426263"><span class="hs-identifier hs-var hs-var">header</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">unlines</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">zipWith</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679426260"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679426260"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679426259"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679426259"><span class="hs-identifier hs-var">str</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. Int -&gt; a -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">replicate</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679426260"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">' '</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679426259"><span class="hs-identifier hs-var">str</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="hs-glyph">..</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679426265"><span class="hs-identifier hs-var">ann</span></a></span><span>
</span><span id="line-630"></span><span>                 </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall e. Exception e =&gt; SomeException -&gt; Maybe e
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fromException</span></a></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679426264"><span class="hs-identifier hs-var">excThrown</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-631"></span><span>                      </span><span class="annot"><span class="annottext">Maybe HUnitFailure
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall e. Exception e =&gt; e -&gt; SomeException
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">toException</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; SomeException -&gt; ImpException
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpException"><span class="hs-identifier hs-var">ImpException</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679426284"><span class="hs-identifier hs-var">logs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679426263"><span class="hs-identifier hs-var">header</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679426264"><span class="hs-identifier hs-var">excThrown</span></a></span><span>
</span><span id="line-632"></span><span>                      </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679426257"><span class="annot"><span class="annottext">HUnitFailure
</span><a href="#local-6989586621679426257"><span class="hs-identifier hs-var">hUnitExc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; HUnitFailure -&gt; SomeException
</span><a href="#local-6989586621679426283"><span class="hs-identifier hs-var">adjustHUnitExc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679426263"><span class="hs-identifier hs-var">header</span></a></span><span> </span><span class="annot"><span class="annottext">HUnitFailure
</span><a href="#local-6989586621679426257"><span class="hs-identifier hs-var">hUnitExc</span></a></span><span>
</span><span id="line-633"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall e. Exception e =&gt; e -&gt; SomeException
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">toException</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; SomeException -&gt; ImpException
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpException"><span class="hs-identifier hs-var">ImpException</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679426284"><span class="hs-identifier hs-var">logs</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679426286"><span class="hs-identifier hs-var">exc</span></a></span><span>
</span><span id="line-634"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) e a. (MonadIO m, Exception e) =&gt; e -&gt; m a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/unliftio-0.2.25.0-8f9832938fccae827eac9a277285942342049f20136025c9a200d96eb4f776f9/share/doc/html/src"><span class="hs-identifier hs-var">throwIO</span></a></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679426269"><span class="hs-identifier hs-var">newExc</span></a></span><span>
</span><span id="line-635"></span><span>  </span><span id="local-6989586621679426256"><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679426256"><span class="hs-identifier hs-var">endState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. IORef a -&gt; IO a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">readIORef</span></a></span><span> </span><span class="annot"><span class="annottext">IORef (ImpTestState era)
</span><a href="#local-6989586621679426291"><span class="hs-identifier hs-var">ioRef</span></a></span><span>
</span><span id="line-636"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679426288"><span class="hs-identifier hs-var">res</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679426256"><span class="hs-identifier hs-var">endState</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-637"></span><span>
</span><span id="line-638"></span><span id="local-6989586621679428290"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#runShelleyBase"><span class="hs-identifier hs-type">runShelleyBase</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Globals</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">ShelleyBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428290"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679428290"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-639"></span><span id="runShelleyBase"><span class="annot"><span class="annottext">runShelleyBase :: forall a. Globals -&gt; ShelleyBase a -&gt; a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#runShelleyBase"><span class="hs-identifier hs-var hs-var">runShelleyBase</span></a></span></span><span> </span><span id="local-6989586621679426254"><span class="annot"><span class="annottext">Globals
</span><a href="#local-6989586621679426254"><span class="hs-identifier hs-var">globals</span></a></span></span><span> </span><span id="local-6989586621679426253"><span class="annot"><span class="annottext">ShelleyBase a
</span><a href="#local-6989586621679426253"><span class="hs-identifier hs-var">act</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Identity a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">runIdentity</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall r (m :: * -&gt; *) a. ReaderT r m a -&gt; r -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-var">runReaderT</span></a></span><span> </span><span class="annot"><span class="annottext">ShelleyBase a
</span><a href="#local-6989586621679426253"><span class="hs-identifier hs-var">act</span></a></span><span> </span><span class="annot"><span class="annottext">Globals
</span><a href="#local-6989586621679426254"><span class="hs-identifier hs-var">globals</span></a></span><span>
</span><span id="line-640"></span><span>
</span><span id="line-641"></span><span id="local-6989586621679428287"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getRewardAccountAmount"><span class="hs-identifier hs-type">getRewardAccountAmount</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">RewardAccount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428287"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428287"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Coin</span></a></span></span><span>
</span><span id="line-642"></span><span id="getRewardAccountAmount"><span class="annot"><span class="annottext">getRewardAccountAmount :: forall era. RewardAccount (EraCrypto era) -&gt; ImpTestM era Coin
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getRewardAccountAmount"><span class="hs-identifier hs-var hs-var">getRewardAccountAmount</span></a></span></span><span> </span><span id="local-6989586621679426240"><span class="annot"><span class="annottext">RewardAccount (EraCrypto era)
</span><a href="#local-6989586621679426240"><span class="hs-identifier hs-var">rewardAcount</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-643"></span><span>  </span><span id="local-6989586621679426239"><span class="annot"><span class="annottext">UMap (EraCrypto era)
</span><a href="#local-6989586621679426239"><span class="hs-identifier hs-var">umap</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (NewEpochState era) (EpochState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (EpochState era) (UMap (EraCrypto era))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">epochStateUMapL</span></a></span><span>
</span><span id="line-644"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679426236"><span class="annot"><span class="annottext">cred :: Credential 'Staking (EraCrypto era)
</span><a href="#local-6989586621679426236"><span class="hs-identifier hs-var hs-var">cred</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall c. RewardAccount c -&gt; Credential 'Staking c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">raCredential</span></a></span><span> </span><span class="annot"><span class="annottext">RewardAccount (EraCrypto era)
</span><a href="#local-6989586621679426240"><span class="hs-identifier hs-var">rewardAcount</span></a></span><span>
</span><span id="line-645"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall k c v. k -&gt; UView c k v -&gt; Maybe v
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">UMap.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking (EraCrypto era)
</span><a href="#local-6989586621679426236"><span class="hs-identifier hs-var">cred</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall c. UMap c -&gt; UView c (Credential 'Staking c) RDPair
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">RewDepUView</span></a></span><span> </span><span class="annot"><span class="annottext">UMap (EraCrypto era)
</span><a href="#local-6989586621679426239"><span class="hs-identifier hs-var">umap</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-646"></span><span>    </span><span class="annot"><span class="annottext">Maybe RDPair
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. (HasCallStack, MonadIO m) =&gt; String -&gt; m a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">assertFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Expected a reward account: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking (EraCrypto era)
</span><a href="#local-6989586621679426236"><span class="hs-identifier hs-var">cred</span></a></span><span>
</span><span id="line-647"></span><span>    </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">RDPair</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679426230"><span class="annot"><span class="annottext">CompactForm Coin
rdReward :: RDPair -&gt; CompactForm Coin
rdReward :: CompactForm Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var hs-var">rdReward</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Compactible a =&gt; CompactForm a -&gt; a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">fromCompact</span></a></span><span> </span><span class="annot"><span class="annottext">CompactForm Coin
</span><a href="#local-6989586621679426230"><span class="hs-identifier hs-var">rdReward</span></a></span><span>
</span><span id="line-648"></span><span>
</span><span id="line-649"></span><span id="local-6989586621679428268"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#lookupImpRootTxOut"><span class="hs-identifier hs-type">lookupImpRootTxOut</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428268"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428268"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxOut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428268"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-650"></span><span id="lookupImpRootTxOut"><span class="annot"><span class="annottext">lookupImpRootTxOut :: forall era. ImpTestM era (TxIn (EraCrypto era), TxOut era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#lookupImpRootTxOut"><span class="hs-identifier hs-var hs-var">lookupImpRootTxOut</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-651"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679426221"><span class="annot"><span class="annottext">TxIn (EraCrypto era)
impRootTxIn :: TxIn (EraCrypto era)
impRootTxIn :: forall era. ImpTestState era -&gt; TxIn (EraCrypto era)
</span><a href="#local-6989586621679426221"><span class="hs-identifier hs-var hs-var">impRootTxIn</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *). MonadState s m =&gt; m s
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">get</span></a></span><span>
</span><span id="line-652"></span><span>  </span><span id="local-6989586621679426220"><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621679426220"><span class="hs-identifier hs-var">utxo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era. ImpTestM era (UTxO era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getUTxO"><span class="hs-identifier hs-var">getUTxO</span></a></span><span>
</span><span id="line-653"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall era. TxIn (EraCrypto era) -&gt; UTxO era -&gt; Maybe (TxOut era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">txinLookup</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn (EraCrypto era)
</span><a href="#local-6989586621679426221"><span class="hs-identifier hs-var">impRootTxIn</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621679426220"><span class="hs-identifier hs-var">utxo</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-654"></span><span>    </span><span class="annot"><span class="annottext">Maybe (TxOut era)
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Root txId no longer points to an existing unspent output&quot;</span></span><span>
</span><span id="line-655"></span><span>    </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679426218"><span class="annot"><span class="annottext">TxOut era
</span><a href="#local-6989586621679426218"><span class="hs-identifier hs-var">rootTxOut</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxIn (EraCrypto era)
</span><a href="#local-6989586621679426221"><span class="hs-identifier hs-var">impRootTxIn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TxOut era
</span><a href="#local-6989586621679426218"><span class="hs-identifier hs-var">rootTxOut</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-656"></span><span>
</span><span id="line-657"></span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impAddNativeScript"><span class="hs-identifier hs-type">impAddNativeScript</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-658"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679428264"><span class="annot"><a href="#local-6989586621679428264"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-659"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraScript</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428264"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-660"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">NativeScript</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428264"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-661"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428264"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428264"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-662"></span><span id="impAddNativeScript"><span class="annot"><span class="annottext">impAddNativeScript :: forall era.
EraScript era =&gt;
NativeScript era -&gt; ImpTestM era (ScriptHash (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impAddNativeScript"><span class="hs-identifier hs-var hs-var">impAddNativeScript</span></a></span></span><span> </span><span id="local-6989586621679426208"><span class="annot"><span class="annottext">NativeScript era
</span><a href="#local-6989586621679426208"><span class="hs-identifier hs-var">nativeScript</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-663"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679426207"><span class="annot"><span class="annottext">script :: Script era
</span><a href="#local-6989586621679426207"><span class="hs-identifier hs-var hs-var">script</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era. EraScript era =&gt; NativeScript era -&gt; Script era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">fromNativeScript</span></a></span><span> </span><span class="annot"><span class="annottext">NativeScript era
</span><a href="#local-6989586621679426208"><span class="hs-identifier hs-var">nativeScript</span></a></span><span>
</span><span id="line-664"></span><span>      </span><span id="local-6989586621679426205"><span class="annot"><span class="annottext">scriptHash :: ScriptHash (EraCrypto era)
</span><a href="#local-6989586621679426205"><span class="hs-identifier hs-var hs-var">scriptHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
EraScript era =&gt;
Script era -&gt; ScriptHash (EraCrypto era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">hashScript</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679428264"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="annottext">Script era
</span><a href="#local-6989586621679426207"><span class="hs-identifier hs-var">script</span></a></span><span>
</span><span id="line-665"></span><span>  </span><span class="annot"><span class="annottext">forall era.
Lens'
  (ImpTestState era)
  (Map (ScriptHash (EraCrypto era)) (NativeScript era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNativeScriptsL"><span class="hs-identifier hs-var">impNativeScriptsL</span></a></span><span> </span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *) a b.
MonadState s m =&gt;
ASetter s s a b -&gt; (a -&gt; b) -&gt; m ()
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-mtl-0.2.0.3-30febb7a254c037eae9a749580d8462f4e1181aa6379e82c103234a8f48251c9/share/doc/html/src"><span class="hs-operator hs-var">%=</span></a></span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.insert</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash (EraCrypto era)
</span><a href="#local-6989586621679426205"><span class="hs-identifier hs-var">scriptHash</span></a></span><span> </span><span class="annot"><span class="annottext">NativeScript era
</span><a href="#local-6989586621679426208"><span class="hs-identifier hs-var">nativeScript</span></a></span><span>
</span><span id="line-666"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash (EraCrypto era)
</span><a href="#local-6989586621679426205"><span class="hs-identifier hs-var">scriptHash</span></a></span><span>
</span><span id="line-667"></span><span>
</span><span id="line-668"></span><span id="local-6989586621679428252"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNativeScriptsRequired"><span class="hs-identifier hs-type">impNativeScriptsRequired</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-669"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraUTxO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428252"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-670"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428252"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-671"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428252"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428252"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">NativeScript</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428252"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-672"></span><span id="impNativeScriptsRequired"><span class="annot"><span class="annottext">impNativeScriptsRequired :: forall era.
EraUTxO era =&gt;
Tx era
-&gt; ImpTestM
     era (Map (ScriptHash (EraCrypto era)) (NativeScript era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNativeScriptsRequired"><span class="hs-identifier hs-var hs-var">impNativeScriptsRequired</span></a></span></span><span> </span><span id="local-6989586621679426190"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679426190"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-673"></span><span>  </span><span id="local-6989586621679426189"><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621679426189"><span class="hs-identifier hs-var">utxo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era. ImpTestM era (UTxO era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getUTxO"><span class="hs-identifier hs-var">getUTxO</span></a></span><span>
</span><span id="line-674"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679426188"><span class="annot"><span class="annottext">Map (ScriptHash (EraCrypto era)) (NativeScript era)
impNativeScripts :: Map (ScriptHash (EraCrypto era)) (NativeScript era)
impNativeScripts :: forall era.
ImpTestState era
-&gt; Map (ScriptHash (EraCrypto era)) (NativeScript era)
</span><a href="#local-6989586621679426188"><span class="hs-identifier hs-var hs-var">impNativeScripts</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *). MonadState s m =&gt; m s
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">get</span></a></span><span>
</span><span id="line-675"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679426187"><span class="annot"><span class="annottext">needed :: ScriptsNeeded era
</span><a href="#local-6989586621679426187"><span class="hs-identifier hs-var hs-var">needed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
EraUTxO era =&gt;
UTxO era -&gt; TxBody era -&gt; ScriptsNeeded era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">getScriptsNeeded</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621679426189"><span class="hs-identifier hs-var">utxo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679426190"><span class="hs-identifier hs-var">tx</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-676"></span><span>      </span><span id="local-6989586621679426184"><span class="annot"><span class="annottext">hashesNeeded :: Set (ScriptHash (EraCrypto era))
</span><a href="#local-6989586621679426184"><span class="hs-identifier hs-var hs-var">hashesNeeded</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
EraUTxO era =&gt;
ScriptsNeeded era -&gt; Set (ScriptHash (EraCrypto era))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">getScriptsHashesNeeded</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptsNeeded era
</span><a href="#local-6989586621679426187"><span class="hs-identifier hs-var">needed</span></a></span><span>
</span><span id="line-677"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Map (ScriptHash (EraCrypto era)) (NativeScript era)
</span><a href="#local-6989586621679426188"><span class="hs-identifier hs-var">impNativeScripts</span></a></span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; Map k a -&gt; Set k -&gt; Map k a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-operator hs-var">`Map.restrictKeys`</span></a></span><span> </span><span class="annot"><span class="annottext">Set (ScriptHash (EraCrypto era))
</span><a href="#local-6989586621679426184"><span class="hs-identifier hs-var">hashesNeeded</span></a></span><span>
</span><span id="line-678"></span><span>
</span><span id="line-679"></span><span class="hs-comment">-- | Modifies transaction by adding necessary scripts</span><span>
</span><span id="line-680"></span><span id="local-6989586621679428248"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#addNativeScriptTxWits"><span class="hs-identifier hs-type">addNativeScriptTxWits</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-681"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428248"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-682"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428248"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-683"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428248"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428248"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-684"></span><span id="addNativeScriptTxWits"><span class="annot"><span class="annottext">addNativeScriptTxWits :: forall era. ShelleyEraImp era =&gt; Tx era -&gt; ImpTestM era (Tx era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#addNativeScriptTxWits"><span class="hs-identifier hs-var hs-var">addNativeScriptTxWits</span></a></span></span><span> </span><span id="local-6989586621679426160"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679426160"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-685"></span><span>  </span><span id="local-6989586621679426159"><span class="annot"><span class="annottext">Map (ScriptHash (EraCrypto era)) (NativeScript era)
</span><a href="#local-6989586621679426159"><span class="hs-identifier hs-var">scriptsRequired</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era.
EraUTxO era =&gt;
Tx era
-&gt; ImpTestM
     era (Map (ScriptHash (EraCrypto era)) (NativeScript era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNativeScriptsRequired"><span class="hs-identifier hs-var">impNativeScriptsRequired</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679426160"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-686"></span><span>  </span><span id="local-6989586621679426158"><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621679426158"><span class="hs-identifier hs-var">utxo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era. ImpTestM era (UTxO era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getUTxO"><span class="hs-identifier hs-var">getUTxO</span></a></span><span>
</span><span id="line-687"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">ScriptsProvided</span></a></span><span> </span><span id="local-6989586621679426156"><span class="annot"><span class="annottext">Map (ScriptHash (EraCrypto era)) (Script era)
</span><a href="#local-6989586621679426156"><span class="hs-identifier hs-var">provided</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
EraUTxO era =&gt;
UTxO era -&gt; Tx era -&gt; ScriptsProvided era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">getScriptsProvided</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621679426158"><span class="hs-identifier hs-var">utxo</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679426160"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-688"></span><span>      </span><span id="local-6989586621679426154"><span class="annot"><span class="annottext">scriptsToAdd :: Map (ScriptHash (EraCrypto era)) (NativeScript era)
</span><a href="#local-6989586621679426154"><span class="hs-identifier hs-var hs-var">scriptsToAdd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (ScriptHash (EraCrypto era)) (NativeScript era)
</span><a href="#local-6989586621679426159"><span class="hs-identifier hs-var">scriptsRequired</span></a></span><span> </span><span class="annot"><span class="annottext">forall k a b. Ord k =&gt; Map k a -&gt; Map k b -&gt; Map k a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-operator hs-var">Map.\\</span></a></span><span> </span><span class="annot"><span class="annottext">Map (ScriptHash (EraCrypto era)) (Script era)
</span><a href="#local-6989586621679426156"><span class="hs-identifier hs-var">provided</span></a></span><span>
</span><span id="line-689"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-690"></span><span>    </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679426160"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-691"></span><span>      </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTx era =&gt; Lens' (Tx era) (TxWits era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">witsTxL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
EraTxWits era =&gt;
Lens' (TxWits era) (Map (ScriptHash (EraCrypto era)) (Script era))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">scriptTxWitsL</span></a></span><span> </span><span class="annot"><span class="annottext">forall a s t. Monoid a =&gt; ASetter s t a a -&gt; a -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">&lt;&gt;~</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraScript era =&gt; NativeScript era -&gt; Script era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">fromNativeScript</span></a></span><span> </span><span class="annot"><span class="annottext">Map (ScriptHash (EraCrypto era)) (NativeScript era)
</span><a href="#local-6989586621679426154"><span class="hs-identifier hs-var">scriptsToAdd</span></a></span><span>
</span><span id="line-692"></span><span>
</span><span id="line-693"></span><span class="hs-comment">-- | Adds @TxWits@ that will satisfy all of the required key witnesses</span><span>
</span><span id="line-694"></span><span id="local-6989586621679428236"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#updateAddrTxWits"><span class="hs-identifier hs-type">updateAddrTxWits</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-695"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span>
</span><span id="line-696"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428236"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-697"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-698"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428236"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-699"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428236"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428236"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-700"></span><span id="updateAddrTxWits"><span class="annot"><span class="annottext">updateAddrTxWits :: forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era -&gt; ImpTestM era (Tx era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#updateAddrTxWits"><span class="hs-identifier hs-var hs-var">updateAddrTxWits</span></a></span></span><span> </span><span id="local-6989586621679426064"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679426064"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-701"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679426063"><span class="annot"><span class="annottext">txBody :: TxBody era
</span><a href="#local-6989586621679426063"><span class="hs-identifier hs-var hs-var">txBody</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679426064"><span class="hs-identifier hs-var">tx</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span>
</span><span id="line-702"></span><span>      </span><span id="local-6989586621679426062"><span class="annot"><span class="annottext">txBodyHash :: SafeHash (EraCrypto era) EraIndependentTxBody
</span><a href="#local-6989586621679426062"><span class="hs-identifier hs-var hs-var">txBodyHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall x index c.
(HashAnnotated x index c, HashAlgorithm (HASH c)) =&gt;
x -&gt; SafeHash c index
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">hashAnnotated</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621679426063"><span class="hs-identifier hs-var">txBody</span></a></span><span>
</span><span id="line-703"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621679426060"><span class="annot"><span class="annottext">Set (BootstrapAddress (EraCrypto era))
</span><a href="#local-6989586621679426060"><span class="hs-identifier hs-var">bootAddrs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679426059"><span class="annot"><span class="annottext">Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621679426059"><span class="hs-identifier hs-var">witsVKeyNeeded</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era.
EraUTxO era =&gt;
TxBody era
-&gt; ImpTestM
     era
     (Set (BootstrapAddress (EraCrypto era)),
      Set (KeyHash 'Witness (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impWitsVKeyNeeded"><span class="hs-identifier hs-var">impWitsVKeyNeeded</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody era
</span><a href="#local-6989586621679426063"><span class="hs-identifier hs-var">txBody</span></a></span><span>
</span><span id="line-704"></span><span>  </span><span class="hs-comment">-- Shelley Based Addr Witnesses</span><span>
</span><span id="line-705"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679426058"><span class="annot"><span class="annottext">curAddrWitHashes :: Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621679426058"><span class="hs-identifier hs-var hs-var">curAddrWitHashes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b a. Ord b =&gt; (a -&gt; b) -&gt; Set a -&gt; Set b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.map</span></a></span><span> </span><span class="annot"><span class="annottext">forall (kr :: KeyRole) c. WitVKey kr c -&gt; KeyHash 'Witness c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">witVKeyHash</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679426064"><span class="hs-identifier hs-var">tx</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTx era =&gt; Lens' (Tx era) (TxWits era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">witsTxL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
EraTxWits era =&gt;
Lens' (TxWits era) (Set (WitVKey 'Witness (EraCrypto era)))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">addrTxWitsL</span></a></span><span>
</span><span id="line-706"></span><span>  </span><span id="local-6989586621679426056"><span class="annot"><span class="annottext">[KeyPair 'Witness (EraCrypto era)]
</span><a href="#local-6989586621679426056"><span class="hs-identifier hs-var">extraKeyPairs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">forall (r :: KeyRole) era.
HasCallStack =&gt;
KeyHash r (EraCrypto era)
-&gt; ImpTestM era (KeyPair r (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#lookupKeyPair"><span class="hs-identifier hs-var">lookupKeyPair</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Set a -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.toList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621679426059"><span class="hs-identifier hs-var">witsVKeyNeeded</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-operator hs-var">Set.\\</span></a></span><span> </span><span class="annot"><span class="annottext">Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621679426058"><span class="hs-identifier hs-var">curAddrWitHashes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-707"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679426054"><span class="annot"><span class="annottext">extraAddrVKeyWits :: Set (WitVKey 'Witness (EraCrypto era))
</span><a href="#local-6989586621679426054"><span class="hs-identifier hs-var hs-var">extraAddrVKeyWits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall c (kr :: KeyRole).
(Crypto c, DSignable c (Hash (HASH c) EraIndependentTxBody)) =&gt;
SafeHash c EraIndependentTxBody
-&gt; [KeyPair kr c] -&gt; Set (WitVKey 'Witness c)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">mkWitnessesVKey</span></a></span><span> </span><span class="annot"><span class="annottext">SafeHash (EraCrypto era) EraIndependentTxBody
</span><a href="#local-6989586621679426062"><span class="hs-identifier hs-var">txBodyHash</span></a></span><span> </span><span class="annot"><span class="annottext">[KeyPair 'Witness (EraCrypto era)]
</span><a href="#local-6989586621679426056"><span class="hs-identifier hs-var">extraKeyPairs</span></a></span><span>
</span><span id="line-708"></span><span>      </span><span id="local-6989586621679426053"><span class="annot"><span class="annottext">addrWitHashes :: Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621679426053"><span class="hs-identifier hs-var hs-var">addrWitHashes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621679426058"><span class="hs-identifier hs-var">curAddrWitHashes</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall b a. Ord b =&gt; (a -&gt; b) -&gt; Set a -&gt; Set b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.map</span></a></span><span> </span><span class="annot"><span class="annottext">forall (kr :: KeyRole) c. WitVKey kr c -&gt; KeyHash 'Witness c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">witVKeyHash</span></a></span><span> </span><span class="annot"><span class="annottext">Set (WitVKey 'Witness (EraCrypto era))
</span><a href="#local-6989586621679426054"><span class="hs-identifier hs-var">extraAddrVKeyWits</span></a></span><span>
</span><span id="line-709"></span><span>  </span><span class="hs-comment">-- Shelley Based Native Script Witnesses</span><span>
</span><span id="line-710"></span><span>  </span><span id="local-6989586621679426052"><span class="annot"><span class="annottext">Map (ScriptHash (EraCrypto era)) (NativeScript era)
</span><a href="#local-6989586621679426052"><span class="hs-identifier hs-var">scriptsRequired</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era.
EraUTxO era =&gt;
Tx era
-&gt; ImpTestM
     era (Map (ScriptHash (EraCrypto era)) (NativeScript era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNativeScriptsRequired"><span class="hs-identifier hs-var">impNativeScriptsRequired</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679426064"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-711"></span><span>  </span><span id="local-6989586621679426051"><span class="annot"><span class="annottext">[Maybe
   (Map
      (KeyHash 'Witness (EraCrypto era))
      (KeyPair 'Witness (EraCrypto era)))]
</span><a href="#local-6989586621679426051"><span class="hs-identifier hs-var">nativeScriptsKeyPairs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
ShelleyEraImp era =&gt;
Set (KeyHash 'Witness (EraCrypto era))
-&gt; NativeScript era
-&gt; ImpTestM
     era
     (Maybe
        (Map
           (KeyHash 'Witness (EraCrypto era))
           (KeyPair 'Witness (EraCrypto era))))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impSatisfyNativeScript"><span class="hs-identifier hs-var">impSatisfyNativeScript</span></a></span><span> </span><span class="annot"><span class="annottext">Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621679426053"><span class="hs-identifier hs-var">addrWitHashes</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k a. Map k a -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.elems</span></a></span><span> </span><span class="annot"><span class="annottext">Map (ScriptHash (EraCrypto era)) (NativeScript era)
</span><a href="#local-6989586621679426052"><span class="hs-identifier hs-var">scriptsRequired</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-712"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679426049"><span class="annot"><span class="annottext">extraNativeScriptVKeyWits :: Set (WitVKey 'Witness (EraCrypto era))
</span><a href="#local-6989586621679426049"><span class="hs-identifier hs-var hs-var">extraNativeScriptVKeyWits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-713"></span><span>        </span><span class="annot"><span class="annottext">forall c (kr :: KeyRole).
(Crypto c, DSignable c (Hash (HASH c) EraIndependentTxBody)) =&gt;
SafeHash c EraIndependentTxBody
-&gt; [KeyPair kr c] -&gt; Set (WitVKey 'Witness c)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">mkWitnessesVKey</span></a></span><span> </span><span class="annot"><span class="annottext">SafeHash (EraCrypto era) EraIndependentTxBody
</span><a href="#local-6989586621679426062"><span class="hs-identifier hs-var">txBodyHash</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall k a. Map k a -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.elems</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. [Maybe a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">catMaybes</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe
   (Map
      (KeyHash 'Witness (EraCrypto era))
      (KeyPair 'Witness (EraCrypto era)))]
</span><a href="#local-6989586621679426051"><span class="hs-identifier hs-var">nativeScriptsKeyPairs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-714"></span><span>  </span><span class="hs-comment">-- Byron Based Witessed</span><span>
</span><span id="line-715"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679426048"><span class="annot"><span class="annottext">curBootAddrWitHashes :: Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621679426048"><span class="hs-identifier hs-var hs-var">curBootAddrWitHashes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b a. Ord b =&gt; (a -&gt; b) -&gt; Set a -&gt; Set b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.map</span></a></span><span> </span><span class="annot"><span class="annottext">forall c. Crypto c =&gt; BootstrapWitness c -&gt; KeyHash 'Witness c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">bootstrapWitKeyHash</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679426064"><span class="hs-identifier hs-var">tx</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTx era =&gt; Lens' (Tx era) (TxWits era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">witsTxL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
EraTxWits era =&gt;
Lens' (TxWits era) (Set (BootstrapWitness (EraCrypto era)))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">bootAddrTxWitsL</span></a></span><span>
</span><span id="line-716"></span><span>      </span><span id="local-6989586621679426046"><span class="annot"><span class="annottext">bootAddrWitsNeeded :: [BootstrapAddress (EraCrypto era)]
</span><a href="#local-6989586621679426046"><span class="hs-identifier hs-var hs-var">bootAddrWitsNeeded</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-717"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">BootstrapAddress (EraCrypto era)
</span><a href="#local-6989586621679426045"><span class="hs-identifier hs-var">bootAddr</span></a></span><span>
</span><span id="line-718"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621679426045"><span class="annot"><span class="annottext">BootstrapAddress (EraCrypto era)
</span><a href="#local-6989586621679426045"><span class="hs-identifier hs-var">bootAddr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a. Set a -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.toList</span></a></span><span> </span><span class="annot"><span class="annottext">Set (BootstrapAddress (EraCrypto era))
</span><a href="#local-6989586621679426060"><span class="hs-identifier hs-var">bootAddrs</span></a></span><span>
</span><span id="line-719"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">not</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (a :: KeyRole -&gt; * -&gt; *) (r :: KeyRole) c (r' :: KeyRole).
HasKeyRole a =&gt;
a r c -&gt; a r' c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">coerceKeyRole</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall c. Crypto c =&gt; BootstrapAddress c -&gt; KeyHash 'Payment c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">bootstrapKeyHash</span></a></span><span> </span><span class="annot"><span class="annottext">BootstrapAddress (EraCrypto era)
</span><a href="#local-6989586621679426045"><span class="hs-identifier hs-var">bootAddr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-operator hs-var">`Set.member`</span></a></span><span> </span><span class="annot"><span class="annottext">Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621679426048"><span class="hs-identifier hs-var">curBootAddrWitHashes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-720"></span><span>        </span><span class="hs-special">]</span><span>
</span><span id="line-721"></span><span>  </span><span id="local-6989586621679426043"><span class="annot"><span class="annottext">[BootstrapWitness (EraCrypto era)]
</span><a href="#local-6989586621679426043"><span class="hs-identifier hs-var">extraBootAddrWits</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">forM</span></a></span><span> </span><span class="annot"><span class="annottext">[BootstrapAddress (EraCrypto era)]
</span><a href="#local-6989586621679426046"><span class="hs-identifier hs-var">bootAddrWitsNeeded</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679426042"><span class="annot"><span class="annottext">bootAddr :: BootstrapAddress (EraCrypto era)
</span><a href="#local-6989586621679426042"><span class="hs-identifier hs-var">bootAddr</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">BootstrapAddress</span></a></span><span> </span><span id="local-6989586621679426040"><span class="annot"><span class="annottext">Address
</span><a href="#local-6989586621679426040"><span class="hs-identifier hs-var">byronAddr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-722"></span><span>    </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">ByronKeyPair</span></a></span><span> </span><span class="annot"><span class="annottext">VerificationKey
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679426038"><span class="annot"><span class="annottext">SigningKey
</span><a href="#local-6989586621679426038"><span class="hs-identifier hs-var">signingKey</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era.
HasCallStack =&gt;
BootstrapAddress (EraCrypto era) -&gt; ImpTestM era ByronKeyPair
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#lookupByronKeyPair"><span class="hs-identifier hs-var">lookupByronKeyPair</span></a></span><span> </span><span class="annot"><span class="annottext">BootstrapAddress (EraCrypto era)
</span><a href="#local-6989586621679426042"><span class="hs-identifier hs-var">bootAddr</span></a></span><span>
</span><span id="line-723"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679426037"><span class="annot"><span class="annottext">attrs :: Attributes AddrAttributes
</span><a href="#local-6989586621679426037"><span class="hs-identifier hs-var hs-var">attrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Address -&gt; Attributes AddrAttributes
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-byron-1.0.0.4/doc/html/cardano-ledger-byron/src"><span class="hs-identifier hs-var">Byron.addrAttributes</span></a></span><span> </span><span class="annot"><span class="annottext">Address
</span><a href="#local-6989586621679426040"><span class="hs-identifier hs-var">byronAddr</span></a></span><span>
</span><span id="line-724"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall c.
(DSIGN c ~ Ed25519DSIGN, Crypto c) =&gt;
Hash c EraIndependentTxBody
-&gt; SigningKey -&gt; Attributes AddrAttributes -&gt; BootstrapWitness c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">makeBootstrapWitness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall c i. SafeHash c i -&gt; Hash (HASH c) i
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">extractHash</span></a></span><span> </span><span class="annot"><span class="annottext">SafeHash (EraCrypto era) EraIndependentTxBody
</span><a href="#local-6989586621679426062"><span class="hs-identifier hs-var">txBodyHash</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SigningKey
</span><a href="#local-6989586621679426038"><span class="hs-identifier hs-var">signingKey</span></a></span><span> </span><span class="annot"><span class="annottext">Attributes AddrAttributes
</span><a href="#local-6989586621679426037"><span class="hs-identifier hs-var">attrs</span></a></span><span>
</span><span id="line-725"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-726"></span><span>    </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679426064"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-727"></span><span>      </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTx era =&gt; Lens' (Tx era) (TxWits era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">witsTxL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
EraTxWits era =&gt;
Lens' (TxWits era) (Set (WitVKey 'Witness (EraCrypto era)))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">addrTxWitsL</span></a></span><span> </span><span class="annot"><span class="annottext">forall a s t. Monoid a =&gt; ASetter s t a a -&gt; a -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">&lt;&gt;~</span></a></span><span> </span><span class="annot"><span class="annottext">Set (WitVKey 'Witness (EraCrypto era))
</span><a href="#local-6989586621679426054"><span class="hs-identifier hs-var">extraAddrVKeyWits</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Set (WitVKey 'Witness (EraCrypto era))
</span><a href="#local-6989586621679426049"><span class="hs-identifier hs-var">extraNativeScriptVKeyWits</span></a></span><span>
</span><span id="line-728"></span><span>      </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTx era =&gt; Lens' (Tx era) (TxWits era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">witsTxL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
EraTxWits era =&gt;
Lens' (TxWits era) (Set (BootstrapWitness (EraCrypto era)))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">bootAddrTxWitsL</span></a></span><span> </span><span class="annot"><span class="annottext">forall a s t. Monoid a =&gt; ASetter s t a a -&gt; a -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">&lt;&gt;~</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; [a] -&gt; Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">[BootstrapWitness (EraCrypto era)]
</span><a href="#local-6989586621679426043"><span class="hs-identifier hs-var">extraBootAddrWits</span></a></span><span>
</span><span id="line-729"></span><span>
</span><span id="line-730"></span><span class="hs-comment">-- | This fixup step ensures that there are enough funds in the transaction.</span><span>
</span><span id="line-731"></span><span id="local-6989586621679428198"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#addRootTxIn"><span class="hs-identifier hs-type">addRootTxIn</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-732"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428198"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-733"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428198"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-734"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428198"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428198"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-735"></span><span id="addRootTxIn"><span class="annot"><span class="annottext">addRootTxIn :: forall era. EraTx era =&gt; Tx era -&gt; ImpTestM era (Tx era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#addRootTxIn"><span class="hs-identifier hs-var hs-var">addRootTxIn</span></a></span></span><span> </span><span id="local-6989586621679426024"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679426024"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-736"></span><span>  </span><span id="local-6989586621679426023"><span class="annot"><span class="annottext">TxIn (EraCrypto era)
</span><a href="#local-6989586621679426023"><span class="hs-identifier hs-var">rootTxIn</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. ImpTestM era (TxIn (EraCrypto era), TxOut era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#lookupImpRootTxOut"><span class="hs-identifier hs-var">lookupImpRootTxOut</span></a></span><span>
</span><span id="line-737"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-738"></span><span>    </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679426024"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-739"></span><span>      </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (Set (TxIn (EraCrypto era)))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">inputsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">%~</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.insert</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn (EraCrypto era)
</span><a href="#local-6989586621679426023"><span class="hs-identifier hs-var">rootTxIn</span></a></span><span>
</span><span id="line-740"></span><span>
</span><span id="line-741"></span><span id="local-6989586621679428194"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNativeScriptKeyPairs"><span class="hs-identifier hs-type">impNativeScriptKeyPairs</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-742"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428194"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-743"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428194"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-744"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span>
</span><span id="line-745"></span><span>    </span><span class="annot"><a href="#local-6989586621679428194"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-746"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Witness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428194"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyPair</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Witness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428194"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-747"></span><span id="impNativeScriptKeyPairs"><span class="annot"><span class="annottext">impNativeScriptKeyPairs :: forall era.
ShelleyEraImp era =&gt;
Tx era
-&gt; ImpTestM
     era
     (Map
        (KeyHash 'Witness (EraCrypto era))
        (KeyPair 'Witness (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNativeScriptKeyPairs"><span class="hs-identifier hs-var hs-var">impNativeScriptKeyPairs</span></a></span></span><span> </span><span id="local-6989586621679426002"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679426002"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-748"></span><span>  </span><span id="local-6989586621679426001"><span class="annot"><span class="annottext">Map (ScriptHash (EraCrypto era)) (NativeScript era)
</span><a href="#local-6989586621679426001"><span class="hs-identifier hs-var">scriptsRequired</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era.
EraUTxO era =&gt;
Tx era
-&gt; ImpTestM
     era (Map (ScriptHash (EraCrypto era)) (NativeScript era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNativeScriptsRequired"><span class="hs-identifier hs-var">impNativeScriptsRequired</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679426002"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-749"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679426000"><span class="annot"><span class="annottext">nativeScripts :: [NativeScript era]
</span><a href="#local-6989586621679426000"><span class="hs-identifier hs-var hs-var">nativeScripts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k a. Map k a -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.elems</span></a></span><span> </span><span class="annot"><span class="annottext">Map (ScriptHash (EraCrypto era)) (NativeScript era)
</span><a href="#local-6989586621679426001"><span class="hs-identifier hs-var">scriptsRequired</span></a></span><span>
</span><span id="line-750"></span><span>      </span><span id="local-6989586621679425999"><span class="annot"><span class="annottext">curAddrWits :: Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621679425999"><span class="hs-identifier hs-var hs-var">curAddrWits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall b a. Ord b =&gt; (a -&gt; b) -&gt; Set a -&gt; Set b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Set.map</span></a></span><span> </span><span class="annot"><span class="annottext">forall (kr :: KeyRole) c. WitVKey kr c -&gt; KeyHash 'Witness c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">witVKeyHash</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679426002"><span class="hs-identifier hs-var">tx</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTx era =&gt; Lens' (Tx era) (TxWits era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">witsTxL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
EraTxWits era =&gt;
Lens' (TxWits era) (Set (WitVKey 'Witness (EraCrypto era)))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">addrTxWitsL</span></a></span><span>
</span><span id="line-751"></span><span>  </span><span id="local-6989586621679425998"><span class="annot"><span class="annottext">[Maybe
   (Map
      (KeyHash 'Witness (EraCrypto era))
      (KeyPair 'Witness (EraCrypto era)))]
</span><a href="#local-6989586621679425998"><span class="hs-identifier hs-var">keyPairs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
ShelleyEraImp era =&gt;
Set (KeyHash 'Witness (EraCrypto era))
-&gt; NativeScript era
-&gt; ImpTestM
     era
     (Maybe
        (Map
           (KeyHash 'Witness (EraCrypto era))
           (KeyPair 'Witness (EraCrypto era))))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impSatisfyNativeScript"><span class="hs-identifier hs-var">impSatisfyNativeScript</span></a></span><span> </span><span class="annot"><span class="annottext">Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621679425999"><span class="hs-identifier hs-var">curAddrWits</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[NativeScript era]
</span><a href="#local-6989586621679426000"><span class="hs-identifier hs-var">nativeScripts</span></a></span><span>
</span><span id="line-752"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">mconcat</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [Maybe a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">catMaybes</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe
   (Map
      (KeyHash 'Witness (EraCrypto era))
      (KeyPair 'Witness (EraCrypto era)))]
</span><a href="#local-6989586621679425998"><span class="hs-identifier hs-var">keyPairs</span></a></span><span>
</span><span id="line-753"></span><span>
</span><span id="line-754"></span><span id="local-6989586621679425997"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#fixupFees"><span class="hs-identifier hs-type">fixupFees</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-755"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679425997"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-756"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679425997"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-757"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679425997"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679425997"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-758"></span><span id="fixupFees"><span class="annot"><span class="annottext">fixupFees :: forall era.
(ShelleyEraImp era, HasCallStack) =&gt;
Tx era -&gt; ImpTestM era (Tx era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#fixupFees"><span class="hs-identifier hs-var hs-var">fixupFees</span></a></span></span><span> </span><span id="local-6989586621679425913"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425913"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-759"></span><span>  </span><span id="local-6989586621679425912"><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621679425912"><span class="hs-identifier hs-var">pp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (NewEpochState era) (EpochState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">curPParamsEpochStateL</span></a></span><span>
</span><span id="line-760"></span><span>  </span><span id="local-6989586621679425908"><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621679425908"><span class="hs-identifier hs-var">utxo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era. ImpTestM era (UTxO era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getUTxO"><span class="hs-identifier hs-var">getUTxO</span></a></span><span>
</span><span id="line-761"></span><span>  </span><span id="local-6989586621679425907"><span class="annot"><span class="annottext">CertState era
</span><a href="#local-6989586621679425907"><span class="hs-identifier hs-var">certState</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (NewEpochState era) (EpochState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (EpochState era) (LedgerState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">esLStateL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (LedgerState era) (CertState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">lsCertStateL</span></a></span><span>
</span><span id="line-762"></span><span>  </span><span id="local-6989586621679425903"><span class="annot"><span class="annottext">KeyPair 'Payment (EraCrypto era)
</span><a href="#local-6989586621679425903"><span class="hs-identifier hs-var">kpSpending</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (r :: KeyRole) era.
HasCallStack =&gt;
KeyHash r (EraCrypto era)
-&gt; ImpTestM era (KeyPair r (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#lookupKeyPair"><span class="hs-identifier hs-var">lookupKeyPair</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era (r :: KeyRole).
Era era =&gt;
ImpTestM era (KeyHash r (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-var">freshKeyHash</span></a></span><span>
</span><span id="line-763"></span><span>  </span><span id="local-6989586621679425902"><span class="annot"><span class="annottext">KeyPair 'Staking (EraCrypto era)
</span><a href="#local-6989586621679425902"><span class="hs-identifier hs-var">kpStaking</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (r :: KeyRole) era.
HasCallStack =&gt;
KeyHash r (EraCrypto era)
-&gt; ImpTestM era (KeyPair r (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#lookupKeyPair"><span class="hs-identifier hs-var">lookupKeyPair</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era (r :: KeyRole).
Era era =&gt;
ImpTestM era (KeyHash r (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-var">freshKeyHash</span></a></span><span>
</span><span id="line-764"></span><span>  </span><span id="local-6989586621679425901"><span class="annot"><span class="annottext">Map
  (KeyHash 'Witness (EraCrypto era))
  (KeyPair 'Witness (EraCrypto era))
</span><a href="#local-6989586621679425901"><span class="hs-identifier hs-var">nativeScriptKeyPairs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era.
ShelleyEraImp era =&gt;
Tx era
-&gt; ImpTestM
     era
     (Map
        (KeyHash 'Witness (EraCrypto era))
        (KeyPair 'Witness (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNativeScriptKeyPairs"><span class="hs-identifier hs-var">impNativeScriptKeyPairs</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425913"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-765"></span><span>  </span><span class="hs-keyword">let</span><span>
</span><span id="line-766"></span><span>    </span><span id="local-6989586621679425900"><span class="annot"><span class="annottext">nativeScriptKeyWits :: Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621679425900"><span class="hs-identifier hs-var hs-var">nativeScriptKeyWits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k a. Map k a -&gt; Set k
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.keysSet</span></a></span><span> </span><span class="annot"><span class="annottext">Map
  (KeyHash 'Witness (EraCrypto era))
  (KeyPair 'Witness (EraCrypto era))
</span><a href="#local-6989586621679425901"><span class="hs-identifier hs-var">nativeScriptKeyPairs</span></a></span><span>
</span><span id="line-767"></span><span>    </span><span id="local-6989586621679425898"><span class="annot"><span class="annottext">consumedValue :: Value era
</span><a href="#local-6989586621679425898"><span class="hs-identifier hs-var hs-var">consumedValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
EraUTxO era =&gt;
PParams era -&gt; CertState era -&gt; UTxO era -&gt; TxBody era -&gt; Value era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">consumed</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621679425912"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="annot"><span class="annottext">CertState era
</span><a href="#local-6989586621679425907"><span class="hs-identifier hs-var">certState</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621679425908"><span class="hs-identifier hs-var">utxo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425913"><span class="hs-identifier hs-var">tx</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-768"></span><span>    </span><span id="local-6989586621679425897"><span class="annot"><span class="annottext">producedValue :: Value era
</span><a href="#local-6989586621679425897"><span class="hs-identifier hs-var hs-var">producedValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
EraUTxO era =&gt;
PParams era -&gt; CertState era -&gt; TxBody era -&gt; Value era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">produced</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621679425912"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="annot"><span class="annottext">CertState era
</span><a href="#local-6989586621679425907"><span class="hs-identifier hs-var">certState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425913"><span class="hs-identifier hs-var">tx</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-769"></span><span>    </span><span id="local-6989586621679425896"><span class="annot"><span class="annottext">changeBeforeFee :: Value era
</span><a href="#local-6989586621679425896"><span class="hs-identifier hs-var hs-var">changeBeforeFee</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value era
</span><a href="#local-6989586621679425898"><span class="hs-identifier hs-var">consumedValue</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. Val t =&gt; t -&gt; t -&gt; t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-operator hs-var">&lt;-&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Value era
</span><a href="#local-6989586621679425897"><span class="hs-identifier hs-var">producedValue</span></a></span><span>
</span><span id="line-770"></span><span>    </span><span id="local-6989586621679425894"><span class="annot"><span class="annottext">changeBeforeFeeTxOut :: TxOut era
</span><a href="#local-6989586621679425894"><span class="hs-identifier hs-var hs-var">changeBeforeFeeTxOut</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-771"></span><span>      </span><span class="annot"><span class="annottext">forall era.
(EraTxOut era, HasCallStack) =&gt;
Addr (EraCrypto era) -&gt; Value era -&gt; TxOut era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">mkBasicTxOut</span></a></span><span>
</span><span id="line-772"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall c.
Crypto c =&gt;
(KeyPair 'Payment c, KeyPair 'Staking c) -&gt; Addr c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">mkAddr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeyPair 'Payment (EraCrypto era)
</span><a href="#local-6989586621679425903"><span class="hs-identifier hs-var">kpSpending</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">KeyPair 'Staking (EraCrypto era)
</span><a href="#local-6989586621679425902"><span class="hs-identifier hs-var">kpStaking</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-773"></span><span>        </span><span class="annot"><span class="annottext">Value era
</span><a href="#local-6989586621679425896"><span class="hs-identifier hs-var">changeBeforeFee</span></a></span><span>
</span><span id="line-774"></span><span>  </span><span class="hs-keyword">let</span><span>
</span><span id="line-775"></span><span>    </span><span id="local-6989586621679425892"><span class="annot"><span class="annottext">txNoWits :: Tx era
</span><a href="#local-6989586621679425892"><span class="hs-identifier hs-var hs-var">txNoWits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425913"><span class="hs-identifier hs-var">tx</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxOut era))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">outputsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">%~</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. StrictSeq a -&gt; a -&gt; StrictSeq a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-strict-containers-0.1.3.0-c8c434ba474a408c40a155b68fe1059a1c9196931f80e9c4ade09421da2372fd/share/doc/html/src"><span class="hs-operator hs-var">:|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut era
</span><a href="#local-6989586621679425894"><span class="hs-identifier hs-var">changeBeforeFeeTxOut</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-776"></span><span>    </span><span id="local-6989586621679425889"><span class="annot"><span class="annottext">outsBeforeFee :: StrictSeq (TxOut era)
</span><a href="#local-6989586621679425889"><span class="hs-identifier hs-var hs-var">outsBeforeFee</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425913"><span class="hs-identifier hs-var">tx</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxOut era))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">outputsTxBodyL</span></a></span><span>
</span><span id="line-777"></span><span>    </span><span id="local-6989586621679425888"><span class="annot"><span class="annottext">fee :: Coin
</span><a href="#local-6989586621679425888"><span class="hs-identifier hs-var hs-var">fee</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
EraUTxO era =&gt;
UTxO era
-&gt; PParams era
-&gt; Tx era
-&gt; Set (KeyHash 'Witness (EraCrypto era))
-&gt; Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">calcMinFeeTxNativeScriptWits</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621679425908"><span class="hs-identifier hs-var">utxo</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621679425912"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425892"><span class="hs-identifier hs-var">txNoWits</span></a></span><span> </span><span class="annot"><span class="annottext">Set (KeyHash 'Witness (EraCrypto era))
</span><a href="#local-6989586621679425900"><span class="hs-identifier hs-var">nativeScriptKeyWits</span></a></span><span>
</span><span id="line-778"></span><span>    </span><span id="local-6989586621679425887"><span class="annot"><span class="annottext">change :: Coin
</span><a href="#local-6989586621679425887"><span class="hs-identifier hs-var hs-var">change</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxOut era
</span><a href="#local-6989586621679425894"><span class="hs-identifier hs-var">changeBeforeFeeTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. (HasCallStack, EraTxOut era) =&gt; Lens' (TxOut era) Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">coinTxOutL</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. Val t =&gt; t -&gt; t -&gt; t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-operator hs-var">&lt;-&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679425888"><span class="hs-identifier hs-var">fee</span></a></span><span>
</span><span id="line-779"></span><span>    </span><span id="local-6989586621679425885"><span class="annot"><span class="annottext">changeTxOut :: TxOut era
</span><a href="#local-6989586621679425885"><span class="hs-identifier hs-var hs-var">changeTxOut</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxOut era
</span><a href="#local-6989586621679425894"><span class="hs-identifier hs-var">changeBeforeFeeTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. (HasCallStack, EraTxOut era) =&gt; Lens' (TxOut era) Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">coinTxOutL</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679425887"><span class="hs-identifier hs-var">change</span></a></span><span>
</span><span id="line-780"></span><span>    </span><span class="hs-comment">-- If the remainder is sufficently big we add it to outputs, otherwise we add the</span><span>
</span><span id="line-781"></span><span>    </span><span class="hs-comment">-- extraneous coin to the fee and discard the remainder TxOut</span><span>
</span><span id="line-782"></span><span>    </span><span id="local-6989586621679425884"><span class="annot"><span class="annottext">txWithFee :: Tx era
</span><a href="#local-6989586621679425884"><span class="hs-identifier hs-var hs-var">txWithFee</span></a></span></span><span>
</span><span id="line-783"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679425887"><span class="hs-identifier hs-var">change</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTxOut era =&gt; PParams era -&gt; TxOut era -&gt; Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">getMinCoinTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621679425912"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut era
</span><a href="#local-6989586621679425885"><span class="hs-identifier hs-var">changeTxOut</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-784"></span><span>          </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425892"><span class="hs-identifier hs-var">txNoWits</span></a></span><span>
</span><span id="line-785"></span><span>            </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxOut era))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">outputsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StrictSeq (TxOut era)
</span><a href="#local-6989586621679425889"><span class="hs-identifier hs-var">outsBeforeFee</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. StrictSeq a -&gt; a -&gt; StrictSeq a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-strict-containers-0.1.3.0-c8c434ba474a408c40a155b68fe1059a1c9196931f80e9c4ade09421da2372fd/share/doc/html/src"><span class="hs-operator hs-var">:|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut era
</span><a href="#local-6989586621679425885"><span class="hs-identifier hs-var">changeTxOut</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-786"></span><span>            </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTxBody era =&gt; Lens' (TxBody era) Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">feeTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679425888"><span class="hs-identifier hs-var">fee</span></a></span><span>
</span><span id="line-787"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-788"></span><span>          </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425892"><span class="hs-identifier hs-var">txNoWits</span></a></span><span>
</span><span id="line-789"></span><span>            </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxOut era))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">outputsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">StrictSeq (TxOut era)
</span><a href="#local-6989586621679425889"><span class="hs-identifier hs-var">outsBeforeFee</span></a></span><span>
</span><span id="line-790"></span><span>            </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTxBody era =&gt; Lens' (TxBody era) Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">feeTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679425888"><span class="hs-identifier hs-var">fee</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut era
</span><a href="#local-6989586621679425885"><span class="hs-identifier hs-var">changeTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. (HasCallStack, EraTxOut era) =&gt; Lens' (TxOut era) Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">coinTxOutL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-791"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425884"><span class="hs-identifier hs-var">txWithFee</span></a></span><span>
</span><span id="line-792"></span><span>
</span><span id="line-793"></span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#shelleyFixupTx"><span class="hs-identifier hs-type">shelleyFixupTx</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-794"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679428565"><span class="annot"><a href="#local-6989586621679428565"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-795"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428565"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-796"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428565"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-797"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428565"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428565"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-798"></span><span id="shelleyFixupTx"><span class="annot"><span class="annottext">shelleyFixupTx :: forall era.
(ShelleyEraImp era, HasCallStack) =&gt;
Tx era -&gt; ImpTestM era (Tx era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#shelleyFixupTx"><span class="hs-identifier hs-var hs-var">shelleyFixupTx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-799"></span><span>  </span><span class="annot"><span class="annottext">forall era. ShelleyEraImp era =&gt; Tx era -&gt; ImpTestM era (Tx era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#addNativeScriptTxWits"><span class="hs-identifier hs-var">addNativeScriptTxWits</span></a></span><span>
</span><span id="line-800"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b c.
Monad m =&gt;
(a -&gt; m b) -&gt; (b -&gt; m c) -&gt; a -&gt; m c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;=&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTx era =&gt; Tx era -&gt; ImpTestM era (Tx era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#addRootTxIn"><span class="hs-identifier hs-var">addRootTxIn</span></a></span><span>
</span><span id="line-801"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b c.
Monad m =&gt;
(a -&gt; m b) -&gt; (b -&gt; m c) -&gt; a -&gt; m c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;=&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
(ShelleyEraImp era, HasCallStack) =&gt;
Tx era -&gt; ImpTestM era (Tx era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#fixupFees"><span class="hs-identifier hs-var">fixupFees</span></a></span><span>
</span><span id="line-802"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b c.
Monad m =&gt;
(a -&gt; m b) -&gt; (b -&gt; m c) -&gt; a -&gt; m c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;=&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era -&gt; ImpTestM era (Tx era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#updateAddrTxWits"><span class="hs-identifier hs-var">updateAddrTxWits</span></a></span><span>
</span><span id="line-803"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b c.
Monad m =&gt;
(a -&gt; m b) -&gt; (b -&gt; m c) -&gt; a -&gt; m c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;=&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679425860"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425860"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall era. (EraGov era, EraUTxO era) =&gt; Tx era -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#logFeeMismatch"><span class="hs-identifier hs-var">logFeeMismatch</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425860"><span class="hs-identifier hs-var">tx</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; b -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425860"><span class="hs-identifier hs-var">tx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-804"></span><span>
</span><span id="line-805"></span><span id="local-6989586621679428171"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#logFeeMismatch"><span class="hs-identifier hs-type">logFeeMismatch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">EraGov</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428171"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraUTxO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428171"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428171"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428171"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-806"></span><span id="logFeeMismatch"><span class="annot"><span class="annottext">logFeeMismatch :: forall era. (EraGov era, EraUTxO era) =&gt; Tx era -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#logFeeMismatch"><span class="hs-identifier hs-var hs-var">logFeeMismatch</span></a></span></span><span> </span><span id="local-6989586621679425834"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425834"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-807"></span><span>  </span><span id="local-6989586621679425833"><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621679425833"><span class="hs-identifier hs-var">pp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (NewEpochState era) (EpochState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraGov era =&gt; Lens' (EpochState era) (PParams era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">curPParamsEpochStateL</span></a></span><span>
</span><span id="line-808"></span><span>  </span><span id="local-6989586621679425829"><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621679425829"><span class="hs-identifier hs-var">utxo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (NewEpochState era) (EpochState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (EpochState era) (LedgerState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">esLStateL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (LedgerState era) (UTxOState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">lsUTxOStateL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (UTxOState era) (UTxO era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">utxosUtxoL</span></a></span><span>
</span><span id="line-809"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Coin</span></a></span><span> </span><span id="local-6989586621679425824"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679425824"><span class="hs-identifier hs-var">feeUsed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425834"><span class="hs-identifier hs-var">tx</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTxBody era =&gt; Lens' (TxBody era) Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">feeTxBodyL</span></a></span><span>
</span><span id="line-810"></span><span>      </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Coin</span></a></span><span> </span><span id="local-6989586621679425823"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679425823"><span class="hs-identifier hs-var">feeMin</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
EraUTxO era =&gt;
PParams era -&gt; Tx era -&gt; UTxO era -&gt; Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">getMinFeeTxUtxo</span></a></span><span> </span><span class="annot"><span class="annottext">PParams era
</span><a href="#local-6989586621679425833"><span class="hs-identifier hs-var">pp</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425834"><span class="hs-identifier hs-var">tx</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621679425829"><span class="hs-identifier hs-var">utxo</span></a></span><span>
</span><span id="line-811"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679425824"><span class="hs-identifier hs-var">feeUsed</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">/=</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679425823"><span class="hs-identifier hs-var">feeMin</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-812"></span><span>    </span><span class="annot"><span class="annottext">forall era. HasCallStack =&gt; String -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#logEntry"><span class="hs-identifier hs-var">logEntry</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-813"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Estimated fee &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679425824"><span class="hs-identifier hs-var">feeUsed</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; while required fee is &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679425823"><span class="hs-identifier hs-var">feeMin</span></a></span><span>
</span><span id="line-814"></span><span>
</span><span id="line-815"></span><span id="local-6989586621679428162"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#submitTx_"><span class="hs-identifier hs-type">submitTx_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428162"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428162"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428162"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-816"></span><span id="submitTx_"><span class="annot"><span class="annottext">submitTx_ :: forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#submitTx_"><span class="hs-identifier hs-var hs-var">submitTx_</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era -&gt; ImpTestM era (Tx era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#submitTx"><span class="hs-identifier hs-var">submitTx</span></a></span><span>
</span><span id="line-817"></span><span>
</span><span id="line-818"></span><span id="local-6989586621679425813"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#submitTx"><span class="hs-identifier hs-type">submitTx</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679425813"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679425813"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679425813"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679425813"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-819"></span><span id="submitTx"><span class="annot"><span class="annottext">submitTx :: forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era -&gt; ImpTestM era (Tx era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#submitTx"><span class="hs-identifier hs-var hs-var">submitTx</span></a></span></span><span> </span><span id="local-6989586621679425798"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425798"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
(ShelleyEraImp era, HasCallStack) =&gt;
Tx era
-&gt; ImpTestM
     era
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) (Tx era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#trySubmitTx"><span class="hs-identifier hs-var">trySubmitTx</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425798"><span class="hs-identifier hs-var">tx</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b (m :: * -&gt; *).
(HasCallStack, ToExpr a, NFData b, MonadIO m) =&gt;
Either a b -&gt; m b
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">expectRightDeepExpr</span></a></span><span>
</span><span id="line-820"></span><span>
</span><span id="line-821"></span><span id="local-6989586621679428158"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#trySubmitTx"><span class="hs-identifier hs-type">trySubmitTx</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-822"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428158"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-823"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428158"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-824"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428158"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679428158"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428158"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-825"></span><span id="trySubmitTx"><span class="annot"><span class="annottext">trySubmitTx :: forall era.
(ShelleyEraImp era, HasCallStack) =&gt;
Tx era
-&gt; ImpTestM
     era
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) (Tx era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#trySubmitTx"><span class="hs-identifier hs-var hs-var">trySubmitTx</span></a></span></span><span> </span><span id="local-6989586621679425713"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425713"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-826"></span><span>  </span><span id="local-6989586621679425712"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679425712"><span class="hs-identifier hs-var">doFixup</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">asks</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. ImpTestEnv era -&gt; Bool
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#iteDoTxFixup"><span class="hs-identifier hs-var">iteDoTxFixup</span></a></span><span>
</span><span id="line-827"></span><span>  </span><span id="local-6989586621679425711"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425711"><span class="hs-identifier hs-var">txFixed</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-828"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679425712"><span class="hs-identifier hs-var">doFixup</span></a></span><span>
</span><span id="line-829"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">forall era.
(ShelleyEraImp era, HasCallStack) =&gt;
Tx era -&gt; ImpTestM era (Tx era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#fixupTx"><span class="hs-identifier hs-var">fixupTx</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425713"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-830"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425713"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-831"></span><span>  </span><span class="annot"><span class="annottext">forall a era. (HasCallStack, ToExpr a) =&gt; a -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#logToExpr"><span class="hs-identifier hs-var">logToExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425711"><span class="hs-identifier hs-var">txFixed</span></a></span><span>
</span><span id="line-832"></span><span>  </span><span id="local-6989586621679425710"><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621679425710"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">gets</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. ImpTestState era -&gt; NewEpochState era
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNES"><span class="hs-identifier hs-var">impNES</span></a></span><span>
</span><span id="line-833"></span><span>  </span><span id="local-6989586621679425709"><span class="annot"><span class="annottext">LedgerEnv era
</span><a href="#local-6989586621679425709"><span class="hs-identifier hs-var">lEnv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era.
EraGov era =&gt;
NewEpochState era -&gt; ImpTestM era (LedgerEnv era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impLedgerEnv"><span class="hs-identifier hs-var">impLedgerEnv</span></a></span><span> </span><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621679425710"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-834"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679425708"><span class="annot"><span class="annottext">TxIn (EraCrypto era)
impRootTxIn :: TxIn (EraCrypto era)
impRootTxIn :: forall era. ImpTestState era -&gt; TxIn (EraCrypto era)
</span><a href="#local-6989586621679425708"><span class="hs-identifier hs-var hs-var">impRootTxIn</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *). MonadState s m =&gt; m s
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">get</span></a></span><span>
</span><span id="line-835"></span><span>  </span><span id="local-6989586621679425707"><span class="annot"><span class="annottext">Either
  (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)))
  (LedgerState era)
</span><a href="#local-6989586621679425707"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (rule :: Symbol) era.
(STS (EraRule rule era), BaseM (EraRule rule era) ~ ShelleyBase) =&gt;
Environment (EraRule rule era)
-&gt; State (EraRule rule era)
-&gt; Signal (EraRule rule era)
-&gt; ImpTestM
     era
     (Either
        (NonEmpty (PredicateFailure (EraRule rule era)))
        (State (EraRule rule era)))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#tryRunImpRule"><span class="hs-identifier hs-var">tryRunImpRule</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><span class="annottext">LedgerEnv era
</span><a href="#local-6989586621679425709"><span class="hs-identifier hs-var">lEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621679425710"><span class="hs-identifier hs-var">st</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (NewEpochState era) (EpochState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (EpochState era) (LedgerState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">esLStateL</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425711"><span class="hs-identifier hs-var">txFixed</span></a></span><span>
</span><span id="line-836"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679425706"><span class="annot"><span class="annottext">txId :: TxId (EraCrypto era)
</span><a href="#local-6989586621679425706"><span class="hs-identifier hs-var hs-var">txId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall c. SafeHash c EraIndependentTxBody -&gt; TxId c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">TxId</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall x index c.
(HashAnnotated x index c, HashAlgorithm (HASH c)) =&gt;
x -&gt; SafeHash c index
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">hashAnnotated</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425711"><span class="hs-identifier hs-var">txFixed</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span>
</span><span id="line-837"></span><span>      </span><span id="local-6989586621679425705"><span class="annot"><span class="annottext">outsSize :: Int
</span><a href="#local-6989586621679425705"><span class="hs-identifier hs-var hs-var">outsSize</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. StrictSeq a -&gt; Int
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-strict-containers-0.1.3.0-c8c434ba474a408c40a155b68fe1059a1c9196931f80e9c4ade09421da2372fd/share/doc/html/src"><span class="hs-identifier hs-var">SSeq.length</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425711"><span class="hs-identifier hs-var">txFixed</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxOut era))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">outputsTxBodyL</span></a></span><span>
</span><span id="line-838"></span><span>      </span><span id="local-6989586621679425703"><span class="annot"><span class="annottext">rootIndex :: Int
</span><a href="#local-6989586621679425703"><span class="hs-identifier hs-var hs-var">rootIndex</span></a></span></span><span>
</span><span id="line-839"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679425705"><span class="hs-identifier hs-var">outsSize</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679425705"><span class="hs-identifier hs-var">outsSize</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-840"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Expected at least 1 output after submitting tx: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">TxId (EraCrypto era)
</span><a href="#local-6989586621679425706"><span class="hs-identifier hs-var">txId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-841"></span><span>  </span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">forM</span></a></span><span> </span><span class="annot"><span class="annottext">Either
  (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era)))
  (LedgerState era)
</span><a href="#local-6989586621679425707"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679425701"><span class="annot"><span class="annottext">LedgerState era
</span><a href="#local-6989586621679425701"><span class="hs-identifier hs-var">st'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-842"></span><span>    </span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">modify</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (ImpTestState era) (NewEpochState era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNESL"><span class="hs-identifier hs-var">impNESL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (NewEpochState era) (EpochState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (EpochState era) (LedgerState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">esLStateL</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">LedgerState era
</span><a href="#local-6989586621679425701"><span class="hs-identifier hs-var">st'</span></a></span><span>
</span><span id="line-843"></span><span>    </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">UTxO</span></a></span><span> </span><span id="local-6989586621679425699"><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOut era)
</span><a href="#local-6989586621679425699"><span class="hs-identifier hs-var">utxo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era. ImpTestM era (UTxO era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getUTxO"><span class="hs-identifier hs-var">getUTxO</span></a></span><span>
</span><span id="line-844"></span><span>    </span><span class="hs-comment">-- This TxIn is in the utxo, and thus can be the new root, only if the transaction was phase2-valid.</span><span>
</span><span id="line-845"></span><span>    </span><span class="hs-comment">-- Otherwise, no utxo with this id would have been created, and so we need to set the new root</span><span>
</span><span id="line-846"></span><span>    </span><span class="hs-comment">-- to what it was before the submission.</span><span>
</span><span id="line-847"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679425698"><span class="annot"><span class="annottext">assumedNewRoot :: TxIn (EraCrypto era)
</span><a href="#local-6989586621679425698"><span class="hs-identifier hs-var hs-var">assumedNewRoot</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall c. TxId c -&gt; TxIx -&gt; TxIn c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">TxIn</span></a></span><span> </span><span class="annot"><span class="annottext">TxId (EraCrypto era)
</span><a href="#local-6989586621679425706"><span class="hs-identifier hs-var">txId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasCallStack =&gt; Integer -&gt; TxIx
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">mkTxIxPartial</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fromIntegral</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679425703"><span class="hs-identifier hs-var">rootIndex</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-848"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679425696"><span class="annot"><span class="annottext">newRoot :: TxIn (EraCrypto era)
</span><a href="#local-6989586621679425696"><span class="hs-identifier hs-var hs-var">newRoot</span></a></span></span><span>
</span><span id="line-849"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.member</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn (EraCrypto era)
</span><a href="#local-6989586621679425698"><span class="hs-identifier hs-var">assumedNewRoot</span></a></span><span> </span><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOut era)
</span><a href="#local-6989586621679425699"><span class="hs-identifier hs-var">utxo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxIn (EraCrypto era)
</span><a href="#local-6989586621679425698"><span class="hs-identifier hs-var">assumedNewRoot</span></a></span><span>
</span><span id="line-850"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.member</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn (EraCrypto era)
</span><a href="#local-6989586621679425708"><span class="hs-identifier hs-var">impRootTxIn</span></a></span><span> </span><span class="annot"><span class="annottext">Map (TxIn (EraCrypto era)) (TxOut era)
</span><a href="#local-6989586621679425699"><span class="hs-identifier hs-var">utxo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxIn (EraCrypto era)
</span><a href="#local-6989586621679425708"><span class="hs-identifier hs-var">impRootTxIn</span></a></span><span>
</span><span id="line-851"></span><span>          </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">otherwise</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Root not found in UTxO&quot;</span></span><span>
</span><span id="line-852"></span><span>    </span><span class="annot"><span class="annottext">forall era. Lens' (ImpTestState era) (TxIn (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impRootTxInL"><span class="hs-identifier hs-var">impRootTxInL</span></a></span><span> </span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *) a b.
MonadState s m =&gt;
ASetter s s a b -&gt; b -&gt; m ()
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-mtl-0.2.0.3-30febb7a254c037eae9a749580d8462f4e1181aa6379e82c103234a8f48251c9/share/doc/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn (EraCrypto era)
</span><a href="#local-6989586621679425696"><span class="hs-identifier hs-var">newRoot</span></a></span><span>
</span><span id="line-853"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425711"><span class="hs-identifier hs-var">txFixed</span></a></span><span>
</span><span id="line-854"></span><span>
</span><span id="line-855"></span><span class="hs-comment">-- | Submit a transaction that is expected to be rejected. The inputs and</span><span>
</span><span id="line-856"></span><span class="hs-comment">-- outputs are automatically balanced.</span><span>
</span><span id="line-857"></span><span id="local-6989586621679428134"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#submitFailingTx"><span class="hs-identifier hs-type">submitFailingTx</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-858"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span>
</span><span id="line-859"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428134"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-860"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-861"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428134"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-862"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;LEDGER&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679428134"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-863"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428134"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-864"></span><span id="submitFailingTx"><span class="annot"><span class="annottext">submitFailingTx :: forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
Tx era
-&gt; NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
-&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#submitFailingTx"><span class="hs-identifier hs-var hs-var">submitFailingTx</span></a></span></span><span> </span><span id="local-6989586621679425676"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425676"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span id="local-6989586621679425675"><span class="annot"><span class="annottext">NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
</span><a href="#local-6989586621679425675"><span class="hs-identifier hs-var">expectedFailure</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
(ShelleyEraImp era, HasCallStack) =&gt;
Tx era
-&gt; ImpTestM
     era
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) (Tx era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#trySubmitTx"><span class="hs-identifier hs-var">trySubmitTx</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425676"><span class="hs-identifier hs-var">tx</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a b (m :: * -&gt; *).
(HasCallStack, ToExpr a, ToExpr b, Eq a, MonadIO m) =&gt;
Either a b -&gt; a -&gt; m ()
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-operator hs-var">`shouldBeLeftExpr`</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))
</span><a href="#local-6989586621679425675"><span class="hs-identifier hs-var">expectedFailure</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-865"></span><span>
</span><span id="line-866"></span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#tryRunImpRule"><span class="hs-identifier hs-type">tryRunImpRule</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-867"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679428146"><span class="annot"><a href="#local-6989586621679428146"><span class="hs-identifier hs-type">rule</span></a></span></span><span> </span><span id="local-6989586621679428145"><span class="annot"><a href="#local-6989586621679428145"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-868"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428146"><span class="hs-identifier hs-type">rule</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428145"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">BaseM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428146"><span class="hs-identifier hs-type">rule</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428145"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">ShelleyBase</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-869"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">Environment</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428146"><span class="hs-identifier hs-type">rule</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428145"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-870"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428146"><span class="hs-identifier hs-type">rule</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428145"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-871"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">Signal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428146"><span class="hs-identifier hs-type">rule</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428145"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-872"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428145"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">NonEmpty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">PredicateFailure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428146"><span class="hs-identifier hs-type">rule</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428145"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428146"><span class="hs-identifier hs-type">rule</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428145"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-873"></span><span id="tryRunImpRule"><span class="annot"><span class="annottext">tryRunImpRule :: forall (rule :: Symbol) era.
(STS (EraRule rule era), BaseM (EraRule rule era) ~ ShelleyBase) =&gt;
Environment (EraRule rule era)
-&gt; State (EraRule rule era)
-&gt; Signal (EraRule rule era)
-&gt; ImpTestM
     era
     (Either
        (NonEmpty (PredicateFailure (EraRule rule era)))
        (State (EraRule rule era)))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#tryRunImpRule"><span class="hs-identifier hs-var hs-var">tryRunImpRule</span></a></span></span><span> </span><span id="local-6989586621679425662"><span class="annot"><span class="annottext">Environment (EraRule rule era)
</span><a href="#local-6989586621679425662"><span class="hs-identifier hs-var">stsEnv</span></a></span></span><span> </span><span id="local-6989586621679425661"><span class="annot"><span class="annottext">State (EraRule rule era)
</span><a href="#local-6989586621679425661"><span class="hs-identifier hs-var">stsState</span></a></span></span><span> </span><span id="local-6989586621679425660"><span class="annot"><span class="annottext">Signal (EraRule rule era)
</span><a href="#local-6989586621679425660"><span class="hs-identifier hs-var">stsSignal</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-874"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679425659"><span class="annot"><span class="annottext">trc :: TRC (EraRule rule era)
</span><a href="#local-6989586621679425659"><span class="hs-identifier hs-var hs-var">trc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall sts. (Environment sts, State sts, Signal sts) -&gt; TRC sts
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-var">TRC</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment (EraRule rule era)
</span><a href="#local-6989586621679425662"><span class="hs-identifier hs-var">stsEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">State (EraRule rule era)
</span><a href="#local-6989586621679425661"><span class="hs-identifier hs-var">stsState</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Signal (EraRule rule era)
</span><a href="#local-6989586621679425660"><span class="hs-identifier hs-var">stsSignal</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-875"></span><span>  </span><span id="local-6989586621679425657"><span class="annot"><span class="annottext">Globals
</span><a href="#local-6989586621679425657"><span class="hs-identifier hs-var">globals</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *) a. MonadState s m =&gt; Getting a s a -&gt; m a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-mtl-0.2.0.3-30febb7a254c037eae9a749580d8462f4e1181aa6379e82c103234a8f48251c9/share/doc/html/src"><span class="hs-identifier hs-var">use</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. ImpTestState era -&gt; Globals
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impGlobals"><span class="hs-identifier hs-var">impGlobals</span></a></span><span>
</span><span id="line-876"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Globals -&gt; ShelleyBase a -&gt; a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#runShelleyBase"><span class="hs-identifier hs-var">runShelleyBase</span></a></span><span> </span><span class="annot"><span class="annottext">Globals
</span><a href="#local-6989586621679425657"><span class="hs-identifier hs-var">globals</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *) (rtype :: RuleType).
(STS s, RuleTypeRep rtype, m ~ BaseM s) =&gt;
RuleContext rtype s
-&gt; m (Either (NonEmpty (PredicateFailure s)) (State s))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-test-1.1.0.0/doc/html/small-steps-test/src"><span class="hs-identifier hs-var">applySTSTest</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428146"><span class="hs-identifier hs-type">rule</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428145"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TRC (EraRule rule era)
</span><a href="#local-6989586621679425659"><span class="hs-identifier hs-var">trc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-877"></span><span>
</span><span id="line-878"></span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#runImpRule"><span class="hs-identifier hs-type">runImpRule</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-879"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679428113"><span class="annot"><a href="#local-6989586621679428113"><span class="hs-identifier hs-type">rule</span></a></span></span><span> </span><span id="local-6989586621679428112"><span class="annot"><a href="#local-6989586621679428112"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-880"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span>
</span><span id="line-881"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">KnownSymbol</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428113"><span class="hs-identifier hs-type">rule</span></a></span><span>
</span><span id="line-882"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">STS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428113"><span class="hs-identifier hs-type">rule</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428112"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-883"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">BaseM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428113"><span class="hs-identifier hs-type">rule</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428112"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-type">~</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">ShelleyBase</span></a></span><span>
</span><span id="line-884"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428113"><span class="hs-identifier hs-type">rule</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428112"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-885"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-886"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">Environment</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428113"><span class="hs-identifier hs-type">rule</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428112"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-887"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428113"><span class="hs-identifier hs-type">rule</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428112"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-888"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">Signal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428113"><span class="hs-identifier hs-type">rule</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428112"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-889"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428112"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428113"><span class="hs-identifier hs-type">rule</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428112"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-890"></span><span id="runImpRule"><span class="annot"><span class="annottext">runImpRule :: forall (rule :: Symbol) era.
(HasCallStack, KnownSymbol rule, STS (EraRule rule era),
 BaseM (EraRule rule era) ~ ShelleyBase,
 NFData (State (EraRule rule era))) =&gt;
Environment (EraRule rule era)
-&gt; State (EraRule rule era)
-&gt; Signal (EraRule rule era)
-&gt; ImpTestM era (State (EraRule rule era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#runImpRule"><span class="hs-identifier hs-var hs-var">runImpRule</span></a></span></span><span> </span><span id="local-6989586621679425630"><span class="annot"><span class="annottext">Environment (EraRule rule era)
</span><a href="#local-6989586621679425630"><span class="hs-identifier hs-var">stsEnv</span></a></span></span><span> </span><span id="local-6989586621679425629"><span class="annot"><span class="annottext">State (EraRule rule era)
</span><a href="#local-6989586621679425629"><span class="hs-identifier hs-var">stsState</span></a></span></span><span> </span><span id="local-6989586621679425628"><span class="annot"><span class="annottext">Signal (EraRule rule era)
</span><a href="#local-6989586621679425628"><span class="hs-identifier hs-var">stsSignal</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-891"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679425627"><span class="annot"><span class="annottext">ruleName :: String
</span><a href="#local-6989586621679425627"><span class="hs-identifier hs-var hs-var">ruleName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (n :: Symbol) (proxy :: Symbol -&gt; *).
KnownSymbol n =&gt;
proxy n -&gt; String
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">symbolVal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall {k} (t :: k). Proxy t
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Proxy</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679428113"><span class="hs-identifier hs-type">rule</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-892"></span><span>  </span><span class="annot"><span class="annottext">forall (rule :: Symbol) era.
(STS (EraRule rule era), BaseM (EraRule rule era) ~ ShelleyBase) =&gt;
Environment (EraRule rule era)
-&gt; State (EraRule rule era)
-&gt; Signal (EraRule rule era)
-&gt; ImpTestM
     era
     (Either
        (NonEmpty (PredicateFailure (EraRule rule era)))
        (State (EraRule rule era)))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#tryRunImpRule"><span class="hs-identifier hs-var">tryRunImpRule</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679428113"><span class="hs-identifier hs-type">rule</span></a></span><span> </span><span class="annot"><span class="annottext">Environment (EraRule rule era)
</span><a href="#local-6989586621679425630"><span class="hs-identifier hs-var">stsEnv</span></a></span><span> </span><span class="annot"><span class="annottext">State (EraRule rule era)
</span><a href="#local-6989586621679425629"><span class="hs-identifier hs-var">stsState</span></a></span><span> </span><span class="annot"><span class="annottext">Signal (EraRule rule era)
</span><a href="#local-6989586621679425628"><span class="hs-identifier hs-var">stsSignal</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-893"></span><span>    </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Left</span></a></span><span> </span><span id="local-6989586621679425626"><span class="annot"><span class="annottext">NonEmpty (PredicateFailure (EraRule rule era))
</span><a href="#local-6989586621679425626"><span class="hs-identifier hs-var">fs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-894"></span><span>      </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. (HasCallStack, MonadIO m) =&gt; String -&gt; m a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">assertFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-895"></span><span>        </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">unlines</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-896"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Failed to run &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679425627"><span class="hs-identifier hs-var">ruleName</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;:&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">map</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">toList</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty (PredicateFailure (EraRule rule era))
</span><a href="#local-6989586621679425626"><span class="hs-identifier hs-var">fs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-897"></span><span>    </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Right</span></a></span><span> </span><span id="local-6989586621679425625"><span class="annot"><span class="annottext">State (EraRule rule era)
</span><a href="#local-6989586621679425625"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. (MonadIO m, NFData a) =&gt; a -&gt; m a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/unliftio-0.2.25.0-8f9832938fccae827eac9a277285942342049f20136025c9a200d96eb4f776f9/share/doc/html/src"><span class="hs-identifier hs-var">evaluateDeep</span></a></span><span> </span><span class="annot"><span class="annottext">State (EraRule rule era)
</span><a href="#local-6989586621679425625"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-898"></span><span>
</span><span id="line-899"></span><span class="hs-comment">-- | Runs the TICK rule once</span><span>
</span><span id="line-900"></span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#passTick"><span class="hs-identifier hs-type">passTick</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-901"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679428102"><span class="annot"><a href="#local-6989586621679428102"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-902"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span>
</span><span id="line-903"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/small-steps-1.1.0.0/doc/html/small-steps/src"><span class="hs-identifier hs-type">State</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraRule</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;TICK&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679428102"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-904"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428102"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-905"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-906"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428102"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-907"></span><span id="passTick"><span class="annot"><span class="annottext">passTick :: forall era.
(HasCallStack, NFData (State (EraRule &quot;TICK&quot; era)),
 ShelleyEraImp era) =&gt;
ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#passTick"><span class="hs-identifier hs-var hs-var">passTick</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-908"></span><span>  </span><span id="local-6989586621679425590"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679425590"><span class="hs-identifier hs-var">impLastTick</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">gets</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. ImpTestState era -&gt; SlotNo
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impLastTick"><span class="hs-identifier hs-var">impLastTick</span></a></span><span>
</span><span id="line-909"></span><span>  </span><span id="local-6989586621679425589"><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621679425589"><span class="hs-identifier hs-var">curNES</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-910"></span><span>  </span><span id="local-6989586621679425587"><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621679425587"><span class="hs-identifier hs-var">nes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (rule :: Symbol) era.
(HasCallStack, KnownSymbol rule, STS (EraRule rule era),
 BaseM (EraRule rule era) ~ ShelleyBase,
 NFData (State (EraRule rule era))) =&gt;
Environment (EraRule rule era)
-&gt; State (EraRule rule era)
-&gt; Signal (EraRule rule era)
-&gt; ImpTestM era (State (EraRule rule era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#runImpRule"><span class="hs-identifier hs-var">runImpRule</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-string">&quot;TICK&quot;</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621679425589"><span class="hs-identifier hs-var">curNES</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679425590"><span class="hs-identifier hs-var">impLastTick</span></a></span><span>
</span><span id="line-911"></span><span>  </span><span class="annot"><span class="annottext">forall era. Lens' (ImpTestState era) SlotNo
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impLastTickL"><span class="hs-identifier hs-var">impLastTickL</span></a></span><span> </span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *) a.
(MonadState s m, Num a) =&gt;
ASetter s s a a -&gt; a -&gt; m ()
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-mtl-0.2.0.3-30febb7a254c037eae9a749580d8462f4e1181aa6379e82c103234a8f48251c9/share/doc/html/src"><span class="hs-operator hs-var">+=</span></a></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><span class="hs-number">1</span></span><span>
</span><span id="line-912"></span><span>  </span><span class="annot"><span class="annottext">forall era. Lens' (ImpTestState era) (NewEpochState era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNESL"><span class="hs-identifier hs-var">impNESL</span></a></span><span> </span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *) a b.
MonadState s m =&gt;
ASetter s s a b -&gt; b -&gt; m ()
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-mtl-0.2.0.3-30febb7a254c037eae9a749580d8462f4e1181aa6379e82c103234a8f48251c9/share/doc/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">NewEpochState era
</span><a href="#local-6989586621679425587"><span class="hs-identifier hs-var">nes</span></a></span><span>
</span><span id="line-913"></span><span>
</span><span id="line-914"></span><span class="hs-comment">-- | Runs the TICK rule until the next epoch is reached</span><span>
</span><span id="line-915"></span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#passEpoch"><span class="hs-identifier hs-type">passEpoch</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-916"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679428096"><span class="annot"><a href="#local-6989586621679428096"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-917"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428096"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-918"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428096"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-919"></span><span id="passEpoch"><span class="annot"><span class="annottext">passEpoch :: forall era. ShelleyEraImp era =&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#passEpoch"><span class="hs-identifier hs-var hs-var">passEpoch</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-920"></span><span>  </span><span id="local-6989586621679425528"><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621679425528"><span class="hs-identifier hs-var">startEpoch</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (NewEpochState era) EpochNo
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">nesELL</span></a></span><span>
</span><span id="line-921"></span><span>  </span><span class="annot"><span class="annottext">forall era. HasCallStack =&gt; String -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#logEntry"><span class="hs-identifier hs-var">logEntry</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Entering &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Enum a =&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">succ</span></a></span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621679425528"><span class="hs-identifier hs-var">startEpoch</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-922"></span><span>  </span><span class="hs-keyword">let</span><span>
</span><span id="line-923"></span><span>    </span><span id="local-6989586621679425525"><span class="annot"><span class="annottext">tickUntilNewEpoch :: EpochNo -&gt; ImpTestM era ()
</span><a href="#local-6989586621679425525"><span class="hs-identifier hs-var hs-var">tickUntilNewEpoch</span></a></span></span><span> </span><span id="local-6989586621679425524"><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621679425524"><span class="hs-identifier hs-var">curEpoch</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-924"></span><span>      </span><span class="annot"><span class="annottext">forall era.
(HasCallStack, NFData (State (EraRule &quot;TICK&quot; era)),
 ShelleyEraImp era) =&gt;
ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#passTick"><span class="hs-identifier hs-var">passTick</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679428096"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-925"></span><span>      </span><span id="local-6989586621679425523"><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621679425523"><span class="hs-identifier hs-var">newEpoch</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (NewEpochState era) EpochNo
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">nesELL</span></a></span><span>
</span><span id="line-926"></span><span>      </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621679425523"><span class="hs-identifier hs-var">newEpoch</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621679425524"><span class="hs-identifier hs-var">curEpoch</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">EpochNo -&gt; ImpTestM era ()
</span><a href="#local-6989586621679425525"><span class="hs-identifier hs-var">tickUntilNewEpoch</span></a></span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621679425523"><span class="hs-identifier hs-var">newEpoch</span></a></span><span>
</span><span id="line-927"></span><span>  </span><span id="local-6989586621679425520"><span class="annot"><span class="annottext">AdaPots
</span><a href="#local-6989586621679425520"><span class="hs-identifier hs-var">preAdaPots</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era. (EraGov era, EraTxOut era) =&gt; ImpTestM era AdaPots
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getAdaPots"><span class="hs-identifier hs-var">getAdaPots</span></a></span><span>
</span><span id="line-928"></span><span>  </span><span class="annot"><span class="annottext">EpochNo -&gt; ImpTestM era ()
</span><a href="#local-6989586621679425525"><span class="hs-identifier hs-var">tickUntilNewEpoch</span></a></span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621679425528"><span class="hs-identifier hs-var">startEpoch</span></a></span><span>
</span><span id="line-929"></span><span>  </span><span class="annot"><span class="annottext">forall a era.
NFData a =&gt;
String -&gt; ImpTestM era a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impAnn"><span class="hs-identifier hs-var">impAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Checking ADA preservation at the epoch boundary&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-930"></span><span>    </span><span id="local-6989586621679425519"><span class="annot"><span class="annottext">AdaPots
</span><a href="#local-6989586621679425519"><span class="hs-identifier hs-var">postAdaPots</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era. (EraGov era, EraTxOut era) =&gt; ImpTestM era AdaPots
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getAdaPots"><span class="hs-identifier hs-var">getAdaPots</span></a></span><span>
</span><span id="line-931"></span><span>    </span><span class="annot"><span class="annottext">forall era. HasCallStack =&gt; String -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#logEntry"><span class="hs-identifier hs-var">logEntry</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. ToExpr a =&gt; a -&gt; a -&gt; String
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/l/testlib/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">diffExpr</span></a></span><span> </span><span class="annot"><span class="annottext">AdaPots
</span><a href="#local-6989586621679425520"><span class="hs-identifier hs-var">preAdaPots</span></a></span><span> </span><span class="annot"><span class="annottext">AdaPots
</span><a href="#local-6989586621679425519"><span class="hs-identifier hs-var">postAdaPots</span></a></span><span>
</span><span id="line-932"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-933"></span><span>      </span><span id="local-6989586621679425517"><span class="annot"><span class="annottext">preSum :: Coin
</span><a href="#local-6989586621679425517"><span class="hs-identifier hs-var hs-var">preSum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AdaPots -&gt; Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">sumAdaPots</span></a></span><span> </span><span class="annot"><span class="annottext">AdaPots
</span><a href="#local-6989586621679425520"><span class="hs-identifier hs-var">preAdaPots</span></a></span><span>
</span><span id="line-934"></span><span>      </span><span id="local-6989586621679425516"><span class="annot"><span class="annottext">postSum :: Coin
</span><a href="#local-6989586621679425516"><span class="hs-identifier hs-var hs-var">postSum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AdaPots -&gt; Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">sumAdaPots</span></a></span><span> </span><span class="annot"><span class="annottext">AdaPots
</span><a href="#local-6989586621679425519"><span class="hs-identifier hs-var">postAdaPots</span></a></span><span>
</span><span id="line-935"></span><span>    </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">unless</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679425517"><span class="hs-identifier hs-var">preSum</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679425516"><span class="hs-identifier hs-var">postSum</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). (HasCallStack, MonadIO m) =&gt; String -&gt; m ()
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">expectationFailure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-936"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Total ADA in the epoch state is not preserved\n\tpost - pre = &quot;</span></span><span>
</span><span id="line-937"></span><span>        </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679425516"><span class="hs-identifier hs-var">postSum</span></a></span><span> </span><span class="annot"><span class="annottext">forall t. Val t =&gt; t -&gt; t -&gt; t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-operator hs-var">&lt;-&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679425517"><span class="hs-identifier hs-var">preSum</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-938"></span><span>
</span><span id="line-939"></span><span class="hs-comment">-- | Runs the TICK rule until the `n` epochs are passed</span><span>
</span><span id="line-940"></span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#passNEpochs"><span class="hs-identifier hs-type">passNEpochs</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-941"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679428085"><span class="annot"><a href="#local-6989586621679428085"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-942"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428085"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-943"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-bignum-1.2/src"><span class="hs-identifier hs-type">Natural</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-944"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428085"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-945"></span><span id="passNEpochs"><span class="annot"><span class="annottext">passNEpochs :: forall era. ShelleyEraImp era =&gt; Natural -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#passNEpochs"><span class="hs-identifier hs-var hs-var">passNEpochs</span></a></span></span><span> </span><span id="local-6989586621679425504"><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679425504"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679425504"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-operator hs-var">&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. ShelleyEraImp era =&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#passEpoch"><span class="hs-identifier hs-var">passEpoch</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. ShelleyEraImp era =&gt; Natural -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#passNEpochs"><span class="hs-identifier hs-var">passNEpochs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Natural
</span><a href="#local-6989586621679425504"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Num a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-glyph hs-var">-</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-946"></span><span>
</span><span id="line-947"></span><span class="hs-comment">-- | Stores extra information about the failure of the unit test</span><span>
</span><span id="line-948"></span><span class="hs-keyword">data</span><span> </span><span id="ImpException"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpException"><span class="hs-identifier hs-var">ImpException</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ImpException"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpException"><span class="hs-identifier hs-var">ImpException</span></a></span></span><span>
</span><span id="line-949"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="ieAnnotation"><span class="annot"><span class="annottext">ImpException -&gt; [String]
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ieAnnotation"><span class="hs-identifier hs-var hs-var">ieAnnotation</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">String</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-950"></span><span>  </span><span class="hs-comment">-- ^ Description of the IO action that caused the failure</span><span>
</span><span id="line-951"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ieThrownException"><span class="annot"><span class="annottext">ImpException -&gt; SomeException
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ieThrownException"><span class="hs-identifier hs-var hs-var">ieThrownException</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">SomeException</span></a></span><span>
</span><span id="line-952"></span><span>  </span><span class="hs-comment">-- ^ Exception that caused the test to fail</span><span>
</span><span id="line-953"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-954"></span><span>
</span><span id="line-955"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679425497"><span id="local-6989586621679425500"><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Show</span></a></span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpException"><span class="hs-identifier hs-type">ImpException</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-956"></span><span>  </span><span id="local-6989586621679425488"><span class="annot"><span class="annottext">show :: ImpException -&gt; String
</span><a href="#local-6989586621679425488"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpException"><span class="hs-identifier hs-type">ImpException</span></a></span><span> </span><span id="local-6989586621679425487"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679425487"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621679425486"><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679425486"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-957"></span><span>    </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Log:\n&quot;</span></span><span>
</span><span id="line-958"></span><span>      </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">unlines</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679425487"><span class="hs-identifier hs-var">ann</span></a></span><span>
</span><span id="line-959"></span><span>      </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\nFailed with Exception:\n\t&quot;</span></span><span>
</span><span id="line-960"></span><span>      </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall e. Exception e =&gt; e -&gt; String
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">displayException</span></a></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679425486"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-961"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679425475"><span id="local-6989586621679425477"><span id="local-6989586621679425479"><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Exception</span></a></span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpException"><span class="hs-identifier hs-type">ImpException</span></a></span></span></span></span><span>
</span><span id="line-962"></span><span>
</span><span id="line-963"></span><span class="hs-comment">-- | Annotation for when failure happens. All the logging done within annotation will be</span><span>
</span><span id="line-964"></span><span class="hs-comment">-- discarded if there no failures within the annotation.</span><span>
</span><span id="line-965"></span><span id="local-6989586621679428088"><span id="local-6989586621679428089"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impAnn"><span class="hs-identifier hs-type">impAnn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/deepseq-1.4.6.1/src"><span class="hs-identifier hs-type">NFData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428089"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428088"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428089"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428088"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428089"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-966"></span><span id="impAnn"><span class="annot"><span class="annottext">impAnn :: forall a era.
NFData a =&gt;
String -&gt; ImpTestM era a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impAnn"><span class="hs-identifier hs-var hs-var">impAnn</span></a></span></span><span> </span><span id="local-6989586621679425458"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679425458"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span id="local-6989586621679425457"><span class="annot"><span class="annottext">ImpTestM era a
</span><a href="#local-6989586621679425457"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-967"></span><span>  </span><span id="local-6989586621679425456"><span class="annot"><span class="annottext">Doc ()
</span><a href="#local-6989586621679425456"><span class="hs-identifier hs-var">logs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *) a. MonadState s m =&gt; Getting a s a -&gt; m a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-mtl-0.2.0.3-30febb7a254c037eae9a749580d8462f4e1181aa6379e82c103234a8f48251c9/share/doc/html/src"><span class="hs-identifier hs-var">use</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (ImpTestState era) (Doc ())
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impLogL"><span class="hs-identifier hs-var">impLogL</span></a></span><span>
</span><span id="line-968"></span><span>  </span><span id="local-6989586621679425455"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679425455"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a (m :: * -&gt; *).
(NFData a, MonadUnliftIO m) =&gt;
m a -&gt; (SomeException -&gt; m a) -&gt; m a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/unliftio-0.2.25.0-8f9832938fccae827eac9a277285942342049f20136025c9a200d96eb4f776f9/share/doc/html/src"><span class="hs-identifier hs-var">catchAnyDeep</span></a></span><span> </span><span class="annot"><span class="annottext">ImpTestM era a
</span><a href="#local-6989586621679425457"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679425454"><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679425454"><span class="hs-identifier hs-var">exc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-969"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) e a. (MonadIO m, Exception e) =&gt; e -&gt; m a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/unliftio-0.2.25.0-8f9832938fccae827eac9a277285942342049f20136025c9a200d96eb4f776f9/share/doc/html/src"><span class="hs-identifier hs-var">throwIO</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-970"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall e. Exception e =&gt; SomeException -&gt; Maybe e
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fromException</span></a></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679425454"><span class="hs-identifier hs-var">exc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-971"></span><span>        </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpException"><span class="hs-identifier hs-type">ImpException</span></a></span><span> </span><span id="local-6989586621679425453"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679425453"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span id="local-6989586621679425452"><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679425452"><span class="hs-identifier hs-var">origExc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; SomeException -&gt; ImpException
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpException"><span class="hs-identifier hs-var">ImpException</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679425458"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-glyph hs-var">:</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679425453"><span class="hs-identifier hs-var">ann</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679425452"><span class="hs-identifier hs-var">origExc</span></a></span><span>
</span><span id="line-972"></span><span>        </span><span class="annot"><span class="annottext">Maybe ImpException
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; SomeException -&gt; ImpException
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpException"><span class="hs-identifier hs-var">ImpException</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679425458"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679425454"><span class="hs-identifier hs-var">exc</span></a></span><span>
</span><span id="line-973"></span><span>  </span><span class="annot"><span class="annottext">forall era. Lens' (ImpTestState era) (Doc ())
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impLogL"><span class="hs-identifier hs-var">impLogL</span></a></span><span> </span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *) a b.
MonadState s m =&gt;
ASetter s s a b -&gt; b -&gt; m ()
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-mtl-0.2.0.3-30febb7a254c037eae9a749580d8462f4e1181aa6379e82c103234a8f48251c9/share/doc/html/src"><span class="hs-operator hs-var">.=</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ()
</span><a href="#local-6989586621679425456"><span class="hs-identifier hs-var">logs</span></a></span><span>
</span><span id="line-974"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679425455"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-975"></span><span>
</span><span id="line-976"></span><span class="hs-comment">-- | Adds a string to the log, which is only shown if the test fails</span><span>
</span><span id="line-977"></span><span id="local-6989586621679428880"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#logEntry"><span class="hs-identifier hs-type">logEntry</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428880"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-978"></span><span id="logEntry"><span class="annot"><span class="annottext">logEntry :: forall era. HasCallStack =&gt; String -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#logEntry"><span class="hs-identifier hs-var hs-var">logEntry</span></a></span></span><span> </span><span id="local-6989586621679425436"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679425436"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (ImpTestState era) (Doc ())
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impLogL"><span class="hs-identifier hs-var">impLogL</span></a></span><span> </span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *) a b.
MonadState s m =&gt;
ASetter s s a b -&gt; (a -&gt; b) -&gt; m ()
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-mtl-0.2.0.3-30febb7a254c037eae9a749580d8462f4e1181aa6379e82c103234a8f48251c9/share/doc/html/src"><span class="hs-operator hs-var">%=</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/prettyprinter-1.7.1-546164a61e33fff52b43324c1636e343b3360b907f873b5adf59f460acb23f60/share/doc/html/src"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679425434"><span class="hs-identifier hs-var">loc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Doc ()
</span><span class="hs-string">&quot;\t&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a ann. Pretty a =&gt; a -&gt; Doc ann
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/prettyprinter-1.7.1-546164a61e33fff52b43324c1636e343b3360b907f873b5adf59f460acb23f60/share/doc/html/src"><span class="hs-identifier hs-var">pretty</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679425436"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall ann. Doc ann
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/prettyprinter-1.7.1-546164a61e33fff52b43324c1636e343b3360b907f873b5adf59f460acb23f60/share/doc/html/src"><span class="hs-identifier hs-var">line</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-979"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-980"></span><span>    </span><span id="local-6989586621679425423"><span class="annot"><span class="annottext">formatSrcLoc :: SrcLoc -&gt; String
</span><a href="#local-6989586621679425423"><span class="hs-identifier hs-var hs-var">formatSrcLoc</span></a></span></span><span> </span><span id="local-6989586621679425422"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621679425422"><span class="hs-identifier hs-var">srcLoc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-981"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;[&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; String
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">srcLocModule</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621679425422"><span class="hs-identifier hs-var">srcLoc</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;:&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SrcLoc -&gt; Int
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">srcLocStartLine</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621679425422"><span class="hs-identifier hs-var">srcLoc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;]\n&quot;</span></span><span>
</span><span id="line-982"></span><span>    </span><span id="local-6989586621679425434"><span class="annot"><span class="annottext">loc :: String
</span><a href="#local-6989586621679425434"><span class="hs-identifier hs-var hs-var">loc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-983"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CallStack -&gt; [(String, SrcLoc)]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">getCallStack</span></a></span><span> </span><span class="annot"><span class="annottext">HasCallStack
</span><a href="#local-6989586621679425419"><span class="hs-var">?callStack</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-984"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679425416"><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621679425416"><span class="hs-identifier hs-var">srcLoc</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-glyph hs-type">:</span></a></span><span> </span><span class="annot"><span class="annottext">[(String, SrcLoc)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SrcLoc -&gt; String
</span><a href="#local-6989586621679425423"><span class="hs-identifier hs-var">formatSrcLoc</span></a></span><span> </span><span class="annot"><span class="annottext">SrcLoc
</span><a href="#local-6989586621679425416"><span class="hs-identifier hs-var">srcLoc</span></a></span><span>
</span><span id="line-985"></span><span>        </span><span class="annot"><span class="annottext">[(String, SrcLoc)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-986"></span><span>
</span><span id="line-987"></span><span id="local-6989586621679428147"><span id="local-6989586621679428148"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#logToExpr"><span class="hs-identifier hs-type">logToExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/tree-diff-0.3.0.1-cc369363586a073c43a96e3fe90be75e8458452f619676a40f10888621bb4dcc/share/doc/html/src"><span class="hs-identifier hs-type">ToExpr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428148"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679428148"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428147"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-988"></span><span id="logToExpr"><span class="annot"><span class="annottext">logToExpr :: forall a era. (HasCallStack, ToExpr a) =&gt; a -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#logToExpr"><span class="hs-identifier hs-var hs-var">logToExpr</span></a></span></span><span> </span><span id="local-6989586621679425410"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679425410"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era. HasCallStack =&gt; String -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#logEntry"><span class="hs-identifier hs-var">logEntry</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. ToExpr a =&gt; a -&gt; String
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-binary-1.3.1.0/l/testlib/doc/html/cardano-ledger-binary/src"><span class="hs-identifier hs-var">showExpr</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679425410"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-989"></span><span>
</span><span id="line-990"></span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#withImpState"><span class="hs-identifier hs-type">withImpState</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-991"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679428070"><span class="annot"><a href="#local-6989586621679428070"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-992"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428070"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-993"></span><span>  </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hspec-core-2.11.7-8079ad8b174397fbf8417423f1b52873a1b0df10044b26818c3cac3f982389d1/share/doc/html/src"><span class="hs-identifier hs-type">SpecWith</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428070"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-994"></span><span>  </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hspec-core-2.11.7-8079ad8b174397fbf8417423f1b52873a1b0df10044b26818c3cac3f982389d1/share/doc/html/src"><span class="hs-identifier hs-type">Spec</span></a></span><span>
</span><span id="line-995"></span><span id="withImpState"><span class="annot"><span class="annottext">withImpState :: forall era.
ShelleyEraImp era =&gt;
SpecWith (ImpTestState era) -&gt; Spec
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#withImpState"><span class="hs-identifier hs-var hs-var">withImpState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-996"></span><span>  </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; IO a -&gt; SpecWith a -&gt; Spec
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/hspec-core-2.11.7-8079ad8b174397fbf8417423f1b52873a1b0df10044b26818c3cac3f982389d1/share/doc/html/src"><span class="hs-identifier hs-var">beforeAll</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-997"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) s a. Monad m =&gt; StateT s m a -&gt; s -&gt; m s
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-var">execStateT</span></a></span><span> </span><span class="annot"><span class="annottext">StateT (ImpTestState era) IO ()
</span><a href="#local-6989586621679425367"><span class="hs-identifier hs-var">addRootTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-998"></span><span>      </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span>
</span><span id="line-999"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">impNES :: NewEpochState era
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNES"><span class="hs-identifier hs-var">impNES</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era. ShelleyEraImp era =&gt; NewEpochState era
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#initImpNES"><span class="hs-identifier hs-var">initImpNES</span></a></span><span>
</span><span id="line-1000"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">impRootTxIn :: TxIn (EraCrypto era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impRootTxIn"><span class="hs-identifier hs-var">impRootTxIn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxIn (EraCrypto era)
</span><a href="#local-6989586621679425366"><span class="hs-identifier hs-var">rootTxIn</span></a></span><span>
</span><span id="line-1001"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">impKeyPairs :: forall (k :: KeyRole).
Map (KeyHash k (EraCrypto era)) (KeyPair k (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impKeyPairs"><span class="hs-identifier hs-var">impKeyPairs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1002"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">impByronKeyPairs :: Map (BootstrapAddress (EraCrypto era)) ByronKeyPair
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impByronKeyPairs"><span class="hs-identifier hs-var">impByronKeyPairs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1003"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">impNativeScripts :: Map (ScriptHash (EraCrypto era)) (NativeScript era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNativeScripts"><span class="hs-identifier hs-var">impNativeScripts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1004"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">impLastTick :: SlotNo
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impLastTick"><span class="hs-identifier hs-var">impLastTick</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><span class="hs-number">0</span></span><span>
</span><span id="line-1005"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">impGlobals :: Globals
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impGlobals"><span class="hs-identifier hs-var">impGlobals</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Globals
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">testGlobals</span></a></span><span>
</span><span id="line-1006"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">impLog :: Doc ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impLog"><span class="hs-identifier hs-var">impLog</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1007"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">impGen :: QCGen
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impGen"><span class="hs-identifier hs-var">impGen</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QCGen
</span><a href="#local-6989586621679425363"><span class="hs-identifier hs-var">qcGen</span></a></span><span>
</span><span id="line-1008"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-1009"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1010"></span><span>    </span><span id="local-6989586621679425362"><span class="annot"><span class="annottext">rootCoin :: Coin
</span><a href="#local-6989586621679425362"><span class="hs-identifier hs-var hs-var">rootCoin</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1_000_000_000</span></span><span>
</span><span id="line-1011"></span><span>    </span><span id="local-6989586621679425366"><span class="annot"><span class="annottext">rootTxIn :: TxIn (EraCrypto era)
</span><a href="#local-6989586621679425366"><span class="hs-identifier hs-var hs-var">rootTxIn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall c. TxId c -&gt; TxIx -&gt; TxIn c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall c. Crypto c =&gt; Int -&gt; TxId c
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#mkTxId"><span class="hs-identifier hs-var">mkTxId</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a. Bounded a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">minBound</span></a></span><span>
</span><span id="line-1012"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679425354"><span class="annot"><span class="annottext">KeyPair 'Payment (EraCrypto era)
</span><a href="#local-6989586621679425354"><span class="hs-identifier hs-var">rootKeyPair</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679425363"><span class="annot"><span class="annottext">QCGen
</span><a href="#local-6989586621679425363"><span class="hs-identifier hs-var">qcGen</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall g a. (RandomGen g, Uniform a) =&gt; g -&gt; (a, g)
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/random-1.2.1.1-97d351bf97dd57637441798736e25556058018a1de673671ce7fdce6e47d0d77/share/doc/html/src"><span class="hs-identifier hs-var">Random.uniform</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; QCGen
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/QuickCheck-2.14.3-a65fd1c4eb4ae76375c6e3f3845a1ba912285f018239b330ae730fef533366f9/share/doc/html/src"><span class="hs-identifier hs-var">mkQCGen</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2024</span></span><span class="hs-special">)</span><span>
</span><span id="line-1013"></span><span>    </span><span id="local-6989586621679425367"><span class="annot"><span class="annottext">addRootTxOut :: StateT (ImpTestState era) IO ()
</span><a href="#local-6989586621679425367"><span class="hs-identifier hs-var hs-var">addRootTxOut</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1014"></span><span>      </span><span id="local-6989586621679425352"><span class="annot"><span class="annottext">KeyHash 'Payment (EraCrypto era)
</span><a href="#local-6989586621679425352"><span class="hs-identifier hs-var">rootKeyHash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era (m :: * -&gt; *) (r :: KeyRole).
(Era era, MonadState (ImpTestState era) m) =&gt;
KeyPair r (EraCrypto era) -&gt; m (KeyHash r (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#addKeyPair"><span class="hs-identifier hs-var">addKeyPair</span></a></span><span> </span><span class="annot"><span class="annottext">KeyPair 'Payment (EraCrypto era)
</span><a href="#local-6989586621679425354"><span class="hs-identifier hs-var">rootKeyPair</span></a></span><span>
</span><span id="line-1015"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679425350"><span class="annot"><span class="annottext">rootAddr :: Addr (EraCrypto era)
</span><a href="#local-6989586621679425350"><span class="hs-identifier hs-var hs-var">rootAddr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall c.
Network -&gt; PaymentCredential c -&gt; StakeReference c -&gt; Addr c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">Addr</span></a></span><span> </span><span class="annot"><span class="annottext">Network
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">Testnet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (kr :: KeyRole) c. KeyHash kr c -&gt; Credential kr c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">KeyHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'Payment (EraCrypto era)
</span><a href="#local-6989586621679425352"><span class="hs-identifier hs-var">rootKeyHash</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall c. StakeReference c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">StakeRefNull</span></a></span><span>
</span><span id="line-1016"></span><span>          </span><span id="local-6989586621679425345"><span class="annot"><span class="annottext">rootTxOut :: TxOut era
</span><a href="#local-6989586621679425345"><span class="hs-identifier hs-var hs-var">rootTxOut</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
(EraTxOut era, HasCallStack) =&gt;
Addr (EraCrypto era) -&gt; Value era -&gt; TxOut era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">mkBasicTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">Addr (EraCrypto era)
</span><a href="#local-6989586621679425350"><span class="hs-identifier hs-var">rootAddr</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall t s. Inject t s =&gt; t -&gt; s
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">inject</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679425362"><span class="hs-identifier hs-var">rootCoin</span></a></span><span>
</span><span id="line-1017"></span><span>      </span><span class="annot"><span class="annottext">forall era. Lens' (ImpTestState era) (NewEpochState era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNESL"><span class="hs-identifier hs-var">impNESL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (NewEpochState era) (EpochState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (EpochState era) (LedgerState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">esLStateL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (LedgerState era) (UTxOState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">lsUTxOStateL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (UTxOState era) (UTxO era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">utxosUtxoL</span></a></span><span>
</span><span id="line-1018"></span><span>        </span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *) a b.
MonadState s m =&gt;
ASetter s s a b -&gt; (a -&gt; b) -&gt; m ()
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-mtl-0.2.0.3-30febb7a254c037eae9a749580d8462f4e1181aa6379e82c103234a8f48251c9/share/doc/html/src"><span class="hs-operator hs-var">%=</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Map (TxIn (EraCrypto era)) (TxOut era) -&gt; UTxO era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">UTxO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall k a. k -&gt; a -&gt; Map k a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.singleton</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn (EraCrypto era)
</span><a href="#local-6989586621679425366"><span class="hs-identifier hs-var">rootTxIn</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut era
</span><a href="#local-6989586621679425345"><span class="hs-identifier hs-var">rootTxOut</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1019"></span><span>
</span><span id="line-1020"></span><span class="hs-comment">-- | Creates a fresh @SafeHash@</span><span>
</span><span id="line-1021"></span><span id="local-6989586621679428033"><span id="local-6989586621679428034"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#freshSafeHash"><span class="hs-identifier hs-type">freshSafeHash</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428034"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428034"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">SafeHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428034"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679428033"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-1022"></span><span id="freshSafeHash"><span class="annot"><span class="annottext">freshSafeHash :: forall era a. Era era =&gt; ImpTestM era (SafeHash (EraCrypto era) a)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#freshSafeHash"><span class="hs-identifier hs-var hs-var">freshSafeHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a (m :: * -&gt; *). (Arbitrary a, MonadGen m) =&gt; m a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">arbitrary</span></a></span><span>
</span><span id="line-1023"></span><span>
</span><span id="line-1024"></span><span id="local-6989586621679428026"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHashVRF"><span class="hs-identifier hs-type">freshKeyHashVRF</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1025"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428026"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1026"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428026"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-crypto-class-2.1.4.0-f9a064a9f4847ae2186cc0b7de9c9032806ff44166e6dee0ed45e502459e8305/share/doc/html/src"><span class="hs-identifier hs-type">Hash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">HASH</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428026"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">VerKeyVRF</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428026"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-1027"></span><span id="freshKeyHashVRF"><span class="annot"><span class="annottext">freshKeyHashVRF :: forall era.
Era era =&gt;
ImpTestM
  era (Hash (HASH (EraCrypto era)) (VerKeyVRF (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHashVRF"><span class="hs-identifier hs-var hs-var">freshKeyHashVRF</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a (m :: * -&gt; *). (Arbitrary a, MonadGen m) =&gt; m a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">arbitrary</span></a></span><span>
</span><span id="line-1028"></span><span>
</span><span id="line-1029"></span><span class="hs-comment">-- | Adds a key pair to the keyhash lookup map</span><span>
</span><span id="line-1030"></span><span id="local-6989586621679428045"><span id="local-6989586621679428046"><span id="local-6989586621679428047"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#addKeyPair"><span class="hs-identifier hs-type">addKeyPair</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1031"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428047"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-type">MonadState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428047"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679428046"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1032"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyPair</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428045"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428047"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1033"></span><span>  </span><span class="annot"><a href="#local-6989586621679428046"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428045"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428047"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-1034"></span><span id="addKeyPair"><span class="annot"><span class="annottext">addKeyPair :: forall era (m :: * -&gt; *) (r :: KeyRole).
(Era era, MonadState (ImpTestState era) m) =&gt;
KeyPair r (EraCrypto era) -&gt; m (KeyHash r (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#addKeyPair"><span class="hs-identifier hs-var hs-var">addKeyPair</span></a></span></span><span> </span><span id="local-6989586621679425319"><span class="annot"><span class="annottext">keyPair :: KeyPair r (EraCrypto era)
</span><a href="#local-6989586621679425319"><span class="hs-identifier hs-var">keyPair</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyPair</span></a></span><span> </span><span id="local-6989586621679425317"><span class="annot"><span class="annottext">VKey r (EraCrypto era)
</span><a href="#local-6989586621679425317"><span class="hs-identifier hs-var">vk</span></a></span></span><span> </span><span class="annot"><span class="annottext">SignKeyDSIGN (DSIGN (EraCrypto era))
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1035"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679425316"><span class="annot"><span class="annottext">forall (k :: KeyRole).
Map (KeyHash k (EraCrypto era)) (KeyPair k (EraCrypto era))
impKeyPairs :: forall (k :: KeyRole).
Map (KeyHash k (EraCrypto era)) (KeyPair k (EraCrypto era))
impKeyPairs :: forall era.
ImpTestState era
-&gt; forall (k :: KeyRole).
   Map (KeyHash k (EraCrypto era)) (KeyPair k (EraCrypto era))
</span><a href="#local-6989586621679425316"><span class="hs-identifier hs-var hs-var">impKeyPairs</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *). MonadState s m =&gt; m s
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">get</span></a></span><span>
</span><span id="line-1036"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679425315"><span class="annot"><span class="annottext">keyHash :: KeyHash r (EraCrypto era)
</span><a href="#local-6989586621679425315"><span class="hs-identifier hs-var hs-var">keyHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall c (kd :: KeyRole). Crypto c =&gt; VKey kd c -&gt; KeyHash kd c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">hashKey</span></a></span><span> </span><span class="annot"><span class="annottext">VKey r (EraCrypto era)
</span><a href="#local-6989586621679425317"><span class="hs-identifier hs-var">vk</span></a></span><span>
</span><span id="line-1037"></span><span>  </span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">modify</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679425314"><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679425314"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1038"></span><span>    </span><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679425314"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-1039"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">impKeyPairs :: forall (k :: KeyRole).
Map (KeyHash k (EraCrypto era)) (KeyPair k (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impKeyPairs"><span class="hs-identifier hs-var">impKeyPairs</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1040"></span><span>          </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.insert</span></a></span><span>
</span><span id="line-1041"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (a :: KeyRole -&gt; * -&gt; *) (r :: KeyRole) c (r' :: KeyRole).
HasKeyRole a =&gt;
a r c -&gt; a r' c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">coerceKeyRole</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash r (EraCrypto era)
</span><a href="#local-6989586621679425315"><span class="hs-identifier hs-var">keyHash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1042"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">coerce :: forall a b. Coercible a b =&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">coerce</span></a></span><span> </span><span class="annot"><span class="annottext">KeyPair r (EraCrypto era)
</span><a href="#local-6989586621679425319"><span class="hs-identifier hs-var">keyPair</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1043"></span><span>            </span><span class="annot"><span class="annottext">forall (k :: KeyRole).
Map (KeyHash k (EraCrypto era)) (KeyPair k (EraCrypto era))
</span><a href="#local-6989586621679425316"><span class="hs-identifier hs-var">impKeyPairs</span></a></span><span>
</span><span id="line-1044"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-1045"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash r (EraCrypto era)
</span><a href="#local-6989586621679425315"><span class="hs-identifier hs-var">keyHash</span></a></span><span>
</span><span id="line-1046"></span><span>
</span><span id="line-1047"></span><span class="hs-comment">-- | Looks up the `KeyPair` corresponding to the `KeyHash`. The `KeyHash` must be</span><span>
</span><span id="line-1048"></span><span class="hs-comment">-- created with `freshKeyHash` for this to work.</span><span>
</span><span id="line-1049"></span><span id="local-6989586621679428218"><span id="local-6989586621679428219"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#lookupKeyPair"><span class="hs-identifier hs-type">lookupKeyPair</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428219"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428218"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428218"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyPair</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428219"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428218"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-1050"></span><span id="lookupKeyPair"><span class="annot"><span class="annottext">lookupKeyPair :: forall (r :: KeyRole) era.
HasCallStack =&gt;
KeyHash r (EraCrypto era)
-&gt; ImpTestM era (KeyPair r (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#lookupKeyPair"><span class="hs-identifier hs-var hs-var">lookupKeyPair</span></a></span></span><span> </span><span id="local-6989586621679425298"><span class="annot"><span class="annottext">KeyHash r (EraCrypto era)
</span><a href="#local-6989586621679425298"><span class="hs-identifier hs-var">keyHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1051"></span><span>  </span><span id="local-6989586621679425297"><span class="annot"><span class="annottext">Map (KeyHash r (EraCrypto era)) (KeyPair r (EraCrypto era))
</span><a href="#local-6989586621679425297"><span class="hs-identifier hs-var">keyPairs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">gets</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
ImpTestState era
-&gt; forall (k :: KeyRole).
   Map (KeyHash k (EraCrypto era)) (KeyPair k (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impKeyPairs"><span class="hs-identifier hs-var">impKeyPairs</span></a></span><span>
</span><span id="line-1052"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash r (EraCrypto era)
</span><a href="#local-6989586621679425298"><span class="hs-identifier hs-var">keyHash</span></a></span><span> </span><span class="annot"><span class="annottext">Map (KeyHash r (EraCrypto era)) (KeyPair r (EraCrypto era))
</span><a href="#local-6989586621679425297"><span class="hs-identifier hs-var">keyPairs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1053"></span><span>    </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679425296"><span class="annot"><span class="annottext">KeyPair r (EraCrypto era)
</span><a href="#local-6989586621679425296"><span class="hs-identifier hs-var">keyPair</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">KeyPair r (EraCrypto era)
</span><a href="#local-6989586621679425296"><span class="hs-identifier hs-var">keyPair</span></a></span><span>
</span><span id="line-1054"></span><span>    </span><span class="annot"><span class="annottext">Maybe (KeyPair r (EraCrypto era))
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1055"></span><span>      </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1056"></span><span>        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Could not find a keypair corresponding to: &quot;</span></span><span>
</span><span id="line-1057"></span><span>          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash r (EraCrypto era)
</span><a href="#local-6989586621679425298"><span class="hs-identifier hs-var">keyHash</span></a></span><span>
</span><span id="line-1058"></span><span>          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\nAlways use `freshKeyHash` to create key hashes.&quot;</span></span><span>
</span><span id="line-1059"></span><span>
</span><span id="line-1060"></span><span class="hs-comment">-- | Generates a fresh `KeyHash` and stores the corresponding `KeyPair` in the</span><span>
</span><span id="line-1061"></span><span class="hs-comment">-- ImpTestState. If you also need the `KeyPair` consider using `freshKeyPair` for</span><span>
</span><span id="line-1062"></span><span class="hs-comment">-- generation or `lookupKeyPair` to look up the `KeyPair` corresponding to the `KeyHash`</span><span>
</span><span id="line-1063"></span><span id="local-6989586621679428186"><span id="local-6989586621679428187"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-type">freshKeyHash</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428187"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428187"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428186"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428187"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-1064"></span><span id="freshKeyHash"><span class="annot"><span class="annottext">freshKeyHash :: forall era (r :: KeyRole).
Era era =&gt;
ImpTestM era (KeyHash r (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-var hs-var">freshKeyHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a b. (a, b) -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">fst</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era (m :: * -&gt; *) (r :: KeyRole).
(Era era, MonadState (ImpTestState era) m, MonadGen m) =&gt;
m (KeyHash r (EraCrypto era), KeyPair r (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyPair"><span class="hs-identifier hs-var">freshKeyPair</span></a></span><span>
</span><span id="line-1065"></span><span>
</span><span id="line-1066"></span><span class="hs-comment">-- | Generate a random KeyPair and add it to the known keys in the Imp state</span><span>
</span><span id="line-1067"></span><span id="local-6989586621679428004"><span id="local-6989586621679428005"><span id="local-6989586621679428006"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyPair"><span class="hs-identifier hs-type">freshKeyPair</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1068"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428006"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-type">MonadState</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428006"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679428005"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/quickcheck-transformer-0.3.1.2-37a3ba1358fd0d06b7c9d052985e623cc8c8103003d289ff2443df2cbc4aad62/share/doc/html/src"><span class="hs-identifier hs-type">MonadGen</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428005"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1069"></span><span>  </span><span class="annot"><a href="#local-6989586621679428005"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428004"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428006"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyPair</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428004"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428006"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-1070"></span><span id="freshKeyPair"><span class="annot"><span class="annottext">freshKeyPair :: forall era (m :: * -&gt; *) (r :: KeyRole).
(Era era, MonadState (ImpTestState era) m, MonadGen m) =&gt;
m (KeyHash r (EraCrypto era), KeyPair r (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyPair"><span class="hs-identifier hs-var hs-var">freshKeyPair</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1071"></span><span>  </span><span id="local-6989586621679425275"><span class="annot"><span class="annottext">KeyPair r (EraCrypto era)
</span><a href="#local-6989586621679425275"><span class="hs-identifier hs-var">keyPair</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a (m :: * -&gt; *). (Arbitrary a, MonadGen m) =&gt; m a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">arbitrary</span></a></span><span>
</span><span id="line-1072"></span><span>  </span><span id="local-6989586621679425274"><span class="annot"><span class="annottext">KeyHash r (EraCrypto era)
</span><a href="#local-6989586621679425274"><span class="hs-identifier hs-var">keyHash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era (m :: * -&gt; *) (r :: KeyRole).
(Era era, MonadState (ImpTestState era) m) =&gt;
KeyPair r (EraCrypto era) -&gt; m (KeyHash r (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#addKeyPair"><span class="hs-identifier hs-var">addKeyPair</span></a></span><span> </span><span class="annot"><span class="annottext">KeyPair r (EraCrypto era)
</span><a href="#local-6989586621679425275"><span class="hs-identifier hs-var">keyPair</span></a></span><span>
</span><span id="line-1073"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeyHash r (EraCrypto era)
</span><a href="#local-6989586621679425274"><span class="hs-identifier hs-var">keyHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">KeyPair r (EraCrypto era)
</span><a href="#local-6989586621679425275"><span class="hs-identifier hs-var">keyPair</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1074"></span><span>
</span><span id="line-1075"></span><span id="local-6989586621679427997"><span id="local-6989586621679427998"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyAddr"><span class="hs-identifier hs-type">freshKeyAddr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427998"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427998"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427997"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427998"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Addr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427998"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-1076"></span><span id="freshKeyAddr"><span class="annot"><span class="annottext">freshKeyAddr :: forall era (r :: KeyRole).
Era era =&gt;
ImpTestM era (KeyHash r (EraCrypto era), Addr (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyAddr"><span class="hs-identifier hs-var hs-var">freshKeyAddr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1077"></span><span>  </span><span id="local-6989586621679425268"><span class="annot"><span class="annottext">KeyHash 'Payment (EraCrypto era)
</span><a href="#local-6989586621679425268"><span class="hs-identifier hs-var">keyHash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era (r :: KeyRole).
Era era =&gt;
ImpTestM era (KeyHash r (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-var">freshKeyHash</span></a></span><span>
</span><span id="line-1078"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (a :: KeyRole -&gt; * -&gt; *) (r :: KeyRole) c (r' :: KeyRole).
HasKeyRole a =&gt;
a r c -&gt; a r' c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">coerceKeyRole</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'Payment (EraCrypto era)
</span><a href="#local-6989586621679425268"><span class="hs-identifier hs-var">keyHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall c.
Network -&gt; PaymentCredential c -&gt; StakeReference c -&gt; Addr c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">Addr</span></a></span><span> </span><span class="annot"><span class="annottext">Network
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">Testnet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (kr :: KeyRole) c. KeyHash kr c -&gt; Credential kr c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">KeyHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'Payment (EraCrypto era)
</span><a href="#local-6989586621679425268"><span class="hs-identifier hs-var">keyHash</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall c. StakeReference c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">StakeRefNull</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1079"></span><span>
</span><span id="line-1080"></span><span class="hs-comment">-- | Looks up the keypair corresponding to the `BootstrapAddress`. The `BootstrapAddress`</span><span>
</span><span id="line-1081"></span><span class="hs-comment">-- must be created with `freshBootstrapAddess` for this to work.</span><span>
</span><span id="line-1082"></span><span id="local-6989586621679428204"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#lookupByronKeyPair"><span class="hs-identifier hs-type">lookupByronKeyPair</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">BootstrapAddress</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428204"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428204"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">ByronKeyPair</span></a></span></span><span>
</span><span id="line-1083"></span><span id="lookupByronKeyPair"><span class="annot"><span class="annottext">lookupByronKeyPair :: forall era.
HasCallStack =&gt;
BootstrapAddress (EraCrypto era) -&gt; ImpTestM era ByronKeyPair
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#lookupByronKeyPair"><span class="hs-identifier hs-var hs-var">lookupByronKeyPair</span></a></span></span><span> </span><span id="local-6989586621679425255"><span class="annot"><span class="annottext">BootstrapAddress (EraCrypto era)
</span><a href="#local-6989586621679425255"><span class="hs-identifier hs-var">bootAddr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1084"></span><span>  </span><span id="local-6989586621679425254"><span class="annot"><span class="annottext">Map (BootstrapAddress (EraCrypto era)) ByronKeyPair
</span><a href="#local-6989586621679425254"><span class="hs-identifier hs-var">keyPairs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">gets</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
ImpTestState era
-&gt; Map (BootstrapAddress (EraCrypto era)) ByronKeyPair
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impByronKeyPairs"><span class="hs-identifier hs-var">impByronKeyPairs</span></a></span><span>
</span><span id="line-1085"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">BootstrapAddress (EraCrypto era)
</span><a href="#local-6989586621679425255"><span class="hs-identifier hs-var">bootAddr</span></a></span><span> </span><span class="annot"><span class="annottext">Map (BootstrapAddress (EraCrypto era)) ByronKeyPair
</span><a href="#local-6989586621679425254"><span class="hs-identifier hs-var">keyPairs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1086"></span><span>    </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679425253"><span class="annot"><span class="annottext">ByronKeyPair
</span><a href="#local-6989586621679425253"><span class="hs-identifier hs-var">keyPair</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">ByronKeyPair
</span><a href="#local-6989586621679425253"><span class="hs-identifier hs-var">keyPair</span></a></span><span>
</span><span id="line-1087"></span><span>    </span><span class="annot"><span class="annottext">Maybe ByronKeyPair
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1088"></span><span>      </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1089"></span><span>        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Could not find a keypair corresponding to: &quot;</span></span><span>
</span><span id="line-1090"></span><span>          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">BootstrapAddress (EraCrypto era)
</span><a href="#local-6989586621679425255"><span class="hs-identifier hs-var">bootAddr</span></a></span><span>
</span><span id="line-1091"></span><span>          </span><span class="annot"><span class="annottext">forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\nAlways use `freshByronKeyHash` to create key hashes.&quot;</span></span><span>
</span><span id="line-1092"></span><span>
</span><span id="line-1093"></span><span class="hs-comment">-- | Generates a fresh `KeyHash` and stores the corresponding `ByronKeyPair` in the</span><span>
</span><span id="line-1094"></span><span class="hs-comment">-- ImpTestState. If you also need the `ByronKeyPair` consider using `freshByronKeyPair` for</span><span>
</span><span id="line-1095"></span><span class="hs-comment">-- generation or `lookupByronKeyPair` to look up the `ByronKeyPair` corresponding to the `KeyHash`</span><span>
</span><span id="line-1096"></span><span id="local-6989586621679425251"><span id="local-6989586621679425252"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#freshByronKeyHash"><span class="hs-identifier hs-type">freshByronKeyHash</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679425252"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679425252"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679425251"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679425252"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-1097"></span><span id="freshByronKeyHash"><span class="annot"><span class="annottext">freshByronKeyHash :: forall era (r :: KeyRole).
Era era =&gt;
ImpTestM era (KeyHash r (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#freshByronKeyHash"><span class="hs-identifier hs-var hs-var">freshByronKeyHash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (a :: KeyRole -&gt; * -&gt; *) (r :: KeyRole) c (r' :: KeyRole).
HasKeyRole a =&gt;
a r c -&gt; a r' c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">coerceKeyRole</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall c. Crypto c =&gt; BootstrapAddress c -&gt; KeyHash 'Payment c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">bootstrapKeyHash</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. ImpTestM era (BootstrapAddress (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#freshBootstapAddress"><span class="hs-identifier hs-var">freshBootstapAddress</span></a></span><span>
</span><span id="line-1098"></span><span>
</span><span id="line-1099"></span><span id="local-6989586621679427990"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#freshBootstapAddress"><span class="hs-identifier hs-type">freshBootstapAddress</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427990"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">BootstrapAddress</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427990"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-1100"></span><span id="freshBootstapAddress"><span class="annot"><span class="annottext">freshBootstapAddress :: forall era. ImpTestM era (BootstrapAddress (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#freshBootstapAddress"><span class="hs-identifier hs-var hs-var">freshBootstapAddress</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1101"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestState"><span class="hs-identifier hs-type">ImpTestState</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679425221"><span class="annot"><span class="annottext">Map (BootstrapAddress (EraCrypto era)) ByronKeyPair
impByronKeyPairs :: Map (BootstrapAddress (EraCrypto era)) ByronKeyPair
impByronKeyPairs :: forall era.
ImpTestState era
-&gt; Map (BootstrapAddress (EraCrypto era)) ByronKeyPair
</span><a href="#local-6989586621679425221"><span class="hs-identifier hs-var hs-var">impByronKeyPairs</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *). MonadState s m =&gt; m s
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">get</span></a></span><span>
</span><span id="line-1102"></span><span>  </span><span id="local-6989586621679425220"><span class="annot"><span class="annottext">keyPair :: ByronKeyPair
</span><a href="#local-6989586621679425220"><span class="hs-identifier hs-var">keyPair</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">ByronKeyPair</span></a></span><span> </span><span id="local-6989586621679425219"><span class="annot"><span class="annottext">VerificationKey
</span><a href="#local-6989586621679425219"><span class="hs-identifier hs-var">verificationKey</span></a></span></span><span> </span><span class="annot"><span class="annottext">SigningKey
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall a (m :: * -&gt; *). (Arbitrary a, MonadGen m) =&gt; m a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">arbitrary</span></a></span><span>
</span><span id="line-1103"></span><span>  </span><span id="local-6989586621679425218"><span class="annot"><span class="annottext">Maybe HDAddressPayload
</span><a href="#local-6989586621679425218"><span class="hs-identifier hs-var">payload</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1104"></span><span>    </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a. MonadGen m =&gt; [m a] -&gt; m a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/quickcheck-transformer-0.3.1.2-37a3ba1358fd0d06b7c9d052985e623cc8c8103003d289ff2443df2cbc4aad62/share/doc/html/src"><span class="hs-identifier hs-var">oneof</span></a></span><span>
</span><span id="line-1105"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-1106"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; HDAddressPayload
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-byron-1.0.0.4/doc/html/cardano-ledger-byron/src"><span class="hs-identifier hs-var">Byron.HDAddressPayload</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a (m :: * -&gt; *). HasStatefulGen a m =&gt; Int -&gt; m ByteString
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">uniformByteStringM</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall (g :: * -&gt; *) a. (MonadGen g, Random a) =&gt; (a, a) -&gt; g a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/quickcheck-transformer-0.3.1.2-37a3ba1358fd0d06b7c9d052985e623cc8c8103003d289ff2443df2cbc4aad62/share/doc/html/src"><span class="hs-identifier hs-var">choose</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">63</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1107"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-1108"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679425214"><span class="annot"><span class="annottext">asd :: AddrSpendingData
</span><a href="#local-6989586621679425214"><span class="hs-identifier hs-var hs-var">asd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VerificationKey -&gt; AddrSpendingData
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-byron-1.0.0.4/doc/html/cardano-ledger-byron/src"><span class="hs-identifier hs-var">Byron.VerKeyASD</span></a></span><span> </span><span class="annot"><span class="annottext">VerificationKey
</span><a href="#local-6989586621679425219"><span class="hs-identifier hs-var">verificationKey</span></a></span><span>
</span><span id="line-1109"></span><span>      </span><span id="local-6989586621679425212"><span class="annot"><span class="annottext">attrs :: AddrAttributes
</span><a href="#local-6989586621679425212"><span class="hs-identifier hs-var hs-var">attrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe HDAddressPayload -&gt; NetworkMagic -&gt; AddrAttributes
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-byron-1.0.0.4/doc/html/cardano-ledger-byron/src"><span class="hs-identifier hs-var">Byron.AddrAttributes</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe HDAddressPayload
</span><a href="#local-6989586621679425218"><span class="hs-identifier hs-var">payload</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word32 -&gt; NetworkMagic
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-byron-1.0.0.4/doc/html/cardano-ledger-byron/src"><span class="hs-identifier hs-var">Byron.NetworkTestnet</span></a></span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-1110"></span><span>      </span><span id="local-6989586621679425209"><span class="annot"><span class="annottext">bootAddr :: BootstrapAddress (EraCrypto era)
</span><a href="#local-6989586621679425209"><span class="hs-identifier hs-var hs-var">bootAddr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall c. Address -&gt; BootstrapAddress c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">BootstrapAddress</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">AddrSpendingData -&gt; AddrAttributes -&gt; Address
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-byron-1.0.0.4/doc/html/cardano-ledger-byron/src"><span class="hs-identifier hs-var">Byron.makeAddress</span></a></span><span> </span><span class="annot"><span class="annottext">AddrSpendingData
</span><a href="#local-6989586621679425214"><span class="hs-identifier hs-var">asd</span></a></span><span> </span><span class="annot"><span class="annottext">AddrAttributes
</span><a href="#local-6989586621679425212"><span class="hs-identifier hs-var">attrs</span></a></span><span>
</span><span id="line-1111"></span><span>  </span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">modify</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679425207"><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679425207"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1112"></span><span>    </span><span class="annot"><span class="annottext">ImpTestState era
</span><a href="#local-6989586621679425207"><span class="hs-identifier hs-var">st</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">impByronKeyPairs :: Map (BootstrapAddress (EraCrypto era)) ByronKeyPair
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impByronKeyPairs"><span class="hs-identifier hs-var">impByronKeyPairs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.insert</span></a></span><span> </span><span class="annot"><span class="annottext">BootstrapAddress (EraCrypto era)
</span><a href="#local-6989586621679425209"><span class="hs-identifier hs-var">bootAddr</span></a></span><span> </span><span class="annot"><span class="annottext">ByronKeyPair
</span><a href="#local-6989586621679425220"><span class="hs-identifier hs-var">keyPair</span></a></span><span> </span><span class="annot"><span class="annottext">Map (BootstrapAddress (EraCrypto era)) ByronKeyPair
</span><a href="#local-6989586621679425221"><span class="hs-identifier hs-var">impByronKeyPairs</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-1113"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">BootstrapAddress (EraCrypto era)
</span><a href="#local-6989586621679425209"><span class="hs-identifier hs-var">bootAddr</span></a></span><span>
</span><span id="line-1114"></span><span>
</span><span id="line-1115"></span><span id="local-6989586621679427980"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#sendCoinTo"><span class="hs-identifier hs-type">sendCoinTo</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1116"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427980"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1117"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Addr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427980"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1118"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Coin</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1119"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427980"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427980"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-1120"></span><span id="sendCoinTo"><span class="annot"><span class="annottext">sendCoinTo :: forall era.
(ShelleyEraImp era, HasCallStack) =&gt;
Addr (EraCrypto era) -&gt; Coin -&gt; ImpTestM era (TxIn (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#sendCoinTo"><span class="hs-identifier hs-var hs-var">sendCoinTo</span></a></span></span><span> </span><span id="local-6989586621679425194"><span class="annot"><span class="annottext">Addr (EraCrypto era)
</span><a href="#local-6989586621679425194"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era.
(ShelleyEraImp era, HasCallStack) =&gt;
Addr (EraCrypto era)
-&gt; Value era -&gt; ImpTestM era (TxIn (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#sendValueTo"><span class="hs-identifier hs-var">sendValueTo</span></a></span><span> </span><span class="annot"><span class="annottext">Addr (EraCrypto era)
</span><a href="#local-6989586621679425194"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall t s. Inject t s =&gt; t -&gt; s
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">inject</span></a></span><span>
</span><span id="line-1121"></span><span>
</span><span id="line-1122"></span><span id="local-6989586621679427978"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#sendValueTo"><span class="hs-identifier hs-type">sendValueTo</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1123"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427978"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1124"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Addr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427978"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1125"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427978"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1126"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427978"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427978"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-1127"></span><span id="sendValueTo"><span class="annot"><span class="annottext">sendValueTo :: forall era.
(ShelleyEraImp era, HasCallStack) =&gt;
Addr (EraCrypto era)
-&gt; Value era -&gt; ImpTestM era (TxIn (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#sendValueTo"><span class="hs-identifier hs-var hs-var">sendValueTo</span></a></span></span><span> </span><span id="local-6989586621679425157"><span class="annot"><span class="annottext">Addr (EraCrypto era)
</span><a href="#local-6989586621679425157"><span class="hs-identifier hs-var">addr</span></a></span></span><span> </span><span id="local-6989586621679425156"><span class="annot"><span class="annottext">Value era
</span><a href="#local-6989586621679425156"><span class="hs-identifier hs-var">amount</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1128"></span><span>  </span><span id="local-6989586621679425155"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425155"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-1129"></span><span>    </span><span class="annot"><span class="annottext">forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
String -&gt; Tx era -&gt; ImpTestM era (Tx era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#submitTxAnn"><span class="hs-identifier hs-var">submitTxAnn</span></a></span><span>
</span><span id="line-1130"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Giving &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Value era
</span><a href="#local-6989586621679425156"><span class="hs-identifier hs-var">amount</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; to &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Addr (EraCrypto era)
</span><a href="#local-6989586621679425157"><span class="hs-identifier hs-var">addr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1131"></span><span>      </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTxBody era =&gt; TxBody era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-1132"></span><span>        </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxOut era))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">outputsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; StrictSeq a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-strict-containers-0.1.3.0-c8c434ba474a408c40a155b68fe1059a1c9196931f80e9c4ade09421da2372fd/share/doc/html/src"><span class="hs-identifier hs-var">SSeq.singleton</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
(EraTxOut era, HasCallStack) =&gt;
Addr (EraCrypto era) -&gt; Value era -&gt; TxOut era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">mkBasicTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">Addr (EraCrypto era)
</span><a href="#local-6989586621679425157"><span class="hs-identifier hs-var">addr</span></a></span><span> </span><span class="annot"><span class="annottext">Value era
</span><a href="#local-6989586621679425156"><span class="hs-identifier hs-var">amount</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1133"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall i era.
(HasCallStack, Integral i, EraTx era) =&gt;
i -&gt; Tx era -&gt; TxIn (EraCrypto era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">txInAt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-type">Int</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425155"><span class="hs-identifier hs-var">tx</span></a></span><span>
</span><span id="line-1134"></span><span>
</span><span id="line-1135"></span><span class="hs-comment">-- | Modify the current new epoch state with a function</span><span>
</span><span id="line-1136"></span><span id="local-6989586621679428929"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#modifyNES"><span class="hs-identifier hs-type">modifyNES</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428929"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428929"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428929"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1137"></span><span id="modifyNES"><span class="annot"><span class="annottext">modifyNES :: forall era.
(NewEpochState era -&gt; NewEpochState era) -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#modifyNES"><span class="hs-identifier hs-var hs-var">modifyNES</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Lens' (ImpTestState era) (NewEpochState era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNESL"><span class="hs-identifier hs-var">impNESL</span></a></span><span> </span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *) a b.
MonadState s m =&gt;
ASetter s s a b -&gt; (a -&gt; b) -&gt; m ()
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-mtl-0.2.0.3-30febb7a254c037eae9a749580d8462f4e1181aa6379e82c103234a8f48251c9/share/doc/html/src"><span class="hs-operator hs-var">%=</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1138"></span><span>
</span><span id="line-1139"></span><span class="hs-comment">-- | Get a value from the current new epoch state using the lens</span><span>
</span><span id="line-1140"></span><span id="local-6989586621679428883"><span id="local-6989586621679428884"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-type">getsNES</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier hs-type">SimpleGetter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-type">NewEpochState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428884"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679428883"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428884"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428883"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-1141"></span><span id="getsNES"><span class="annot"><span class="annottext">getsNES :: forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var hs-var">getsNES</span></a></span></span><span> </span><span id="local-6989586621679425145"><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) a
</span><a href="#local-6989586621679425145"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">gets</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *) a. MonadReader s m =&gt; Getting a s a -&gt; m a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-mtl-0.2.0.3-30febb7a254c037eae9a749580d8462f4e1181aa6379e82c103234a8f48251c9/share/doc/html/src"><span class="hs-identifier hs-var">view</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (ImpTestState era) (NewEpochState era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNESL"><span class="hs-identifier hs-var">impNESL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">SimpleGetter (NewEpochState era) a
</span><a href="#local-6989586621679425145"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-1142"></span><span>
</span><span id="line-1143"></span><span id="local-6989586621679428548"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getUTxO"><span class="hs-identifier hs-type">getUTxO</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428548"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">UTxO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679428548"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1144"></span><span id="getUTxO"><span class="annot"><span class="annottext">getUTxO :: forall era. ImpTestM era (UTxO era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getUTxO"><span class="hs-identifier hs-var hs-var">getUTxO</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (NewEpochState era) (EpochState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (EpochState era) (LedgerState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">esLStateL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (LedgerState era) (UTxOState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">lsUTxOStateL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (UTxOState era) (UTxO era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">utxosUtxoL</span></a></span><span>
</span><span id="line-1145"></span><span>
</span><span id="line-1146"></span><span id="local-6989586621679427975"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#submitTxAnn"><span class="hs-identifier hs-type">submitTxAnn</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1147"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427975"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1148"></span><span>  </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1149"></span><span>  </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427975"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1150"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427975"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427975"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1151"></span><span id="submitTxAnn"><span class="annot"><span class="annottext">submitTxAnn :: forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
String -&gt; Tx era -&gt; ImpTestM era (Tx era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#submitTxAnn"><span class="hs-identifier hs-var hs-var">submitTxAnn</span></a></span></span><span> </span><span id="local-6989586621679425126"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679425126"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span id="local-6989586621679425125"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425125"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a era.
NFData a =&gt;
String -&gt; ImpTestM era a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impAnn"><span class="hs-identifier hs-var">impAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679425126"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
(ShelleyEraImp era, HasCallStack) =&gt;
Tx era
-&gt; ImpTestM
     era
     (Either
        (NonEmpty (PredicateFailure (EraRule &quot;LEDGER&quot; era))) (Tx era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#trySubmitTx"><span class="hs-identifier hs-var">trySubmitTx</span></a></span><span> </span><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679425125"><span class="hs-identifier hs-var">tx</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b (m :: * -&gt; *).
(HasCallStack, ToExpr a, NFData b, MonadIO m) =&gt;
Either a b -&gt; m b
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">expectRightDeepExpr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1152"></span><span>
</span><span id="line-1153"></span><span id="local-6989586621679427961"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#submitTxAnn_"><span class="hs-identifier hs-type">submitTxAnn_</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1154"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427961"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Tx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427961"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427961"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1155"></span><span id="submitTxAnn_"><span class="annot"><span class="annottext">submitTxAnn_ :: forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
String -&gt; Tx era -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#submitTxAnn_"><span class="hs-identifier hs-var hs-var">submitTxAnn_</span></a></span></span><span> </span><span id="local-6989586621679425118"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679425118"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">void</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
String -&gt; Tx era -&gt; ImpTestM era (Tx era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#submitTxAnn"><span class="hs-identifier hs-var">submitTxAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679425118"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-1156"></span><span>
</span><span id="line-1157"></span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#registerRewardAccount"><span class="hs-identifier hs-type">registerRewardAccount</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1158"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679427959"><span class="annot"><a href="#local-6989586621679427959"><span class="hs-identifier hs-type">era</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-1159"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span>
</span><span id="line-1160"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427959"><span class="hs-identifier hs-type">era</span></a></span><span>
</span><span id="line-1161"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1162"></span><span>  </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427959"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">RewardAccount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427959"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1163"></span><span id="registerRewardAccount"><span class="annot"><span class="annottext">registerRewardAccount :: forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
ImpTestM era (RewardAccount (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#registerRewardAccount"><span class="hs-identifier hs-var hs-var">registerRewardAccount</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1164"></span><span>  </span><span id="local-6989586621679425067"><span class="annot"><span class="annottext">KeyHash 'Staking (EraCrypto era)
</span><a href="#local-6989586621679425067"><span class="hs-identifier hs-var">khDelegator</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era (r :: KeyRole).
Era era =&gt;
ImpTestM era (KeyHash r (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-var">freshKeyHash</span></a></span><span>
</span><span id="line-1165"></span><span>  </span><span id="local-6989586621679425066"><span class="annot"><span class="annottext">KeyPair 'Staking (EraCrypto era)
</span><a href="#local-6989586621679425066"><span class="hs-identifier hs-var">kpDelegator</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (r :: KeyRole) era.
HasCallStack =&gt;
KeyHash r (EraCrypto era)
-&gt; ImpTestM era (KeyPair r (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#lookupKeyPair"><span class="hs-identifier hs-var">lookupKeyPair</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'Staking (EraCrypto era)
</span><a href="#local-6989586621679425067"><span class="hs-identifier hs-var">khDelegator</span></a></span><span>
</span><span id="line-1166"></span><span>  </span><span id="local-6989586621679425065"><span class="annot"><span class="annottext">KeyPair 'Payment (EraCrypto era)
</span><a href="#local-6989586621679425065"><span class="hs-identifier hs-var">kpSpending</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall (r :: KeyRole) era.
HasCallStack =&gt;
KeyHash r (EraCrypto era)
-&gt; ImpTestM era (KeyPair r (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#lookupKeyPair"><span class="hs-identifier hs-var">lookupKeyPair</span></a></span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">=&lt;&lt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era (r :: KeyRole).
Era era =&gt;
ImpTestM era (KeyHash r (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-var">freshKeyHash</span></a></span><span>
</span><span id="line-1167"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679425064"><span class="annot"><span class="annottext">stakingCredential :: Credential 'Staking (EraCrypto era)
</span><a href="#local-6989586621679425064"><span class="hs-identifier hs-var hs-var">stakingCredential</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (kr :: KeyRole) c. KeyHash kr c -&gt; Credential kr c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">KeyHashObj</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'Staking (EraCrypto era)
</span><a href="#local-6989586621679425067"><span class="hs-identifier hs-var">khDelegator</span></a></span><span>
</span><span id="line-1168"></span><span>  </span><span class="annot"><span class="annottext">forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
String -&gt; Tx era -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#submitTxAnn_"><span class="hs-identifier hs-var">submitTxAnn_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Register Reward Account: &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/text-1.2.5.0/src"><span class="hs-identifier hs-var">T.unpack</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (kr :: KeyRole) c. Credential kr c -&gt; Text
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">credToText</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking (EraCrypto era)
</span><a href="#local-6989586621679425064"><span class="hs-identifier hs-var">stakingCredential</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1169"></span><span>    </span><span class="annot"><span class="annottext">forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTxBody era =&gt; TxBody era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-1170"></span><span>      </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxOut era))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">outputsTxBodyL</span></a></span><span>
</span><span id="line-1171"></span><span>        </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; StrictSeq a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-strict-containers-0.1.3.0-c8c434ba474a408c40a155b68fe1059a1c9196931f80e9c4ade09421da2372fd/share/doc/html/src"><span class="hs-identifier hs-var">SSeq.fromList</span></a></span><span>
</span><span id="line-1172"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">forall era.
(EraTxOut era, HasCallStack) =&gt;
Addr (EraCrypto era) -&gt; Value era -&gt; TxOut era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">mkBasicTxOut</span></a></span><span>
</span><span id="line-1173"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall c.
Crypto c =&gt;
(KeyPair 'Payment c, KeyPair 'Staking c) -&gt; Addr c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">mkAddr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">KeyPair 'Payment (EraCrypto era)
</span><a href="#local-6989586621679425065"><span class="hs-identifier hs-var">kpSpending</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">KeyPair 'Staking (EraCrypto era)
</span><a href="#local-6989586621679425066"><span class="hs-identifier hs-var">kpDelegator</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1174"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall t s. Inject t s =&gt; t -&gt; s
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">inject</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">Coin</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">10_000_000</span></span><span class="hs-special">)</span><span>
</span><span id="line-1175"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-1176"></span><span>      </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxCert era))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">certsTxBodyL</span></a></span><span>
</span><span id="line-1177"></span><span>        </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. [a] -&gt; StrictSeq a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-strict-containers-0.1.3.0-c8c434ba474a408c40a155b68fe1059a1c9196931f80e9c4ade09421da2372fd/share/doc/html/src"><span class="hs-identifier hs-var">SSeq.fromList</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">forall era.
ShelleyEraTxCert era =&gt;
StakeCredential (EraCrypto era) -&gt; TxCert era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">RegTxCert</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679427959"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking (EraCrypto era)
</span><a href="#local-6989586621679425064"><span class="hs-identifier hs-var">stakingCredential</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1178"></span><span>  </span><span id="local-6989586621679425059"><span class="annot"><span class="annottext">Network
</span><a href="#local-6989586621679425059"><span class="hs-identifier hs-var">networkId</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *) a. MonadState s m =&gt; Getting a s a -&gt; m a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-mtl-0.2.0.3-30febb7a254c037eae9a749580d8462f4e1181aa6379e82c103234a8f48251c9/share/doc/html/src"><span class="hs-identifier hs-var">use</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. ImpTestState era -&gt; Globals
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impGlobals"><span class="hs-identifier hs-var">impGlobals</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall s a. (s -&gt; a) -&gt; SimpleGetter s a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-identifier hs-var">to</span></a></span><span> </span><span class="annot"><span class="annottext">Globals -&gt; Network
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">networkId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1179"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall c. Network -&gt; Credential 'Staking c -&gt; RewardAccount c
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">RewardAccount</span></a></span><span> </span><span class="annot"><span class="annottext">Network
</span><a href="#local-6989586621679425059"><span class="hs-identifier hs-var">networkId</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking (EraCrypto era)
</span><a href="#local-6989586621679425064"><span class="hs-identifier hs-var">stakingCredential</span></a></span><span>
</span><span id="line-1180"></span><span>
</span><span id="line-1181"></span><span id="local-6989586621679427950"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#lookupReward"><span class="hs-identifier hs-type">lookupReward</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Credential</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Staking</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427950"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427950"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Coin</span></a></span></span><span>
</span><span id="line-1182"></span><span id="lookupReward"><span class="annot"><span class="annottext">lookupReward :: forall era.
HasCallStack =&gt;
Credential 'Staking (EraCrypto era) -&gt; ImpTestM era Coin
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#lookupReward"><span class="hs-identifier hs-var hs-var">lookupReward</span></a></span></span><span> </span><span id="local-6989586621679425042"><span class="annot"><span class="annottext">Credential 'Staking (EraCrypto era)
</span><a href="#local-6989586621679425042"><span class="hs-identifier hs-var">stakingCredential</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1183"></span><span>  </span><span id="local-6989586621679425041"><span class="annot"><span class="annottext">UMap (EraCrypto era)
</span><a href="#local-6989586621679425041"><span class="hs-identifier hs-var">umap</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era. Lens' (NewEpochState era) (EpochState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (EpochState era) (UMap (EraCrypto era))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">epochStateUMapL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1184"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall k c v. k -&gt; UView c k v -&gt; Maybe v
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">UMap.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking (EraCrypto era)
</span><a href="#local-6989586621679425042"><span class="hs-identifier hs-var">stakingCredential</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall c. UMap c -&gt; UView c (Credential 'Staking c) RDPair
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">RewDepUView</span></a></span><span> </span><span class="annot"><span class="annottext">UMap (EraCrypto era)
</span><a href="#local-6989586621679425041"><span class="hs-identifier hs-var">umap</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1185"></span><span>    </span><span class="annot"><span class="annottext">Maybe RDPair
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1186"></span><span>      </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1187"></span><span>        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Staking Credential is not found in the state: &quot;</span></span><span>
</span><span id="line-1188"></span><span>          </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking (EraCrypto era)
</span><a href="#local-6989586621679425042"><span class="hs-identifier hs-var">stakingCredential</span></a></span><span>
</span><span id="line-1189"></span><span>          </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\nMake sure you have the reward account registered with `registerRewardAccount` &quot;</span></span><span>
</span><span id="line-1190"></span><span>          </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;or by some other means.&quot;</span></span><span>
</span><span id="line-1191"></span><span>    </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679425038"><span class="annot"><span class="annottext">RDPair
</span><a href="#local-6989586621679425038"><span class="hs-identifier hs-var">rd</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Compactible a =&gt; CompactForm a -&gt; a
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">fromCompact</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RDPair -&gt; CompactForm Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">rdReward</span></a></span><span> </span><span class="annot"><span class="annottext">RDPair
</span><a href="#local-6989586621679425038"><span class="hs-identifier hs-var">rd</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1192"></span><span>
</span><span id="line-1193"></span><span id="local-6989586621679427947"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#registerPool"><span class="hs-identifier hs-type">registerPool</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427947"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427947"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">KeyHash</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">StakePool</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427947"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-1194"></span><span id="registerPool"><span class="annot"><span class="annottext">registerPool :: forall era.
ShelleyEraImp era =&gt;
ImpTestM era (KeyHash 'StakePool (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#registerPool"><span class="hs-identifier hs-var hs-var">registerPool</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1195"></span><span>  </span><span id="local-6989586621679425002"><span class="annot"><span class="annottext">KeyHash 'StakePool (EraCrypto era)
</span><a href="#local-6989586621679425002"><span class="hs-identifier hs-var">khPool</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era (r :: KeyRole).
Era era =&gt;
ImpTestM era (KeyHash r (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHash"><span class="hs-identifier hs-var">freshKeyHash</span></a></span><span>
</span><span id="line-1196"></span><span>  </span><span id="local-6989586621679425001"><span class="annot"><span class="annottext">RewardAccount (EraCrypto era)
</span><a href="#local-6989586621679425001"><span class="hs-identifier hs-var">rewardAccount</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
ImpTestM era (RewardAccount (EraCrypto era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#registerRewardAccount"><span class="hs-identifier hs-var">registerRewardAccount</span></a></span><span>
</span><span id="line-1197"></span><span>  </span><span id="local-6989586621679425000"><span class="annot"><span class="annottext">Hash (HASH (EraCrypto era)) (VerKeyVRF (VRF (EraCrypto era)))
</span><a href="#local-6989586621679425000"><span class="hs-identifier hs-var">vrfHash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era.
Era era =&gt;
ImpTestM
  era (Hash (HASH (EraCrypto era)) (VerKeyVRF (EraCrypto era)))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#freshKeyHashVRF"><span class="hs-identifier hs-var">freshKeyHashVRF</span></a></span><span>
</span><span id="line-1198"></span><span>  </span><span class="hs-keyword">let</span><span>
</span><span id="line-1199"></span><span>    </span><span id="local-6989586621679424999"><span class="annot"><span class="annottext">poolParams :: PoolParams (EraCrypto era)
</span><a href="#local-6989586621679424999"><span class="hs-identifier hs-var hs-var">poolParams</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1200"></span><span>      </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">PoolParams</span></a></span><span>
</span><span id="line-1201"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ppVrf :: Hash (HASH (EraCrypto era)) (VerKeyVRF (VRF (EraCrypto era)))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">ppVrf</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Hash (HASH (EraCrypto era)) (VerKeyVRF (VRF (EraCrypto era)))
</span><a href="#local-6989586621679425000"><span class="hs-identifier hs-var">vrfHash</span></a></span><span>
</span><span id="line-1202"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ppRewardAccount :: RewardAccount (EraCrypto era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">ppRewardAccount</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RewardAccount (EraCrypto era)
</span><a href="#local-6989586621679425001"><span class="hs-identifier hs-var">rewardAccount</span></a></span><span>
</span><span id="line-1203"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ppRelays :: StrictSeq StakePoolRelay
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">ppRelays</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1204"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ppPledge :: Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">ppPledge</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t. Val t =&gt; t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">zero</span></a></span><span>
</span><span id="line-1205"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ppOwners :: Set (KeyHash 'Staking (EraCrypto era))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">ppOwners</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Monoid a =&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">mempty</span></a></span><span>
</span><span id="line-1206"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ppMetadata :: StrictMaybe PoolMetadata
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">ppMetadata</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. StrictMaybe a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-strict-containers-0.1.3.0-c8c434ba474a408c40a155b68fe1059a1c9196931f80e9c4ade09421da2372fd/share/doc/html/src"><span class="hs-identifier hs-var">SNothing</span></a></span><span>
</span><span id="line-1207"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ppMargin :: UnitInterval
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">ppMargin</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. Default a =&gt; a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/data-default-class-0.1.2.0-d021275d74faf56efb7a1c98c49b66562c7b07f4d3882878288b6faf38a43071/share/doc/html/src"><span class="hs-identifier hs-var">def</span></a></span><span>
</span><span id="line-1208"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ppId :: KeyHash 'StakePool (EraCrypto era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">ppId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool (EraCrypto era)
</span><a href="#local-6989586621679425002"><span class="hs-identifier hs-var">khPool</span></a></span><span>
</span><span id="line-1209"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ppCost :: Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">ppCost</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall t. Val t =&gt; t
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">zero</span></a></span><span>
</span><span id="line-1210"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-1211"></span><span>  </span><span class="annot"><span class="annottext">forall era.
(HasCallStack, ShelleyEraImp era) =&gt;
String -&gt; Tx era -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#submitTxAnn_"><span class="hs-identifier hs-var">submitTxAnn_</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Registering a new stake pool&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-1212"></span><span>    </span><span class="annot"><span class="annottext">forall era. EraTx era =&gt; TxBody era -&gt; Tx era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">mkBasicTx</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTxBody era =&gt; TxBody era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">mkBasicTxBody</span></a></span><span>
</span><span id="line-1213"></span><span>      </span><span class="annot"><span class="annottext">forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&amp;</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. EraTx era =&gt; Lens' (Tx era) (TxBody era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">bodyTxL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
EraTxBody era =&gt;
Lens' (TxBody era) (StrictSeq (TxCert era))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">certsTxBodyL</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. a -&gt; StrictSeq a
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/cardano-strict-containers-0.1.3.0-c8c434ba474a408c40a155b68fe1059a1c9196931f80e9c4ade09421da2372fd/share/doc/html/src"><span class="hs-identifier hs-var">SSeq.singleton</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall era.
EraTxCert era =&gt;
PoolParams (EraCrypto era) -&gt; TxCert era
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">RegPoolTxCert</span></a></span><span> </span><span class="annot"><span class="annottext">PoolParams (EraCrypto era)
</span><a href="#local-6989586621679424999"><span class="hs-identifier hs-var">poolParams</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1214"></span><span>  </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">KeyHash 'StakePool (EraCrypto era)
</span><a href="#local-6989586621679425002"><span class="hs-identifier hs-var">khPool</span></a></span><span>
</span><span id="line-1215"></span><span>
</span><span id="line-1216"></span><span class="hs-comment">-- | Performs the action without running the fix-up function on any transactions</span><span>
</span><span id="line-1217"></span><span id="local-6989586621679427938"><span id="local-6989586621679427939"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#withNoFixup"><span class="hs-identifier hs-type">withNoFixup</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427939"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427938"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427939"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427938"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-1218"></span><span id="withNoFixup"><span class="annot"><span class="annottext">withNoFixup :: forall era a. ImpTestM era a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#withNoFixup"><span class="hs-identifier hs-var hs-var">withNoFixup</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; r) -&gt; m a -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">local</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (ImpTestEnv era) Bool
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#iteDoTxFixupL"><span class="hs-identifier hs-var">iteDoTxFixupL</span></a></span><span> </span><span class="annot"><span class="annottext">forall s t a b. ASetter s t a b -&gt; b -&gt; s -&gt; t
</span><a href="../file:///home/runner/.local/state/cabal/store/ghc-9.2.8/microlens-0.4.13.1-4ed643256a110b303f6f820bacb1b8b591d4bda77ab5e472fb373cee3154cb30/share/doc/html/src"><span class="hs-operator hs-var">.~</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">False</span></a></span><span>
</span><span id="line-1219"></span><span>
</span><span id="line-1220"></span><span id="local-6989586621679427935"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#expectRegisteredRewardAddress"><span class="hs-identifier hs-type">expectRegisteredRewardAddress</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">RewardAccount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427935"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427935"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1221"></span><span id="expectRegisteredRewardAddress"><span class="annot"><span class="annottext">expectRegisteredRewardAddress :: forall era. RewardAccount (EraCrypto era) -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#expectRegisteredRewardAddress"><span class="hs-identifier hs-var hs-var">expectRegisteredRewardAddress</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">RewardAccount</span></a></span><span> </span><span class="annot"><span class="annottext">Network
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679424973"><span class="annot"><span class="annottext">Credential 'Staking (EraCrypto era)
</span><a href="#local-6989586621679424973"><span class="hs-identifier hs-var">cred</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1222"></span><span>  </span><span id="local-6989586621679424972"><span class="annot"><span class="annottext">UMap (EraCrypto era)
</span><a href="#local-6989586621679424972"><span class="hs-identifier hs-var">umap</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (NewEpochState era) (EpochState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (EpochState era) (LedgerState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">esLStateL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (LedgerState era) (CertState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">lsCertStateL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (CertState era) (DState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">certDStateL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (DState era) (UMap (EraCrypto era))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">dsUnifiedL</span></a></span><span>
</span><span id="line-1223"></span><span>  </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.member</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking (EraCrypto era)
</span><a href="#local-6989586621679424973"><span class="hs-identifier hs-var">cred</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall c. UMap c -&gt; Map (Credential 'Staking c) RDPair
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">rdPairMap</span></a></span><span> </span><span class="annot"><span class="annottext">UMap (EraCrypto era)
</span><a href="#local-6989586621679424972"><span class="hs-identifier hs-var">umap</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a (m :: * -&gt; *).
(HasCallStack, Show a, Eq a, MonadIO m) =&gt;
a -&gt; a -&gt; m ()
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-operator hs-var">`shouldBe`</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">True</span></a></span><span>
</span><span id="line-1224"></span><span>
</span><span id="line-1225"></span><span id="local-6989586621679424964"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#expectNotRegisteredRewardAddress"><span class="hs-identifier hs-type">expectNotRegisteredRewardAddress</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">RewardAccount</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679424964"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679424964"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1226"></span><span id="expectNotRegisteredRewardAddress"><span class="annot"><span class="annottext">expectNotRegisteredRewardAddress :: forall era. RewardAccount (EraCrypto era) -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#expectNotRegisteredRewardAddress"><span class="hs-identifier hs-var hs-var">expectNotRegisteredRewardAddress</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">RewardAccount</span></a></span><span> </span><span class="annot"><span class="annottext">Network
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679424956"><span class="annot"><span class="annottext">Credential 'Staking (EraCrypto era)
</span><a href="#local-6989586621679424956"><span class="hs-identifier hs-var">cred</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1227"></span><span>  </span><span id="local-6989586621679424955"><span class="annot"><span class="annottext">UMap (EraCrypto era)
</span><a href="#local-6989586621679424955"><span class="hs-identifier hs-var">umap</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (NewEpochState era) (EpochState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (EpochState era) (LedgerState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">esLStateL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (LedgerState era) (CertState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">lsCertStateL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (CertState era) (DState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">certDStateL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (DState era) (UMap (EraCrypto era))
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">dsUnifiedL</span></a></span><span>
</span><span id="line-1228"></span><span>  </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.member</span></a></span><span> </span><span class="annot"><span class="annottext">Credential 'Staking (EraCrypto era)
</span><a href="#local-6989586621679424956"><span class="hs-identifier hs-var">cred</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall c. UMap c -&gt; Map (Credential 'Staking c) RDPair
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">rdPairMap</span></a></span><span> </span><span class="annot"><span class="annottext">UMap (EraCrypto era)
</span><a href="#local-6989586621679424955"><span class="hs-identifier hs-var">umap</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">forall a (m :: * -&gt; *).
(HasCallStack, Show a, Eq a, MonadIO m) =&gt;
a -&gt; a -&gt; m ()
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-operator hs-var">`shouldBe`</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/ghc-prim-0.8.0/src"><span class="hs-identifier hs-var">False</span></a></span><span>
</span><span id="line-1229"></span><span>
</span><span id="line-1230"></span><span id="local-6989586621679427923"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#expectTreasury"><span class="hs-identifier hs-type">expectTreasury</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">HasCallStack</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">Coin</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427923"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-1231"></span><span id="expectTreasury"><span class="annot"><span class="annottext">expectTreasury :: forall era. HasCallStack =&gt; Coin -&gt; ImpTestM era ()
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#expectTreasury"><span class="hs-identifier hs-var hs-var">expectTreasury</span></a></span></span><span> </span><span id="local-6989586621679424941"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679424941"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1232"></span><span>  </span><span class="annot"><span class="annottext">forall a era.
NFData a =&gt;
String -&gt; ImpTestM era a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impAnn"><span class="hs-identifier hs-var">impAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Checking treasury amount&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1233"></span><span>    </span><span id="local-6989586621679424940"><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679424940"><span class="hs-identifier hs-var">treasuryAmt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era a. SimpleGetter (NewEpochState era) a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getsNES"><span class="hs-identifier hs-var">getsNES</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (NewEpochState era) (EpochState era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">nesEsL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">forall era. Lens' (EpochState era) AccountState
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">esAccountStateL</span></a></span><span> </span><span class="annot"><span class="annottext">forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' AccountState Coin
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-shelley-1.10.0.0/doc/html/cardano-ledger-shelley/src"><span class="hs-identifier hs-var">asTreasuryL</span></a></span><span>
</span><span id="line-1234"></span><span>    </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679424941"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">forall a (m :: * -&gt; *).
(HasCallStack, Show a, Eq a, MonadIO m) =&gt;
a -&gt; a -&gt; m ()
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/l/testlib/doc/html/cardano-ledger-core/src"><span class="hs-operator hs-var">`shouldBe`</span></a></span><span> </span><span class="annot"><span class="annottext">Coin
</span><a href="#local-6989586621679424940"><span class="hs-identifier hs-var">treasuryAmt</span></a></span><span>
</span><span id="line-1235"></span><span>
</span><span id="line-1236"></span><span id="local-6989586621679427920"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impGetNativeScript"><span class="hs-identifier hs-type">impGetNativeScript</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">ScriptHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427920"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427920"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">NativeScript</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427920"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-1237"></span><span id="impGetNativeScript"><span class="annot"><span class="annottext">impGetNativeScript :: forall era.
ScriptHash (EraCrypto era)
-&gt; ImpTestM era (Maybe (NativeScript era))
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impGetNativeScript"><span class="hs-identifier hs-var hs-var">impGetNativeScript</span></a></span></span><span> </span><span id="local-6989586621679424933"><span class="annot"><span class="annottext">ScriptHash (EraCrypto era)
</span><a href="#local-6989586621679424933"><span class="hs-identifier hs-var">sh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/containers-0.6.5.1/src"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash (EraCrypto era)
</span><a href="#local-6989586621679424933"><span class="hs-identifier hs-var">sh</span></a></span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/mtl-2.2.2/src"><span class="hs-identifier hs-var">gets</span></a></span><span> </span><span class="annot"><span class="annottext">forall era.
ImpTestState era
-&gt; Map (ScriptHash (EraCrypto era)) (NativeScript era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impNativeScripts"><span class="hs-identifier hs-var">impNativeScripts</span></a></span><span>
</span><span id="line-1238"></span><span>
</span><span id="line-1239"></span><span id="local-6989586621679427918"><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impLookupUTxO"><span class="hs-identifier hs-type">impLookupUTxO</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ShelleyEraImp"><span class="hs-identifier hs-type">ShelleyEraImp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427918"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">EraCrypto</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427918"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#ImpTestM"><span class="hs-identifier hs-type">ImpTestM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427918"><span class="hs-identifier hs-type">era</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-type">TxOut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679427918"><span class="hs-identifier hs-type">era</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1240"></span><span id="impLookupUTxO"><span class="annot"><span class="annottext">impLookupUTxO :: forall era.
ShelleyEraImp era =&gt;
TxIn (EraCrypto era) -&gt; ImpTestM era (TxOut era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impLookupUTxO"><span class="hs-identifier hs-var hs-var">impLookupUTxO</span></a></span></span><span> </span><span id="local-6989586621679424915"><span class="annot"><span class="annottext">TxIn (EraCrypto era)
</span><a href="#local-6989586621679424915"><span class="hs-identifier hs-var">txIn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a era.
NFData a =&gt;
String -&gt; ImpTestM era a -&gt; ImpTestM era a
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#impAnn"><span class="hs-identifier hs-var">impAnn</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Looking up TxOut&quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1241"></span><span>  </span><span id="local-6989586621679424914"><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621679424914"><span class="hs-identifier hs-var">utxo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall era. ImpTestM era (UTxO era)
</span><a href="Test.Cardano.Ledger.Shelley.ImpTest.html#getUTxO"><span class="hs-identifier hs-var">getUTxO</span></a></span><span>
</span><span id="line-1242"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">forall era. TxIn (EraCrypto era) -&gt; UTxO era -&gt; Maybe (TxOut era)
</span><a href="../file:///home/runner/work/cardano-ledger/cardano-ledger/dist-newstyle/build/x86_64-linux/ghc-9.2.8/cardano-ledger-core-1.11.0.0/doc/html/cardano-ledger-core/src"><span class="hs-identifier hs-var">txinLookup</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn (EraCrypto era)
</span><a href="#local-6989586621679424915"><span class="hs-identifier hs-var">txIn</span></a></span><span> </span><span class="annot"><span class="annottext">UTxO era
</span><a href="#local-6989586621679424914"><span class="hs-identifier hs-var">utxo</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1243"></span><span>    </span><span class="annot"><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-type">Just</span></a></span><span> </span><span id="local-6989586621679424913"><span class="annot"><span class="annottext">TxOut era
</span><a href="#local-6989586621679424913"><span class="hs-identifier hs-var">txOut</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">pure</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut era
</span><a href="#local-6989586621679424913"><span class="hs-identifier hs-var">txOut</span></a></span><span>
</span><span id="line-1244"></span><span>    </span><span class="annot"><span class="annottext">Maybe (TxOut era)
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">Nothing</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Failed to get TxOut for &quot;</span></span><span> </span><span class="annot"><span class="annottext">forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><a href="../file:///usr/local/.ghcup/ghc/9.2.8/share/doc/ghc-9.2.8/html/libraries/base-4.16.4.0/src"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn (EraCrypto era)
</span><a href="#local-6989586621679424915"><span class="hs-identifier hs-var">txIn</span></a></span><span>
</span><span id="line-1245"></span></pre></body></html>